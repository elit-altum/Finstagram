(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{44:function(e,t,a){e.exports=a(83)},82:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(14),s=a.n(c),l=a(6),o=(a(49),a(7)),u=a(9),i=a(4),m=a(19),p=a(3),d=a.n(p),f=function(e){return r.a.createElement("div",{className:"layout"},e.children)},E=a(2),v=a.n(E),h=a(5),b=a(12),w=function(){var e=Object(h.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/v1/users/logout",e.prev=1,e.next=4,d()({url:"/api/v1/users/logout",method:"GET"});case 4:l.b.success("Logged out successfully!",{autoClose:2e3,pauseOnHover:!1}),setTimeout((function(){window.location.reload(!0)}),2e3),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),l.b.error("Error logging out. Please try again later.");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),g=function(e){e.closeToast;var t=e.user;return r.a.createElement("div",{className:"header-toast"},r.a.createElement("p",null,t.username.toUpperCase()),r.a.createElement("button",{className:"header-toast-logout",onClick:w},"Logout"),r.a.createElement("button",{onClick:function(){return ne.push("/user/".concat(t.username))}},"My Profile"))},N=function(e){var t=e.user;return r.a.createElement("header",null,r.a.createElement("nav",{className:"header"},r.a.createElement("div",{className:"header-content"},r.a.createElement("div",{className:"header-logo"},r.a.createElement(b.a,{to:"/"},"Finstagram")),r.a.createElement("ul",{className:"header-navLinks"},r.a.createElement("li",null,r.a.createElement("img",{src:t.photo,alt:"".concat(t.username,"'s profile"),className:"header-profile",onClick:function(){return Object(l.b)(r.a.createElement(g,{user:t}),{autoClose:1e4})}}))))))},k=0,y={},_=function(e){var t=e.component,a=Object(m.a)(e,["component"]),c=Object(n.useState)(),s=Object(i.a)(c,2),l=s[0],u=s[1];return Object(n.useEffect)((function(){d.a.get("/api/v1/users/isLoggedIn").then((function(e){return k++,y=e.data.data.user,u(!0)})).catch((function(e){if(k++,401===e.response.status)return u(!1)}))}),[]),r.a.createElement(o.b,Object.assign({},a,{component:function(e){return l?r.a.createElement(r.a.Fragment,null,r.a.createElement(N,{user:y}),r.a.createElement(f,null,r.a.createElement(t,Object.assign({},e,{user:y})))):!!k&&r.a.createElement(o.a,{to:"/login"})}}))},O=0,x=function(e){var t=e.component,a=Object(m.a)(e,["component"]),c=Object(n.useState)(),s=Object(i.a)(c,2),l=s[0],u=s[1];return Object(n.useEffect)((function(){d.a.get("/api/v1/users/isLoggedIn").then((function(){return O++,u(!0)})).catch((function(e){if(O++,401===e.response.status)return u(!1)}))}),[]),r.a.createElement(o.b,Object.assign({},a,{component:function(e){return l?!!O&&r.a.createElement(o.a,{to:"/"}):!!O&&r.a.createElement(f,null,r.a.createElement(t,e))}}))},j=a(16),C=a(18),S=function(e){var t=e.user;return r.a.createElement("div",{className:"discover__userCard",onClick:function(){return ne.push("/user/".concat(t.username))}},r.a.createElement("img",{src:t.photo,alt:"User profile"}),r.a.createElement("h3",null,t.username),r.a.createElement("p",null,t.name))},B=function(e){var t=e.message,a=Object(n.useState)([]),c=Object(i.a)(a,2),s=c[0],l=c[1],o=function(){var e=Object(h.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"/api/v1/users/random",e.next=4,d()({url:"/api/v1/users/random",method:"GET"});case 4:t=e.sent,l(t.data.data.users),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"not-found-container"},r.a.createElement("div",{className:"not-found__icon"},r.a.createElement(C.a,null)),r.a.createElement("h2",{className:"not-found__message"},t),r.a.createElement("button",{className:"discover__button",onClick:o},"Find People"),!!s.length&&r.a.createElement("div",{className:"discover__users"},s.map((function(e){return r.a.createElement(S,{user:e,key:e.id})}))))},T=function(){return r.a.createElement("div",{id:"wrapper"},r.a.createElement("div",{className:"profile-main-loader"},r.a.createElement("div",{className:"loader"},r.a.createElement("svg",{className:"circular-loader",viewBox:"25 25 50 50"},r.a.createElement("circle",{className:"loader-path",cx:"50",cy:"50",r:"20",fill:"none",strokeWidth:"2"})))))},P=a(15),D=a.n(P),I=function(e){var t=e.user;return r.a.createElement("div",{className:"like-modal__item"},r.a.createElement("div",{className:"like-modal__item--profile"},r.a.createElement("img",{src:"".concat(t.photo),alt:"".concat(t.username,"'s profile")})),r.a.createElement("div",{className:"like-modal__item--names"},r.a.createElement("p",{className:"like-modal__item--username",onClick:function(){return ne.push("/user/".concat(t.username))}},t.username),r.a.createElement("p",{className:"like-modal__item--name"},t.name)))},U=function(e){var t=e.likes;return r.a.createElement("div",{className:"like-modal__list"},r.a.createElement("h3",null,"Liked By"),t.map((function(e){return r.a.createElement(I,{user:e.likedBy,key:e._id})})))},q=a(8),F=function(e){var t=e.post,a=Object(n.useState)(t.likedByMe),c=Object(i.a)(a,2),s=c[0],l=c[1],o=Object(n.useState)(1*t.likes),u=Object(i.a)(o,2),m=u[0],p=u[1],f=Object(n.useState)(!1),E=Object(i.a)(f,2),w=E[0],g=E[1],N=Object(n.useState)([]),k=Object(i.a)(N,2),y=k[0],_=k[1],O=function(){var e=Object(h.a)(v.a.mark((function e(){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/api/v1/posts/".concat(t.id,"/likedBy"),e.prev=1,e.next=4,d()({url:a,method:"GET"});case 4:n=e.sent,_(n.data.data.likers),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:g(!0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(h.a)(v.a.mark((function e(){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/api/v1/posts/".concat(t.id,"/like"),e.prev=1,e.next=4,d()({url:a,method:"GET"});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),l(!s);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(h.a)(v.a.mark((function e(){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/api/v1/posts/".concat(t.id,"/unlike"),e.prev=1,e.next=4,d()({url:a,method:"GET"});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),l(!s);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(h.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s,l(!s),!t){e.next=8;break}return p(m-1),e.next=6,j();case 6:e.next=11;break;case 8:return p(m+1),e.next=11,x();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return!!t.id&&r.a.createElement("div",{className:"postCard"},r.a.createElement("div",{className:"postCard__userInfo"},r.a.createElement("img",{src:t.createdBy.photo,alt:"".concat(t.createdBy.username,"'s profile")}),r.a.createElement("p",{onClick:function(){return ne.push("/user/".concat(t.createdBy.username))}},t.createdBy.username)),r.a.createElement("div",{className:"postCard__image"},r.a.createElement("img",{src:t.photo,alt:"".concat(t.createdBy.username,"'s post"),onDoubleClick:C})),r.a.createElement("div",{className:"postCard__meta"},r.a.createElement("div",{className:"postCard__meta--icons"},s?r.a.createElement(q.b,{style:{color:"#b71c1c"},onClick:C}):r.a.createElement(q.e,{onClick:C}),r.a.createElement(b.a,{to:"/post/".concat(t.id)},r.a.createElement(q.c,null)))),!!m&&r.a.createElement("p",{onClick:O,className:"postCard__likes"},"".concat(m," ").concat(1===m?"like":"likes")),r.a.createElement("div",{className:"postCard__caption"},r.a.createElement("p",{className:"postCard__caption--username",onClick:function(){return ne.push("/user/".concat(t.createdBy.username))}},t.createdBy.username),r.a.createElement("p",{className:"postCard__caption--body"},t.caption)),!!t.comments&&r.a.createElement(b.a,{to:"/post/".concat(t.id),className:"postCard__comments"},r.a.createElement("p",null,"View ".concat(t.comments," ").concat(1===t.comments?"comment":"comments"))),r.a.createElement("p",{className:"postCard__date"},function(e){var t=new Date(e).setHours(0,0,0,0);return{0:"Today",864e5:"Yesterday"}[new Date(Date.now()).setHours(0,0,0,0)-t]||new Date(e).toLocaleDateString("en-us",{year:"numeric",month:"long",day:"numeric"})}(t.createdAt)),r.a.createElement(D.a,{isOpen:w,onRequestClose:function(){g(!1)},ariaHideApp:!1,contentLabel:"Like Modal",closeTimeoutMS:200,className:"modal"},r.a.createElement(U,{likes:y})))},M=F;F.defaultProps={post:{_id:"5edf5aec3561dd32206cecc1",caption:"My Niece is good!",photo:"/img/posts/post-5edf42f57e58a1049ca59e8a-1591696108114.jpg",dimensions:"1000 x 1000",createdBy:{photo:"/img/user-profiles/default.png",_id:"5edf42f57e58a1049ca59e8a",username:"jayantxk",id:"5edf42f57e58a1049ca59e8a"},createdAt:"2020-06-09T09:48:28.166Z",updatedAt:"2020-06-09T09:48:28.166Z",__v:0,likes:21,comments:40,id:"5edf5aec3561dd32206cecc1",likedByMe:!1}};var L=0,G=function(e){var t=Object(n.useState)(["init"]),a=Object(i.a)(t,2),c=a[0],s=a[1];return Object(n.useEffect)((function(){(function(){var e=Object(h.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"/api/v1/posts/feed",e.next=4,d()({url:"/api/v1/posts/feed",method:"GET"});case 4:t=e.sent,L++,s(t.data.data.posts),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),L++;case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement("div",{className:"my-timeline"},L?c.length?c.map((function(e){return r.a.createElement(M,{post:e,key:e.id})})):r.a.createElement("div",{className:"no-posts"},r.a.createElement(B,{message:"No posts found. Please follow users to view a timeline."})):r.a.createElement(T,null),r.a.createElement("div",{className:"cta-buttons"},r.a.createElement("button",{className:"searchUsers-button",onClick:function(){return ne.push("/searchUsers")},title:"Search Users"},r.a.createElement(j.c,null))))},H=function(){return r.a.createElement("div",{className:"loader"},r.a.createElement("div",{className:"loader__outer"}),r.a.createElement("div",{className:"loader__inner"}))},A=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],s=function(){var e=Object(h.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c(!0),a=document.getElementById("username_field").value,n=document.getElementById("password_field").value,e.prev=4,e.next=7,d()({url:"/api/v1/users/login",method:"POST",data:{username:a,password:n}});case 7:l.b.success("Logged in successfully! Redirecting..",{autoClose:2e3}),setTimeout((function(){window.location.reload(!0)}),2e3),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),c(!1),l.b.error("Error: ".concat(e.t0.response.data.data.error.message));case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"login-page"},r.a.createElement("div",{className:"login-form-container"},r.a.createElement("h2",null,"Finstagram"),r.a.createElement("form",{onSubmit:s,className:"login-form"},r.a.createElement("input",{type:"text",name:"username",required:!0,placeholder:"username",id:"username_field"}),r.a.createElement("input",{type:"password",name:"password",placeholder:"********",id:"password_field",required:!0}),r.a.createElement("button",{type:"submit",className:"login-form__submit",disabled:a},a?r.a.createElement(H,null):r.a.createElement("p",null,"Submit"))),r.a.createElement("p",null,"No account? ",r.a.createElement(b.a,{to:"/signup"},"Sign up"))))},R=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],s=function(){var e=Object(h.a)(v.a.mark((function e(t){var a,n,r,s,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c(!0),a=document.getElementById("username_field").value,n=document.getElementById("name_field").value,r=document.getElementById("email_field").value,s=document.getElementById("password_field").value,o=document.getElementById("passwordConfirm_field").value,e.prev=7,e.next=10,d()({url:"/api/v1/users/signup",method:"POST",data:{username:a,name:n,email:r,password:s,passwordConfirm:o}});case 10:l.b.success("New account created!",{autoClose:2e3}),setTimeout((function(){window.location.reload(!0)}),2e3),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(7),c(!1),l.b.error("Error: ".concat(e.t0.response.data.data.error.message));case 18:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"login-page"},r.a.createElement("div",{className:"login-form-container"},r.a.createElement("h2",null,"Finstagram"),r.a.createElement("form",{onSubmit:s,class:"login-form"},r.a.createElement("input",{type:"text",name:"username",required:!0,placeholder:"Username",id:"username_field"}),r.a.createElement("input",{type:"text",name:"name",required:!0,placeholder:"Name",id:"name_field"}),r.a.createElement("input",{type:"email",name:"email",required:!0,placeholder:"Email Address",id:"email_field"}),r.a.createElement("input",{type:"password",name:"password",placeholder:"********",id:"password_field",required:!0}),r.a.createElement("input",{type:"password",name:"passwordConfirm",placeholder:"********",id:"passwordConfirm_field",required:!0}),r.a.createElement("button",{type:"submit",className:"login-form__submit",disabled:a},a?r.a.createElement(H,null):r.a.createElement("p",null,"Submit")))))},V=function(e){var t=e.comment,a=e.user,n=e.removeComment,c=a.id===t.createdBy.id;return r.a.createElement("div",{className:"comment"},r.a.createElement("div",{className:"comment--meta"},r.a.createElement("img",{src:t.createdBy.photo,alt:"".concat(t.createdBy.username,"'s profile")}),r.a.createElement("p",{className:"comment--username",onClick:function(){return ne.push("/user/".concat(t.createdBy.username))}},t.createdBy.username),r.a.createElement("p",{className:"comment--body"},t.body)),!!c&&r.a.createElement("div",{className:"comment--delete"},r.a.createElement(q.a,{onClick:function(){return n(t._id)},title:"Delete Comment"})))},J=function(e){var t=e.id,a=e.user,c=Object(n.useState)([]),s=Object(i.a)(c,2),l=s[0],o=s[1],u=function(){var e=Object(h.a)(v.a.mark((function e(a){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,d()({url:"/api/v1/posts/".concat(t,"/comments"),method:"POST",data:{comment:document.getElementById("comment-field").value}});case 4:n=e.sent,document.getElementById("comment-field").value="",o(l.concat([n.data.data.comment])),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(h.a)(v.a.mark((function e(a){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d()({url:"/api/v1/posts/".concat(t,"/comment/").concat(a),method:"DELETE"});case 3:n=l.filter((function(e){return e._id!==a})),o(n),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){(function(){var e=Object(h.a)(v.a.mark((function e(){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d()({url:"/api/v1/posts/".concat(t,"/comments"),method:"GET"});case 3:a=e.sent,o(a.data.data.comments),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement("div",{className:"commentArray"},r.a.createElement("h3",null,"Comments"),r.a.createElement("div",{className:"commentsArray-list"},l.map((function(e){return r.a.createElement(V,{comment:e,key:e._id,user:a,removeComment:m})}))),r.a.createElement("div",{className:"createComment-form"},r.a.createElement("form",{onSubmit:u},r.a.createElement("input",{type:"text",name:"comment",required:!0,id:"comment-field",placeholder:"Add Comment"}),r.a.createElement("button",{type:"submit"},r.a.createElement(q.g,null)))))},Y=function(e){var t=e.user,a=Object(o.g)().postId,c=Object(n.useState)({}),s=Object(i.a)(c,2),l=s[0],u=s[1],m=Object(n.useState)(),p=Object(i.a)(m,2),f=p[0],E=p[1],b=Object(n.useState)(l.likedByMe),w=Object(i.a)(b,2),g=w[0],N=w[1],k=Object(n.useState)(1*l.likes),y=Object(i.a)(k,2),_=y[0],O=y[1],x=Object(n.useState)(!1),j=Object(i.a)(x,2),C=j[0],S=j[1],B=function(){var e=Object(h.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d()({url:"/api/v1/posts/one/".concat(a),method:"GET"});case 3:t=e.sent,n=t.data.results.post,u(n),N(n.likedByMe),O(1*n.likes),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){B()}),[]);var P=function(){var e=Object(h.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/api/v1/posts/".concat(a,"/likedBy"),e.prev=1,e.next=4,d()({url:t,method:"GET"});case 4:n=e.sent,E(n.data.data.likers),S(!0),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(h.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/api/v1/posts/".concat(a,"/like"),e.prev=1,e.next=4,d()({url:t,method:"GET"});case 4:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),N(!g);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(h.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/api/v1/posts/".concat(a,"/unlike"),e.prev=1,e.next=4,d()({url:t,method:"GET"});case 4:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),N(!g);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(h.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=g,N(!g),!t){e.next=8;break}return O(_-1),e.next=6,F();case 6:e.next=11;break;case 8:return O(_+1),e.next=11,I();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return l.id?r.a.createElement("div",{className:"postDetails"},r.a.createElement("div",{className:"postDetails--info"},r.a.createElement("div",{className:"postDetails--meta"},r.a.createElement("img",{src:l.createdBy.photo,alt:"".concat(l.createdBy.username,"'s profile")}),r.a.createElement("p",{className:"postDetails--username",onClick:function(){return ne.push("/user/".concat(l.createdBy.username))}},l.createdBy.username)),r.a.createElement("div",{className:"postDetails--image"},r.a.createElement("img",{src:l.photo,alt:"".concat(l.createdBy.username,"'s post"),onDoubleClick:M})),r.a.createElement("div",{className:"postDetails__likes"},g?r.a.createElement(q.b,{style:{color:"#b71c1c"},onClick:M}):r.a.createElement(q.e,{onClick:M}),!!_&&r.a.createElement("p",{onClick:P,className:"postDetails__likes--count"},"".concat(_," ").concat(1===_?"like":"likes"))),r.a.createElement("p",{className:"postCard__date"},function(e){var t=new Date(e).setHours(0,0,0,0);return{0:"Today",864e5:"Yesterday"}[new Date(Date.now()).setHours(0,0,0,0)-t]||new Date(e).toLocaleDateString("en-us",{year:"numeric",month:"long",day:"numeric"})}(l.createdAt))),r.a.createElement("div",{className:"postDetails--details"},r.a.createElement(J,{id:a,user:t})),r.a.createElement(D.a,{isOpen:C,onRequestClose:function(){S(!1)},ariaHideApp:!1,contentLabel:"Like Modal",closeTimeoutMS:200,className:"modal"},r.a.createElement(U,{likes:f}))):r.a.createElement(T,null)},Z=a(25),W=function(e){var t=e.post;return r.a.createElement("div",{className:"post-container"},r.a.createElement("img",{src:t.photo,className:"post-container__image",alt:"My-Post",onClick:function(){return ne.push("/post/".concat(t.id))}}),r.a.createElement("div",{className:"post-container__details"},r.a.createElement("div",{className:"post-container__details--likes"},r.a.createElement(q.e,null),r.a.createElement("p",null,t.likes)),r.a.createElement("div",{className:"post-container__details--comments"},r.a.createElement(q.c,null),r.a.createElement("p",null,t.comments))))},z=function(e){var t=Object(o.g)().username,a=e.user.username!==t,c=Object(n.useState)(),s=Object(i.a)(c,2),u=s[0],m=s[1],p=Object(n.useState)(),f=Object(i.a)(p,2),E=f[0],b=f[1],w=Object(n.useState)(!1),g=Object(i.a)(w,2),N=g[0],k=g[1],y=Object(n.useState)([]),_=Object(i.a)(y,2),O=_[0],x=_[1],j=function(){k(!0)},C=function(){var e=Object(h.a)(v.a.mark((function e(t){var a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.followersCount+1,m(Object(Z.a)({},u,{followedByMe:!0,followersCount:a})),e.prev=2,n="/api/v1/users/".concat(t,"/follow"),e.next=6,d()({url:n,method:"GET"});case 6:r=e.sent,l.b.success(r.data.message,{autoClose:5e3,pauseOnHover:!1}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),l.b.success(e.t0.response.data.error.message,{autoClose:5e3,pauseOnHover:!1});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(h.a)(v.a.mark((function e(t){var a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.followersCount-1,m(Object(Z.a)({},u,{followedByMe:!1,followersCount:a})),e.prev=2,n="/api/v1/users/".concat(t,"/unfollow"),e.next=6,d()({url:n,method:"GET"});case 6:r=e.sent,l.b.success(r.data.message,{autoClose:5e3,pauseOnHover:!1}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),l.b.success(e.t0.response.data.error.message,{autoClose:5e3,pauseOnHover:!1});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(h.a)(v.a.mark((function e(){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a="/api/v1/users/user/".concat(t),e.next=4,d()({url:a,method:"GET"});case 4:n=e.sent,m(n.data.data.user),b(n.data.data.posts),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(h.a)(v.a.mark((function e(){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a="/api/v1/users/".concat(t,"/follows"),e.next=4,d()({url:a,method:"GET"});case 4:n=e.sent,x(n.data.data.user.follows),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(h.a)(v.a.mark((function e(){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a="/api/v1/users/".concat(t,"/followers"),e.next=4,d()({url:a,method:"GET"});case 4:n=e.sent,x(n.data.data.followers),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){P()}),[]),u&&E?r.a.createElement("div",{className:"user-page"},r.a.createElement("div",{className:"user-info"},r.a.createElement("div",{className:"user-profile"},r.a.createElement("img",{src:u.photo,alt:"".concat(u.username,"'s profile")}),r.a.createElement("p",{className:"user-profile__name"},u.name),r.a.createElement("p",{className:"user-profile__username"},u.username)),r.a.createElement("div",{className:"user-meta"},r.a.createElement("div",{className:"user-stats"},r.a.createElement("div",{className:"user-stats--posts"},r.a.createElement("h3",null,u.postsCount),r.a.createElement("p",null,"Posts")),r.a.createElement("div",{className:"user-stats--followers",onClick:function(){F(),j()}},r.a.createElement("h3",null,u.followersCount),r.a.createElement("p",null,"Followers")),r.a.createElement("div",{className:"user-stats--follows",onClick:function(){U(),j()}},r.a.createElement("h3",null,u.followCount),r.a.createElement("p",null,"Follows"))),!!a&&(u.followedByMe?r.a.createElement("button",{className:"user-following-button",onClick:function(){return S(u.username)}},"Following"):r.a.createElement("button",{className:"user-follow-button",onClick:function(){return C(u.username)}},"Follow")))),E.length?r.a.createElement("div",{className:"user-posts"},E.map((function(e){return r.a.createElement(W,{post:e,key:e._id})}))):r.a.createElement(B,{message:"No posts yet."}),!a&&r.a.createElement("div",{className:"cta-buttons"},r.a.createElement("button",{className:"newPost-button",onClick:function(){return ne.push("/post/create")},title:"Create New Post"},r.a.createElement(q.f,null)),r.a.createElement("button",{className:"editMe-button",onClick:function(){return ne.push("/update")},title:"Edit Details"},r.a.createElement(q.d,null))),r.a.createElement(D.a,{isOpen:N,onRequestClose:function(){k(!1),x([])},ariaHideApp:!1,contentLabel:"Like Modal",closeTimeoutMS:200,className:"modal"},O.map((function(e){return r.a.createElement(I,{user:e.follows.name?e.follows:e.user,key:e._id})})))):r.a.createElement(T,null)},K=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(!1),o=Object(i.a)(s,2),u=o[0],m=o[1],p=function(){var e=Object(h.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),t.preventDefault(),(a=new FormData).append("photo",document.getElementById("photo_field").files[0]),a.append("caption",document.getElementById("caption_field").value),e.prev=5,e.next=8,d()({url:"/api/v1/posts/create",method:"POST",data:a});case 8:l.b.success("New post created! Redirecting..",{autoClose:2e3}),setTimeout((function(){ne.push("/")}),2e3),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),m(!1),l.b.error("Error: ".concat(e.t0.response.data.data.error.message));case 16:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"login-page"},r.a.createElement("div",{className:"login-form-container"},r.a.createElement("h2",null,"New Post"),r.a.createElement("form",{onSubmit:p,className:"login-form"},r.a.createElement("input",{type:"text",name:"caption",placeholder:"Caption",id:"caption_field"}),r.a.createElement("input",{type:"file",name:"photo",accept:"image/*",required:!0,placeholder:"Photo",id:"photo_field",onChange:function(){return c(!0)}}),r.a.createElement("label",{htmlFor:"photo_field",className:"upload-post-label"},a?r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,null),r.a.createElement("p",null,"Uploaded!")):r.a.createElement(r.a.Fragment,null,r.a.createElement(j.b,null),r.a.createElement("p",null,"Add Image"))),r.a.createElement("button",{type:"submit",className:"login-form__submit",disabled:u},u?r.a.createElement(H,null):r.a.createElement("p",null,"Submit")))))},Q=a(40),X=function(e){var t=e.user,a=Object(n.useState)(""),c=Object(i.a)(a,2),s=c[0],o=c[1],u=Object(n.useState)(!1),m=Object(i.a)(u,2),p=m[0],f=m[1],E=function(){var e=Object(h.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),f(!0),(a=new FormData).append("photo",document.getElementById("photo_field").files[0]),a.append("username",document.getElementById("username_field").value),a.append("email",document.getElementById("email_field").value),a.append("name",document.getElementById("name_field").value),e.prev=7,e.next=10,d()({url:"/api/v1/users/updateMe",method:"PATCH",data:a});case 10:f(!1),l.b.success("User details updated!",{autoClose:2e3}),setTimeout((function(){window.location.reload(!0)}),2e3),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(7),f(!1),l.b.error("Error: ".concat(e.t0.response.data.data.error.message));case 19:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(h.a)(v.a.mark((function e(t){var a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),f(!0),a=document.getElementById("oldPassword_field").value,n=document.getElementById("newPassword_field").value,r=document.getElementById("passwordConfirm_field").value,e.prev=5,e.next=8,d()({url:"/api/v1/users/updatePassword",method:"PATCH",data:{oldPassword:a,newPassword:n,confirmPassword:r}});case 8:l.b.success("Password successfully updated!",{autoClose:2e3}),setTimeout((function(){window.location.reload(!0)}),2e3),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),f(!1),l.b.error("Error: ".concat(e.t0.response.data.data.error.message));case 16:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"login-page"},r.a.createElement("div",{className:"login-form-container"},r.a.createElement("h2",null,"Update Profile"),r.a.createElement("form",{onSubmit:E,className:"login-form"},r.a.createElement("div",{className:"edit-image"},r.a.createElement("p",null,s),r.a.createElement("img",{src:t.photo,alt:"".concat(t.name,"'s profile")}),r.a.createElement("label",{htmlFor:"photo_field",className:"upload-profile-label",title:"Change Profile Picture"},r.a.createElement(Q.a,null))),r.a.createElement("label",{className:"edit-user-label"},"Username"),r.a.createElement("input",{type:"text",name:"username",required:!0,placeholder:"Username",id:"username_field",defaultValue:t.username,className:"edit-user-input"}),r.a.createElement("label",{className:"edit-user-label"},"Name"),r.a.createElement("input",{type:"text",name:"name",required:!0,placeholder:"Name",id:"name_field",defaultValue:t.name,className:"edit-user-input"}),r.a.createElement("label",{className:"edit-user-label"},"Email"),r.a.createElement("input",{type:"email",name:"email",required:!0,placeholder:"Email Address",id:"email_field",defaultValue:t.email,className:"edit-user-input"}),r.a.createElement("input",{type:"file",name:"photo",accept:"image/*",placeholder:"Photo",id:"photo_field",onChange:function(){return o("New profile uploaded!")}}),r.a.createElement("button",{type:"submit",className:"login-form__submit",disabled:p},p?r.a.createElement(H,null):r.a.createElement("p",null,"Submit"))))),r.a.createElement("div",{className:"login-page",style:{marginTop:"-80px"}},r.a.createElement("div",{className:"login-form-container"},r.a.createElement("h2",null,"ChangePassword"),r.a.createElement("form",{onSubmit:b,className:"login-form"},r.a.createElement("label",{className:"edit-user-label"},"Current Password"),r.a.createElement("input",{type:"password",name:"oldPassword",placeholder:"********",id:"oldPassword_field",required:!0,className:"edit-user-input"}),r.a.createElement("label",{className:"edit-user-label"},"New Password"),r.a.createElement("input",{type:"Password",name:"newPassword",placeholder:"********",id:"newPassword_field",required:!0,className:"edit-user-input"}),r.a.createElement("label",{className:"edit-user-label"},"Confirm Password"),r.a.createElement("input",{type:"password",name:"passwordConfirm",placeholder:"********",id:"passwordConfirm_field",required:!0,className:"edit-user-input"}),r.a.createElement("button",{type:"submit",className:"login-form__submit"},p?r.a.createElement(H,null):r.a.createElement("p",null,"Update"))))))},$=a(43),ee=a(42),te=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(!1),l=Object(i.a)(s,2),o=l[0],u=l[1],m=Object(n.useState)(""),p=Object(i.a)(m,2),f=p[0],E=p[1],b=function(){var e=Object(h.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"/api/v1/users/search",e.next=4,d()({url:"/api/v1/users/search",method:"POST",data:{search:t}});case 4:a=e.sent,c(a.data.data.users),u(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),400===e.t0.response.status?c(["1"]):c([]),u(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),w=Object($.a)(b,800),g=function(){var e=Object(h.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),u(!0),c(["1"]),E(t.target.value),e.next=6,w(t.target.value);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"searchUsers"},r.a.createElement("h3",null,"Search Users"),r.a.createElement("div",{className:"searchUser-bar"},r.a.createElement("div",{className:"searchUser-bar__icon"},r.a.createElement(ee.a,null)),r.a.createElement("input",{name:"search",onChange:g,autoComplete:"off",className:"searchUser-bar__input",placeholder:"Search Users"})),r.a.createElement("div",{className:"searchUsers-results"},!!f&&(a.length?o?r.a.createElement("div",{className:"search-loader"}):a.map((function(e){return r.a.createElement(I,{user:e,key:e._id})})):r.a.createElement("div",{className:"search-not-found"},r.a.createElement(C.a,null),r.a.createElement("p",null,"No users found.")))))},ae=function(){return r.a.createElement("div",{className:"page-404"},r.a.createElement("div",{className:"page-404-content"},r.a.createElement("h3",null,"Page Not Found"),r.a.createElement("div",{className:"content"},r.a.createElement("h2",null,"404 Error"),r.a.createElement("p",null,"This page does not seem to exist :("),r.a.createElement("button",{onClick:function(){return ne.push("/")}},"Home"))))},ne=Object(u.a)(),re=function(e){return r.a.createElement(o.c,{history:ne},r.a.createElement(o.d,null,r.a.createElement(x,{path:"/login",component:A}),r.a.createElement(x,{path:"/signup",component:R}),r.a.createElement(_,{path:"/",component:G,exact:!0}),r.a.createElement(_,{path:"/post/create",component:K,exact:!0}),r.a.createElement(_,{path:"/post/:postId",component:Y,exact:!0}),r.a.createElement(_,{path:"/update",component:X,exact:!0}),r.a.createElement(_,{path:"/searchUsers",component:te,exact:!0}),r.a.createElement(_,{path:"/user/:username",component:z,exact:!0}),r.a.createElement(o.b,{path:"/",component:ae})))},ce=(a(82),r.a.createElement("div",null,r.a.createElement(l.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),r.a.createElement(re,null)));s.a.render(ce,document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.3ec2313f.chunk.js.map