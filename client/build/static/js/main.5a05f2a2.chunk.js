(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{102:function(e,t,a){},103:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(22),s=a.n(c),o=a(11),l=a(24),i=a(62),u=a(8),m={loading:!0,user:!1},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_AUTH_TOKEN":return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case"PUT_TOKEN":return Object(u.a)(Object(u.a)({},e),{},{user:t.user,loading:!1});case"USER_NOT_FOUND":return Object(u.a)(Object(u.a)({},e),{},{user:!1,loading:!1});default:return e}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_TRENDING":return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case"PUT_TRENDING":return Object(u.a)(Object(u.a)({},e),{},{posts:t.posts,loading:!1});default:return e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_TIMELINE":return Object(u.a)(Object(u.a)({},e),{},{loading:!0,end:!1});case"PUT_TIMELINE":return Object(u.a)(Object(u.a)({},e),{},{posts:t.posts,loading:!1,page:1,end:!1});case"PUT_TIMELINE_ON_CHANGE":return Object(u.a)(Object(u.a)({},e),{},{posts:t.posts});case"PUT_TIMELINE_SCROLL":var a=e.posts.concat(t.posts),n=e.page+1;return Object(u.a)(Object(u.a)({},e),{},{posts:a,page:n,end:!1});case"END_OF_TIMELINE":return Object(u.a)(Object(u.a)({},e),{},{end:!0});case"CLEAR_TIMELINE":return Object(u.a)(Object(u.a)({},e),{},{posts:[],loading:!1,end:!1});default:return e}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_NOTIFICATIONS":return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case"CHECK_NOTIFICATIONS":return Object(u.a)({},e);case"PUT_NOTIFICATIONS":return Object(u.a)(Object(u.a)({},e),{},{notifications:t.notifications,loading:!1});default:return e}},v=a(3),b=a.n(v),h=a(14),g=a(5),N=a.n(g);function O(){return N.a.get("/api/v1/users/isLoggedIn")}function _(){return N.a.get("/api/v1/posts/feed")}function y(){return N.a.get("/api/v1/posts/trending")}function j(){return N.a.get("/api/v1/users/notifications")}var w=b.a.mark(P),k=b.a.mark(F),T=b.a.mark(H),x=b.a.mark(L),C=b.a.mark(B),I=b.a.mark(U),S=b.a.mark(D);function P(){var e;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(h.b)(O);case 3:return e=t.sent,t.next=6,Object(h.c)({type:"PUT_TOKEN",user:e.data.data.user});case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(h.c)({type:"USER_NOT_FOUND"});case 12:case"end":return t.stop()}}),w,null,[[0,8]])}function F(){var e;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(h.b)(_);case 3:return e=t.sent,t.next=6,Object(h.c)({type:"PUT_TIMELINE",posts:e.data.data.posts});case 6:t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),k,null,[[0,8]])}function H(e){var t;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(h.b)((function(){return t=e.page,N.a.get("/api/v1/posts/feed?page=".concat(t));var t}));case 3:if(!(t=a.sent).data.data.posts.length){a.next=9;break}return a.next=7,Object(h.c)({type:"PUT_TIMELINE_SCROLL",posts:t.data.data.posts});case 7:a.next=11;break;case 9:return a.next=11,Object(h.c)({type:"END_OF_TIMELINE"});case 11:a.next=15;break;case 13:a.prev=13,a.t0=a.catch(0);case 15:case"end":return a.stop()}}),T,null,[[0,13]])}function L(){var e;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(h.b)(y);case 3:return e=t.sent,t.next=6,Object(h.c)({type:"PUT_TRENDING",posts:e.data.data.posts});case 6:t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),x,null,[[0,8]])}function B(){var e;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(h.b)(j);case 3:return e=t.sent,t.next=6,Object(h.c)({type:"PUT_NOTIFICATIONS",notifications:e.data.data.notifications});case 6:t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),C,null,[[0,8]])}function U(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.d)("FETCH_AUTH_TOKEN",P);case 2:return e.next=4,Object(h.d)("FETCH_TIMELINE",F);case 4:return e.next=6,Object(h.d)("FETCH_TIMELINE_SCROLLING",H);case 6:return e.next=8,Object(h.d)("FETCH_TRENDING",L);case 8:return e.next=10,Object(h.d)("FETCH_NOTIFICATIONS",B);case 10:return e.next=12,Object(h.d)("CHECK_NOTIFICATIONS",B);case 12:case"end":return e.stop()}}),I)}function D(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.a)([U()]);case 2:case"end":return e.stop()}}),S)}var M=Object(i.a)(),A=l.d,G=Object(l.e)(Object(l.c)({auth:p,trending:d,timeline:f,notifications:E}),A(Object(l.a)(M)));M.run(D);var R=a(12),q=(a(90),a(13)),K=a(19),z=a(36),J=function(e){return r.a.createElement("div",{className:"layout"},e.children)},V=a(7),Z=a(17),W=a(25),Y=Object(o.b)((function(e){return{user:e.auth.user,loading:e.auth.loading,notifications:e.notifications.notifications,notificationsLoading:e.notifications.loading}}),(function(e){return{logoutUser:function(){return e({type:"USER_NOT_FOUND"})},clearTimeline:function(){return e({type:"CLEAR_TIMELINE"})}}}))((function(e){var t=e.user,a=e.logoutUser,n=e.clearTimeline,c=e.notifications,s=e.notificationsLoading,o=function(){var e=Object(V.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/v1/users/logout",e.prev=1,e.next=4,N()({url:"/api/v1/users/logout",method:"GET"});case 4:R.b.success("Logged out successfully!",{autoClose:2e3,pauseOnHover:!1}),a(),n(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),R.b.error("Error logging out. Please try again later.");case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),l=function(e){var t=e.user;return r.a.createElement("div",{className:"header-toast"},r.a.createElement("p",null,t.username.toUpperCase()),r.a.createElement("button",{className:"header-toast-logout",onClick:o},"Logout"),r.a.createElement("button",{onClick:function(){return Ae.push("/user/".concat(t.username))}},"My Profile"))},i=!!c&&(!s&&!c[0].read);return r.a.createElement("header",null,r.a.createElement("nav",{className:"header"},r.a.createElement("div",{className:"header-content"},r.a.createElement("div",{className:"header-logo"},r.a.createElement(Z.a,{to:"/"},"Finstagram")),r.a.createElement("ul",{className:"header-navLinks"},r.a.createElement("li",{className:"bell-icon"},i&&r.a.createElement("div",{className:"notif-red-dot"}),r.a.createElement(Z.a,{to:"/notifications"},r.a.createElement(W.a,null))),r.a.createElement("li",{className:"discover-icon"},r.a.createElement(Z.a,{to:"/trending"},r.a.createElement(W.b,null))),r.a.createElement("li",null,r.a.createElement("img",{src:t.photo,alt:"".concat(t.username,"'s profile"),className:"header-profile",onClick:function(){return Object(R.b)(r.a.createElement(l,{user:t}),{autoClose:1e4})}}))))))})),Q=Object(o.b)((function(e){return{user:e.auth.user,loading:e.auth.loading}}),null)((function(e){var t=e.component,a=e.user,n=e.loading,c=Object(z.a)(e,["component","user","loading"]);return r.a.createElement(q.b,Object.assign({},c,{component:function(e){return!n&&a?r.a.createElement(r.a.Fragment,null,r.a.createElement(Y,null),r.a.createElement(J,null,r.a.createElement(t,Object.assign({},e,{user:a})))):r.a.createElement(q.a,{to:"/login"})}}))})),X=Object(o.b)((function(e){return{user:e.auth.user,loading:e.auth.loading}}),null)((function(e){var t=e.component,a=e.user,n=e.loading,c=Object(z.a)(e,["component","user","loading"]);return r.a.createElement(q.b,Object.assign({},c,{component:function(e){return a||n?r.a.createElement(q.a,{to:"/"}):r.a.createElement(J,null,r.a.createElement(t,e))}}))})),$=a(58),ee=a(27),te=a(6),ae=function(e){var t=e.user;return r.a.createElement("div",{className:"discover__userCard",onClick:function(){return Ae.push("/user/".concat(t.username))}},r.a.createElement("img",{src:t.photo,alt:"User profile"}),r.a.createElement("h3",null,t.username),r.a.createElement("p",null,t.name))},ne=function(e){var t=e.message,a=Object(n.useState)([]),c=Object(te.a)(a,2),s=c[0],o=c[1],l=function(){var e=Object(V.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"/api/v1/users/random",e.next=4,N()({url:"/api/v1/users/random",method:"GET"});case 4:t=e.sent,o(t.data.data.users),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"not-found-container"},r.a.createElement("div",{className:"not-found__icon"},r.a.createElement(W.c,null)),r.a.createElement("h2",{className:"not-found__message"},t),r.a.createElement("button",{className:"discover__button",onClick:l},"Find People"),!!s.length&&r.a.createElement("div",{className:"discover__users"},s.map((function(e){return r.a.createElement(ae,{user:e,key:e.id})}))))},re=function(){return r.a.createElement("div",{id:"wrapper"},r.a.createElement("div",{className:"profile-main-loader"},r.a.createElement("div",{className:"loader"},r.a.createElement("svg",{className:"circular-loader",viewBox:"25 25 50 50"},r.a.createElement("circle",{className:"loader-path",cx:"50",cy:"50",r:"20",fill:"none",strokeWidth:"2"})))))},ce=a(26),se=a(28),oe=a.n(se),le=function(){return r.a.createElement("div",{className:"loader"},r.a.createElement("div",{className:"loader__outer"}),r.a.createElement("div",{className:"loader__inner"}))},ie=function(e){var t=e.user;return r.a.createElement("div",{className:"like-modal__item"},r.a.createElement("div",{className:"like-modal__item--profile"},r.a.createElement("img",{src:"".concat(t.photo),alt:"".concat(t.username,"'s profile")})),r.a.createElement("div",{className:"like-modal__item--names"},r.a.createElement("p",{className:"like-modal__item--username",onClick:function(){return Ae.push("/user/".concat(t.username))}},t.username),r.a.createElement("p",{className:"like-modal__item--name"},t.name)))},ue=function(e){var t=e.likes;return r.a.createElement("div",{className:"like-modal__list"},r.a.createElement("h3",null,"Liked By"),t.length?t.map((function(e){return r.a.createElement(ie,{user:e.likedBy,key:e._id})})):r.a.createElement("div",{className:"likesLoader"},r.a.createElement(le,null)))},me=a(15),pe=Object(o.b)((function(e){return{timelinePosts:e.timeline.posts,trendingPosts:e.trending.posts}}),(function(e){return{updateTimeline:function(t){return e({type:"PUT_TIMELINE_ON_CHANGE",posts:t})},updateTrending:function(t){return e({type:"PUT_TRENDING",posts:t})}}}))((function(e){var t=e.post,a=e.rank,c=e.timelinePosts,s=e.trendingPosts,o=e.updateTimeline,l=e.updateTrending,i=e.isNearby,u=Object(n.useState)(t.likedByMe),m=Object(te.a)(u,2),p=m[0],d=m[1],f=Object(n.useState)(1*t.likes),E=Object(te.a)(f,2),v=E[0],h=E[1],g=Object(n.useState)(!1),O=Object(te.a)(g,2),_=O[0],y=O[1],j=Object(n.useState)([]),w=Object(te.a)(j,2),k=w[0],T=w[1],x=Object(n.useState)(!1),C=Object(te.a)(x,2),I=C[0],S=C[1],P=Object(n.useState)(t.reputation||0),F=Object(te.a)(P,2),H=F[0],L=F[1],B=Object(n.useState)(t.reportedByMe),U=Object(te.a)(B,2),D=U[0],M=U[1],A=function(e,t,a){var n=Object(ce.a)(c),r=Object(ce.a)(s);n.forEach((function(n){n._id===e&&(n.likedByMe=a,n.likes=t)})),r.forEach((function(n){n._id===e&&(n.likedByMe=a,n.likes=t)})),o(n),l(r)},G=function(){var e=Object(V.a)(b.a.mark((function e(){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/api/v1/posts/".concat(t._id,"/likedBy"),e.prev=1,e.next=4,N()({url:a,method:"GET"});case 4:n=e.sent,T(n.data.data.likers),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(V.a)(b.a.mark((function e(){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),setTimeout((function(){S(!1)}),800),a="/api/v1/posts/".concat(t._id,"/like"),e.prev=3,e.next=6,N()({url:a,method:"GET"});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),d(!p);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(V.a)(b.a.mark((function e(){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/api/v1/posts/".concat(t._id,"/unlike"),e.prev=1,e.next=4,N()({url:a,method:"GET"});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),d(!p);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(V.a)(b.a.mark((function e(){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=p,d(!p),T([]),!a){e.next=10;break}return h(v-1),A(t._id,v-1,!a),e.next=8,q();case 8:e.next=14;break;case 10:return h(v+1),A(t._id,v+1,!a),e.next=14,R();case 14:return e.next=16,G();case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(V.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!D){e.next=15;break}return L(H+1),M(!1),"/api/v1/posts/utils/unReport",e.prev=4,e.next=7,N()({url:"/api/v1/posts/utils/unReport",method:"POST",data:{post:t._id}});case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(4),L(H-1),M(!0);case 13:e.next=27;break;case 15:return"/api/v1/posts/utils/report",L(H-1),M(!0),e.prev=18,e.next=21,N()({url:"/api/v1/posts/utils/report",method:"POST",data:{post:t._id,status:"spam"}});case 21:e.next=27;break;case 23:e.prev=23,e.t1=e.catch(18),L(H+1),M(!1);case 27:case"end":return e.stop()}}),e,null,[[4,9],[18,23]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){G()}),[]),!!t._id&&r.a.createElement("div",{className:"postCard"},r.a.createElement("div",{className:"postCard__userInfo"},r.a.createElement("img",{src:t.createdBy.photo,alt:"".concat(t.createdBy.username,"'s profile")}),r.a.createElement("div",{className:"postCard__userInfo-meta"},r.a.createElement("p",{className:"postCard__userInfo-username",onClick:function(){return Ae.push("/user/".concat(t.createdBy.username))}},t.createdBy.username),!!t.locationName&&r.a.createElement("div",{className:"postCard__location"},r.a.createElement(Z.a,{to:"/post/nearby/".concat(t.location.coordinates[0],",").concat(t.location.coordinates[1])},r.a.createElement("p",null,t.locationName)))),i&&r.a.createElement("div",{className:"postCard__downvote"},r.a.createElement(me.a,{onClick:z,color:D?"#f44336":""}),r.a.createElement("p",null,H))),!!a&&r.a.createElement("div",{className:"postCard__trending"},r.a.createElement("p",null,"# ",a," on trending")),r.a.createElement("div",{className:"postCard__image"},r.a.createElement("img",{src:t.photo,alt:"".concat(t.createdBy.username,"'s post"),onDoubleClick:K}),!!I&&r.a.createElement(me.c,{className:"postCase__image-like",id:"post-like-icon"})),r.a.createElement("div",{className:"postCard__meta"},r.a.createElement("div",{className:"postCard__meta--icons"},p?r.a.createElement(me.c,{style:{color:"#b71c1c"},onClick:K}):r.a.createElement(me.f,{onClick:K}),r.a.createElement(Z.a,{to:"/post/".concat(t._id)},r.a.createElement(me.d,null)))),!!v&&r.a.createElement("p",{onClick:function(){y(!0)},className:"postCard__likes"},"".concat(v," ").concat(1===v?"like":"likes")),r.a.createElement("div",{className:"postCard__caption"},r.a.createElement("p",{className:"postCard__caption--username",onClick:function(){return Ae.push("/user/".concat(t.createdBy.username))}},t.createdBy.username),r.a.createElement("p",{className:"postCard__caption--body"},t.caption)),!!t.comments&&r.a.createElement(Z.a,{to:"/post/".concat(t._id),className:"postCard__comments"},r.a.createElement("p",null,"View ".concat(t.comments," ").concat(1===t.comments?"comment":"comments"))),r.a.createElement("p",{className:"postCard__date"},function(e){var t=new Date(e).setHours(0,0,0,0);return{0:"Today",864e5:"Yesterday"}[new Date(Date.now()).setHours(0,0,0,0)-t]||new Date(e).toLocaleDateString("en-us",{year:"numeric",month:"long",day:"numeric"})}(t.createdAt)),r.a.createElement(oe.a,{isOpen:_,onRequestClose:function(){y(!1)},ariaHideApp:!1,contentLabel:"Like Modal",closeTimeoutMS:200,className:"modal"},r.a.createElement(ue,{likes:k})))})),de=r.a.createElement("div",{className:"timeline-end"},r.a.createElement("p",null,"--x--")),fe=r.a.createElement("div",{className:"timeline-loader"}),Ee=Object(o.b)((function(e){return{posts:e.timeline.posts,loading:e.timeline.loading,page:Number(e.timeline.page),end:e.timeline.end}}),(function(e,t){return{fetchScrollingTimeline:function(t){return e({type:"FETCH_TIMELINE_SCROLLING",page:t})}}}))((function(e){var t=e.posts,a=e.loading,n=e.page,c=e.end,s=e.fetchScrollingTimeline;return r.a.createElement("div",{className:"my-timeline"},a?r.a.createElement(re,null):t.length?r.a.createElement($.a,{dataLength:t.length,next:function(){return s(n+1)},hasMore:!c,endMessage:de,loader:fe},t.map((function(e){return r.a.createElement(pe,{post:e,key:e.id})}))):r.a.createElement("div",{className:"no-posts"},r.a.createElement(ne,{message:"No posts found. Please follow users to view a timeline."})),r.a.createElement("div",{className:"cta-buttons"},r.a.createElement("button",{className:"searchUsers-button",onClick:function(){return Ae.push("/searchUsers")},title:"Search Users"},r.a.createElement(ee.c,null))))})),ve=Object(o.b)((function(e){return{posts:e.trending.posts,loading:e.trending.loading}}),null)((function(e){var t=e.posts,a=e.loading;return r.a.createElement("div",{className:"my-timeline"},r.a.createElement("div",{className:"trendingPage__heading"},r.a.createElement("h3",null,"Trending On Finstagram"),r.a.createElement("p",null,"Highest growing posts from around the world!")),a?r.a.createElement(re,null):t.length?t.map((function(e,t){return r.a.createElement(pe,{post:e,rank:t+1,key:e._id})})):r.a.createElement("div",{className:"no-posts"},r.a.createElement(ne,{message:"Nothing Here."})),r.a.createElement("div",{className:"cta-buttons"},r.a.createElement("button",{className:"searchUsers-button",onClick:function(){return Ae.push("/searchUsers")},title:"Search Users"},r.a.createElement(ee.c,null))))})),be=a(37),he=a.n(be),ge=function(e){var t=Object(q.g)().center,a=Object(n.useState)([]),c=Object(te.a)(a,2),s=c[0],o=c[1],l=Object(n.useState)(!0),i=Object(te.a)(l,2),u=i[0],m=i[1],p=Object(n.useState)(""),d=Object(te.a)(p,2),f=d[0],E=d[1],v=t.split(","),h=Object(te.a)(v,2),g=h[0],O=h[1],_=function(){var e=Object(V.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,t="/api/v1/posts/near?lat=".concat(O,"&lng=").concat(g),e.next=5,N.a.get(t);case 5:a=e.sent,o(a.data.data.posts),E(a.data.data.location.name),m(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),o([]),m(!1);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){_(),he.a.accessToken="pk.eyJ1Ijoic21hbmFuMyIsImEiOiJja2FqcHNqZmMwY3k0MnRtbmUyaTA3c3k0In0.7AdKPQUF4xS4_WlTI1eO6Q";var e=new he.a.Map({container:"map-container",style:"mapbox://styles/mapbox/streets-v11",center:[1*g,1*O],zoom:13});({type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[1*g,1*O]},properties:{title:"Mapbox",description:f}}]}).features.forEach((function(t){var a=document.createElement("div");a.className="marker",new he.a.Marker(a).setLngLat(t.geometry.coordinates).addTo(e)}))}),[]),r.a.createElement("div",{className:"my-timeline"},r.a.createElement("div",{className:"nearby-posts__heading",id:"map-container"}),u?r.a.createElement(re,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"location-name"},r.a.createElement("p",null,f)),s.length?s.map((function(e,t){return r.a.createElement(pe,{post:e,key:e._id,isNearby:!0})})):r.a.createElement("div",{className:"no-posts"},r.a.createElement(ne,{message:"Nothing Here."}))))},Ne=Object(o.b)(null,(function(e){return{putToken:function(t){return e({type:"PUT_TOKEN",user:t})},fetchTimeline:function(){return e({type:"FETCH_TIMELINE"})},fetchTrending:function(){return e({type:"FETCH_TRENDING"})},fetchNotifications:function(){return e({type:"FETCH_NOTIFICATIONS"})}}}))((function(e){var t=e.putToken,a=e.fetchTimeline,c=e.fetchTrending,s=e.fetchNotifications,o=Object(n.useState)(!1),l=Object(te.a)(o,2),i=l[0],u=l[1],m=function(){var e=Object(V.a)(b.a.mark((function e(n){var r,o,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),u(!0),r=document.getElementById("username_field").value,o=document.getElementById("password_field").value,e.prev=4,e.next=7,N()({url:"/api/v1/users/login",method:"POST",data:{username:r,password:o}});case 7:l=e.sent,R.b.success("Logged in successfully!",{autoClose:2e3}),t(l.data.data.user),a(),c(),s(),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(4),u(!1),R.b.error("Error: ".concat(e.t0.response.data.data.error.message));case 19:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"login-page"},r.a.createElement("div",{className:"login-form-container"},r.a.createElement("h2",null,"Finstagram"),r.a.createElement("form",{onSubmit:m,className:"login-form"},r.a.createElement("input",{type:"text",name:"username",required:!0,placeholder:"username",id:"username_field"}),r.a.createElement("input",{type:"password",name:"password",placeholder:"********",id:"password_field",required:!0}),r.a.createElement("button",{type:"submit",className:"login-form__submit",disabled:i},i?r.a.createElement(le,null):r.a.createElement("p",null,"Submit"))),r.a.createElement("p",null,"No account? ",r.a.createElement(Z.a,{to:"/signup"},"Sign up"))))})),Oe=Object(o.b)(null,(function(e){return{putToken:function(t){return e({type:"PUT_TOKEN",user:t})},fetchTimeline:function(){return e({type:"FETCH_TIMELINE"})},fetchTrending:function(){return e({type:"FETCH_TRENDING"})},fetchNotifications:function(){return e({type:"FETCH_NOTIFICATIONS"})}}}))((function(e){var t=e.putToken,a=e.fetchTimeline,c=e.fetchTrending,s=e.fetchNotifications,o=Object(n.useState)(!1),l=Object(te.a)(o,2),i=l[0],u=l[1],m=function(){var e=Object(V.a)(b.a.mark((function e(n){var r,o,l,i,m,p;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),u(!0),r=document.getElementById("username_field").value,o=document.getElementById("name_field").value,l=document.getElementById("email_field").value,i=document.getElementById("password_field").value,m=document.getElementById("passwordConfirm_field").value,e.prev=7,e.next=10,N()({url:"/api/v1/users/signup",method:"POST",data:{username:r,name:o,email:l,password:i,passwordConfirm:m}});case 10:p=e.sent,R.b.success("New account created!",{autoClose:2e3}),t(p.data.data.user),a(),c(),s(),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(7),u(!1),R.b.error("Error: ".concat(e.t0.response.data.data.error.message));case 22:case"end":return e.stop()}}),e,null,[[7,18]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"login-page"},r.a.createElement("div",{className:"login-form-container"},r.a.createElement("h2",null,"Finstagram"),r.a.createElement("form",{onSubmit:m,class:"login-form"},r.a.createElement("input",{type:"text",name:"username",required:!0,placeholder:"Username",id:"username_field"}),r.a.createElement("input",{type:"text",name:"name",required:!0,placeholder:"Name",id:"name_field"}),r.a.createElement("input",{type:"email",name:"email",required:!0,placeholder:"Email Address",id:"email_field"}),r.a.createElement("input",{type:"password",name:"password",placeholder:"********",id:"password_field",required:!0}),r.a.createElement("input",{type:"password",name:"passwordConfirm",placeholder:"********",id:"passwordConfirm_field",required:!0}),r.a.createElement("button",{type:"submit",className:"login-form__submit",disabled:i},i?r.a.createElement(le,null):r.a.createElement("p",null,"Submit")))))})),_e=function(e){var t=e.comment,a=e.user,n=e.removeComment,c=a.id===t.createdBy.id;return r.a.createElement("div",{className:"comment"},r.a.createElement("div",{className:"comment--meta"},r.a.createElement("img",{src:t.createdBy.photo,alt:"".concat(t.createdBy.username,"'s profile")}),r.a.createElement("p",{className:"comment--username",onClick:function(){return Ae.push("/user/".concat(t.createdBy.username))}},t.createdBy.username),r.a.createElement("p",{className:"comment--body"},t.body)),!!c&&r.a.createElement("div",{className:"comment--delete"},r.a.createElement(me.b,{onClick:function(){return n(t._id)},title:"Delete Comment"})))},ye=Object(o.b)((function(e){return{timelinePosts:e.timeline.posts}}),(function(e){return{updateTimeline:function(t){return e({type:"PUT_TIMELINE_ON_CHANGE",posts:t})}}}))((function(e){var t=e.id,a=e.user,c=e.timelinePosts,s=e.updateTimeline,o=Object(n.useState)([]),l=Object(te.a)(o,2),i=l[0],u=l[1],m=function(e,t){var a=Object(ce.a)(c);a.forEach((function(a){a._id===e&&(a.comments=t)})),s(a)},p=function(){var e=Object(V.a)(b.a.mark((function e(a){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,N()({url:"/api/v1/posts/".concat(t,"/comments"),method:"POST",data:{comment:document.getElementById("comment-field").value}});case 4:n=e.sent,document.getElementById("comment-field").value="",r=i.concat([n.data.data.comment]),u(r),m(t,r.length),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(V.a)(b.a.mark((function e(a){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N()({url:"/api/v1/posts/".concat(t,"/comment/").concat(a),method:"DELETE"});case 3:n=i.filter((function(e){return e._id!==a})),u(n),m(t,n.length),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){(function(){var e=Object(V.a)(b.a.mark((function e(){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N()({url:"/api/v1/posts/".concat(t,"/comments"),method:"GET"});case 3:a=e.sent,u(a.data.data.comments),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement("div",{className:"commentArray"},r.a.createElement("h3",null,"Comments"),r.a.createElement("div",{className:"commentsArray-list"},i.map((function(e){return r.a.createElement(_e,{comment:e,key:e._id,user:a,removeComment:d})}))),r.a.createElement("div",{className:"createComment-form"},r.a.createElement("form",{onSubmit:p},r.a.createElement("input",{type:"text",name:"comment",required:!0,id:"comment-field",placeholder:"Add Comment"}),r.a.createElement("button",{type:"submit"},r.a.createElement(me.h,null)))))})),je=Object(o.b)((function(e){return{timelinePosts:e.timeline.posts,trendingPosts:e.trending.posts}}),(function(e){return{updateTimeline:function(t){return e({type:"PUT_TIMELINE_ON_CHANGE",posts:t})},updateTrending:function(t){return e({type:"PUT_TRENDING",posts:t})}}}))((function(e){var t=e.user,a=e.timelinePosts,c=e.trendingPosts,s=e.updateTimeline,o=e.updateTrending,l=Object(q.g)().postId,i=Object(n.useState)({}),u=Object(te.a)(i,2),m=u[0],p=u[1],d=Object(n.useState)(),f=Object(te.a)(d,2),E=f[0],v=f[1],h=Object(n.useState)(m.likedByMe),g=Object(te.a)(h,2),O=g[0],_=g[1],y=Object(n.useState)(1*m.likes),j=Object(te.a)(y,2),w=j[0],k=j[1],T=Object(n.useState)(!1),x=Object(te.a)(T,2),C=x[0],I=x[1],S=function(){var e=Object(V.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N()({url:"/api/v1/posts/one/".concat(l),method:"GET"});case 3:t=e.sent,a=t.data.results.post,p(a),_(a.likedByMe),k(1*a.likes),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(V.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/api/v1/posts/".concat(l,"/likedBy"),e.prev=1,e.next=4,N()({url:t,method:"GET"});case 4:a=e.sent,v(a.data.data.likers),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(V.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/api/v1/posts/".concat(l,"/like"),e.prev=1,e.next=4,N()({url:t,method:"GET"});case 4:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),_(!O);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(V.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/api/v1/posts/".concat(l,"/unlike"),e.prev=1,e.next=4,N()({url:t,method:"GET"});case 4:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),_(!O);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),L=function(e,t,n){console.log("yay");var r=Object(ce.a)(a),l=Object(ce.a)(c);r.forEach((function(a){a._id===e&&(a.likedByMe=n,a.likes=t)})),l.forEach((function(a){a._id===e&&(a.likedByMe=n,a.likes=t)})),s(r),o(l)},B=function(){var e=Object(V.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=O,_(!O),v([]),!t){e.next=10;break}return k(w-1),L(m._id,w-1,!t),e.next=8,H();case 8:e.next=14;break;case 10:return k(w+1),L(m._id,w+1,!t),e.next=14,F();case 14:return e.next=16,P();case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){S(),P()}),[]),m.id?r.a.createElement("div",{className:"postDetails"},r.a.createElement("div",{className:"postDetails--info"},r.a.createElement("div",{className:"postDetails--meta"},r.a.createElement("img",{src:m.createdBy.photo,alt:"".concat(m.createdBy.username,"'s profile")}),r.a.createElement("p",{className:"postDetails--username",onClick:function(){return Ae.push("/user/".concat(m.createdBy.username))}},m.createdBy.username)),r.a.createElement("div",{className:"postDetails--image"},r.a.createElement("img",{src:m.photo,alt:"".concat(m.createdBy.username,"'s post"),onDoubleClick:B})),r.a.createElement("div",{className:"postDetails__likes"},O?r.a.createElement(me.c,{style:{color:"#b71c1c"},onClick:B}):r.a.createElement(me.f,{onClick:B}),!!w&&r.a.createElement("p",{onClick:function(){I(!0)},className:"postDetails__likes--count"},"".concat(w," ").concat(1===w?"like":"likes"))),r.a.createElement("div",{className:"postCard__caption"},r.a.createElement("p",{className:"postCard__caption--username",onClick:function(){return Ae.push("/user/".concat(m.createdBy.username))}},m.createdBy.username),r.a.createElement("p",{className:"postCard__caption--body"},m.caption)),r.a.createElement("p",{className:"postCard__date"},function(e){var t=new Date(e).setHours(0,0,0,0);return{0:"Today",864e5:"Yesterday"}[new Date(Date.now()).setHours(0,0,0,0)-t]||new Date(e).toLocaleDateString("en-us",{year:"numeric",month:"long",day:"numeric"})}(m.createdAt))),r.a.createElement("div",{className:"postDetails--details"},r.a.createElement(ye,{id:l,user:t})),r.a.createElement(oe.a,{isOpen:C,onRequestClose:function(){I(!1)},ariaHideApp:!1,contentLabel:"Like Modal",closeTimeoutMS:200,className:"modal"},r.a.createElement(ue,{likes:E}))):r.a.createElement(re,null)})),we=function(e){var t=e.post;return r.a.createElement("div",{className:"post-container"},r.a.createElement("img",{src:t.photo,className:"post-container__image",alt:"My-Post",onClick:function(){return Ae.push("/post/".concat(t.id))}}),r.a.createElement("div",{className:"post-container__details"},r.a.createElement("div",{className:"post-container__details--likes"},r.a.createElement(me.f,null),r.a.createElement("p",null,t.likes)),r.a.createElement("div",{className:"post-container__details--comments"},r.a.createElement(me.d,null),r.a.createElement("p",null,t.comments))))},ke=Object(o.b)(null,(function(e){return{fetchTimeline:function(){return e({type:"FETCH_TIMELINE"})}}}))((function(e){var t=Object(q.g)().username,a=e.user.username!==t,c=Object(n.useState)(),s=Object(te.a)(c,2),o=s[0],l=s[1],i=Object(n.useState)(),m=Object(te.a)(i,2),p=m[0],d=m[1],f=Object(n.useState)(!1),E=Object(te.a)(f,2),v=E[0],h=E[1],g=Object(n.useState)([]),O=Object(te.a)(g,2),_=O[0],y=O[1],j=Object(n.useState)([]),w=Object(te.a)(j,2),k=w[0],T=w[1],x=Object(n.useState)([]),C=Object(te.a)(x,2),I=C[0],S=C[1],P=function(){h(!0)},F=function(){var t=Object(V.a)(b.a.mark((function t(a){var n,r,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.followersCount+1,l(Object(u.a)(Object(u.a)({},o),{},{followedByMe:!0,followersCount:n})),t.prev=2,r="/api/v1/users/".concat(a,"/follow"),t.next=6,N()({url:r,method:"GET"});case 6:c=t.sent,e.fetchTimeline(),R.b.success(c.data.message,{autoClose:5e3,pauseOnHover:!1}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),console.log(t.t0),R.b.success(t.t0.response.data.error.message,{autoClose:5e3,pauseOnHover:!1});case 15:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}(),H=function(){var t=Object(V.a)(b.a.mark((function t(a){var n,r,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.followersCount-1,l(Object(u.a)(Object(u.a)({},o),{},{followedByMe:!1,followersCount:n})),t.prev=2,r="/api/v1/users/".concat(a,"/unfollow"),t.next=6,N()({url:r,method:"GET"});case 6:c=t.sent,e.fetchTimeline(),R.b.success(c.data.message,{autoClose:5e3,pauseOnHover:!1}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),console.log(t.t0.response),R.b.success(t.t0.response.data.error.message,{autoClose:5e3,pauseOnHover:!1});case 15:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}(),L=function(){var e=Object(V.a)(b.a.mark((function e(){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a="/api/v1/users/user/".concat(t),e.next=4,N()({url:a,method:"GET"});case 4:n=e.sent,l(n.data.data.user),d(n.data.data.posts),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(V.a)(b.a.mark((function e(){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a="/api/v1/users/".concat(t,"/follows"),e.next=4,N()({url:a,method:"GET"});case 4:n=e.sent,S(n.data.data.user.follows),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(V.a)(b.a.mark((function e(){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a="/api/v1/users/".concat(t,"/followers"),e.next=4,N()({url:a,method:"GET"});case 4:n=e.sent,T(n.data.data.followers),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){L(),U(),B()}),[]),o&&p?r.a.createElement("div",{className:"user-page"},r.a.createElement("div",{className:"user-info"},r.a.createElement("div",{className:"user-profile"},r.a.createElement("img",{src:o.photo,alt:"".concat(o.username,"'s profile")}),r.a.createElement("p",{className:"user-profile__name"},o.name),r.a.createElement("p",{className:"user-profile__username"},o.username)),r.a.createElement("div",{className:"user-meta"},r.a.createElement("div",{className:"user-stats"},r.a.createElement("div",{className:"user-stats--posts"},r.a.createElement("h3",null,o.postsCount),r.a.createElement("p",null,"Posts")),r.a.createElement("div",{className:"user-stats--followers",onClick:o.followersCount?function(){y(k),P()}:null},r.a.createElement("h3",null,o.followersCount),r.a.createElement("p",null,"Followers")),r.a.createElement("div",{className:"user-stats--follows",onClick:o.followCount?function(){y(I),P()}:null},r.a.createElement("h3",null,o.followCount),r.a.createElement("p",null,"Follows"))),!!a&&(o.followedByMe?r.a.createElement("button",{className:"user-following-button",onClick:function(){return H(o.username)}},"Following"):r.a.createElement("button",{className:"user-follow-button",onClick:function(){return F(o.username)}},"Follow")))),p.length?r.a.createElement("div",{className:"user-posts"},p.map((function(e){return r.a.createElement(we,{post:e,key:e._id})}))):r.a.createElement(ne,{message:"No posts yet."}),!a&&r.a.createElement("div",{className:"cta-buttons"},r.a.createElement("button",{className:"newPost-button",onClick:function(){return Ae.push("/post/create")},title:"Create New Post"},r.a.createElement(me.g,null)),r.a.createElement("button",{className:"editMe-button",onClick:function(){return Ae.push("/update")},title:"Edit Details"},r.a.createElement(me.e,null))),r.a.createElement(oe.a,{isOpen:v,onRequestClose:function(){h(!1),y([])},ariaHideApp:!1,contentLabel:"Like Modal",closeTimeoutMS:200,className:"modal"},r.a.createElement("div",{className:"like-modal__list"},_.map((function(e){return r.a.createElement(ie,{user:e.follows.name?e.follows:e.user,key:e._id})}))))):r.a.createElement(re,null)})),Te=a(35),xe=function(){var e=Object(V.a)(b.a.mark((function e(t){var a,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,5,a="https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(t),".json?access_token=pk.eyJ1Ijoic21hbmFuMyIsImEiOiJja2QycnZ4ZzExZzBoMnVwNHIwd2MxNm9xIn0.2ciILybPF6jxSZpP6D6Kcw&limit=").concat(5),e.next=5,N.a.get(a);case 5:return n=e.sent,r=[],n.data.features.forEach((function(e){var t={name:e.place_name,longitude:e.center[0],latitude:e.center[1]};r.push(t)})),e.abrupt("return",r);case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),Ce={},Ie=Object(o.b)(null,(function(e){return{fetchPosts:function(){return e({type:"FETCH_TIMELINE"})}}}))((function(e){var t=e.fetchPosts,a=Object(n.useState)(!1),c=Object(te.a)(a,2),s=c[0],o=c[1],l=Object(n.useState)(!1),i=Object(te.a)(l,2),u=i[0],m=i[1],p=Object(n.useState)([]),d=Object(te.a)(p,2),f=d[0],E=d[1],v=Object(n.useState)(!1),h=Object(te.a)(v,2),g=h[0],O=h[1],_=Object(n.useState)(!0),y=Object(te.a)(_,2),j=y[0],w=y[1],k=function(e){var t=e.locations;return r.a.createElement("div",{className:"locationSearch-results"},t.map((function(e){return r.a.createElement("div",{className:"searchLocation",key:e.name,onClick:function(){return function(e){document.getElementById("location_field").value=e.name,w(!0),O(!0),Ce={locationName:e.name,latitude:e.latitude,longitude:e.longitude}}(e)}},r.a.createElement("p",null,e.name))})))},T=function(){var e=Object(V.a)(b.a.mark((function e(a){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),a.preventDefault(),(n=new FormData).append("photo",document.getElementById("photo_field").files[0]),n.append("caption",document.getElementById("caption_field").value),j&&Ce.hasOwnProperty("locationName")&&(n.append("locationName",Ce.locationName),n.append("latitude",Ce.latitude),n.append("longitude",Ce.longitude)),e.prev=6,e.next=9,N()({url:"/api/v1/posts/create",method:"POST",data:n});case 9:e.sent,R.b.success("New post created! Redirecting..",{autoClose:2e3}),t(),setTimeout((function(){Ae.push("/")}),2e3),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(6),m(!1),R.b.error("Error: ".concat(e.t0.response.data.data.error.message));case 19:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t){return e.apply(this,arguments)}}(),x=Object(Te.a)(xe,500),C=function(){var e=Object(V.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),w(!1),!t.target.value){e.next=17;break}return O(!0),t.persist(),e.prev=5,e.next=8,x(t.target.value);case 8:a=e.sent,t.target.value&&E(a),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(5);case 14:O(!1),e.next=20;break;case 17:E([]),w(!0),Ce={};case 20:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"login-page"},r.a.createElement("div",{className:"login-form-container"},r.a.createElement("h2",null,"New Post"),r.a.createElement("form",{onSubmit:T,className:"login-form"},r.a.createElement("input",{type:"text",name:"caption",placeholder:"Caption",id:"caption_field"}),r.a.createElement("input",{type:"text",name:"location",placeholder:"Location",id:"location_field",autoComplete:"off",onChange:C}),r.a.createElement("input",{type:"file",name:"photo",accept:"image/*",required:!0,placeholder:"Photo",id:"photo_field",onChange:function(){return o(!0)}}),r.a.createElement("div",{className:"searchResults"},!g&&!!f.length&&r.a.createElement(k,{locations:f})),!j&&r.a.createElement("p",null,"*Please only select a valid location. Invalid locations will be rejected."),r.a.createElement("label",{htmlFor:"photo_field",className:"upload-post-label"},s?r.a.createElement(r.a.Fragment,null,r.a.createElement(ee.a,null),r.a.createElement("p",null,"Uploaded!")):r.a.createElement(r.a.Fragment,null,r.a.createElement(ee.b,null),r.a.createElement("p",null,"Add Image"))),r.a.createElement("button",{type:"submit",className:"login-form__submit",disabled:u},u?r.a.createElement(le,null):r.a.createElement("p",null,"Submit")))))})),Se=a(60),Pe=function(e){var t=e.user,a=Object(n.useState)(""),c=Object(te.a)(a,2),s=c[0],o=c[1],l=Object(n.useState)(!1),i=Object(te.a)(l,2),u=i[0],m=i[1],p=function(){var e=Object(V.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),m(!0),(a=new FormData).append("photo",document.getElementById("photo_field").files[0]),a.append("username",document.getElementById("username_field").value),a.append("email",document.getElementById("email_field").value),a.append("name",document.getElementById("name_field").value),e.prev=7,e.next=10,N()({url:"/api/v1/users/updateMe",method:"PATCH",data:a});case 10:m(!1),R.b.success("User details updated!",{autoClose:2e3}),setTimeout((function(){window.location.reload(!0)}),2e3),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(7),m(!1),R.b.error("Error: ".concat(e.t0.response.data.data.error.message));case 19:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(V.a)(b.a.mark((function e(t){var a,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),m(!0),a=document.getElementById("oldPassword_field").value,n=document.getElementById("newPassword_field").value,r=document.getElementById("passwordConfirm_field").value,e.prev=5,e.next=8,N()({url:"/api/v1/users/updatePassword",method:"PATCH",data:{oldPassword:a,newPassword:n,confirmPassword:r}});case 8:R.b.success("Password successfully updated!",{autoClose:2e3}),setTimeout((function(){window.location.reload(!0)}),2e3),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),m(!1),R.b.error("Error: ".concat(e.t0.response.data.data.error.message));case 16:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"login-page"},r.a.createElement("div",{className:"login-form-container"},r.a.createElement("h2",null,"Update Profile"),r.a.createElement("form",{onSubmit:p,className:"login-form"},r.a.createElement("div",{className:"edit-image"},r.a.createElement("p",null,s),r.a.createElement("img",{src:t.photo,alt:"".concat(t.name,"'s profile")}),r.a.createElement("label",{htmlFor:"photo_field",className:"upload-profile-label",title:"Change Profile Picture"},r.a.createElement(Se.a,null))),r.a.createElement("label",{className:"edit-user-label"},"Username"),r.a.createElement("input",{type:"text",name:"username",required:!0,placeholder:"Username",id:"username_field",defaultValue:t.username,className:"edit-user-input"}),r.a.createElement("label",{className:"edit-user-label"},"Name"),r.a.createElement("input",{type:"text",name:"name",required:!0,placeholder:"Name",id:"name_field",defaultValue:t.name,className:"edit-user-input"}),r.a.createElement("label",{className:"edit-user-label"},"Email"),r.a.createElement("input",{type:"email",name:"email",required:!0,placeholder:"Email Address",id:"email_field",defaultValue:t.email,className:"edit-user-input"}),r.a.createElement("input",{type:"file",name:"photo",accept:"image/*",placeholder:"Photo",id:"photo_field",onChange:function(){return o("New profile uploaded!")}}),r.a.createElement("button",{type:"submit",className:"login-form__submit",disabled:u},u?r.a.createElement(le,null):r.a.createElement("p",null,"Submit"))))),r.a.createElement("div",{className:"login-page",style:{marginTop:"-80px"}},r.a.createElement("div",{className:"login-form-container"},r.a.createElement("h2",null,"ChangePassword"),r.a.createElement("form",{onSubmit:d,className:"login-form"},r.a.createElement("label",{className:"edit-user-label"},"Current Password"),r.a.createElement("input",{type:"password",name:"oldPassword",placeholder:"********",id:"oldPassword_field",required:!0,className:"edit-user-input"}),r.a.createElement("label",{className:"edit-user-label"},"New Password"),r.a.createElement("input",{type:"Password",name:"newPassword",placeholder:"********",id:"newPassword_field",required:!0,className:"edit-user-input"}),r.a.createElement("label",{className:"edit-user-label"},"Confirm Password"),r.a.createElement("input",{type:"password",name:"passwordConfirm",placeholder:"********",id:"passwordConfirm_field",required:!0,className:"edit-user-input"}),r.a.createElement("button",{type:"submit",className:"login-form__submit"},u?r.a.createElement(le,null):r.a.createElement("p",null,"Update"))))))},Fe=a(61),He=function(){var e=Object(n.useState)([]),t=Object(te.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(!1),o=Object(te.a)(s,2),l=o[0],i=o[1],u=Object(n.useState)(""),m=Object(te.a)(u,2),p=m[0],d=m[1],f=function(){var e=Object(V.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"/api/v1/users/search",e.next=4,N()({url:"/api/v1/users/search",method:"POST",data:{search:t}});case 4:a=e.sent,c(a.data.data.users),i(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),400===e.t0.response.status?c(["1"]):c([]),i(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),E=Object(Te.a)(f,800),v=function(){var e=Object(V.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),i(!0),c(["1"]),d(t.target.value),e.next=6,E(t.target.value);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"searchUsers"},r.a.createElement("h3",null,"Search Users"),r.a.createElement("div",{className:"searchUser-bar"},r.a.createElement("div",{className:"searchUser-bar__icon"},r.a.createElement(Fe.a,null)),r.a.createElement("input",{name:"search",onChange:v,autoComplete:"off",className:"searchUser-bar__input",placeholder:"Search Users"})),r.a.createElement("div",{className:"searchUsers-results"},!!p&&(a.length?l?r.a.createElement("div",{className:"search-loader"}):a.map((function(e){return r.a.createElement(ie,{user:e,key:e._id})})):r.a.createElement("div",{className:"search-not-found"},r.a.createElement(W.c,null),r.a.createElement("p",null,"No users found.")))))},Le=function(){return r.a.createElement("div",{className:"page-404"},r.a.createElement("div",{className:"page-404-content"},r.a.createElement("h3",null,"Page Not Found"),r.a.createElement("div",{className:"content"},r.a.createElement("h2",null,"404 Error"),r.a.createElement("p",null,"This page does not seem to exist :("),r.a.createElement("button",{onClick:function(){return Ae.push("/")}},"Home"))))},Be=a(38),Ue=function(){return r.a.createElement("div",{className:"my-welcome-notif"},r.a.createElement("p",{className:"my-welcome-notif-heading"},"Welcome to the Finstagram family! We can't wait to see what you do here!"," ",r.a.createElement("br",null),"This is an open source project, please show some love by starring or forking this repository.",r.a.createElement("br",null),"Happy Browsing!"),r.a.createElement("div",{className:"my-welcome-notif-gh-buttons"},r.a.createElement(Be.a,{href:"https://github.com/elit-altum/Finstagram-The-Instagram-Clone","data-icon":"octicon-star","data-size":"large","data-show-count":"true","aria-label":"Star elit-altum/Finstagram-The-Instagram-Clone on GitHub"},"Star"),r.a.createElement(Be.a,{href:"https://github.com/elit-altum/Finstagram-The-Instagram-Clone/fork","data-icon":"octicon-repo-forked","data-size":"large","data-show-count":"true","aria-label":"Fork elit-altum/Finstagram-The-Instagram-Clone on GitHub"},"Fork"),r.a.createElement(Be.a,{href:"https://github.com/elit-altum","data-size":"large","aria-label":"Follow @elit-altum on GitHub"},"Follow @elit-altum")))},De=function(e){var t=e.notif;return r.a.createElement("div",{className:"my-notif",onClick:function(){return Ae.push(t.link)}},r.a.createElement("div",{className:"my-notif-details"},r.a.createElement("img",{className:"my-notif-image",src:t.photo}),r.a.createElement("div",{className:"my-notif-text"},r.a.createElement("p",{className:"my-notif-heading"},t.message),r.a.createElement("p",{className:"my-notif-date"},function(e){var t=new Date(e).setHours(0,0,0,0);return{0:"Today",864e5:"Yesterday"}[new Date(Date.now()).setHours(0,0,0,0)-t]||new Date(e).toLocaleDateString("en-us",{year:"numeric",month:"long",day:"numeric"})}(t.createdAt)))),t.post&&r.a.createElement("img",{className:"my-notif-post",src:t.post}))},Me=Object(o.b)((function(e){return{notifs:e.notifications.notifications,loading:e.notifications.loading}}),null)((function(e){var t=e.loading,a=e.notifs;return Object(n.useEffect)((function(){(function(){var e=Object(V.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,"/api/v1/users/notifications/read",e.next=6,N()({url:"/api/v1/users/notifications/read",method:"POST",data:{date:a[0].createdAt}});case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}})()()})),r.a.createElement("div",{class:"notifs-page"},t?r.a.createElement(re,null):r.a.createElement("div",{className:"my-notifs"},r.a.createElement(Ue,null),a.map((function(e,t){return r.a.createElement(De,{notif:e,index:t+1})}))))})),Ae=Object(K.a)(),Ge=Object(o.b)((function(e){return{user:e.auth.user,loading:e.auth.loading}}),(function(e){return{isLoggedIn:function(){return e({type:"FETCH_AUTH_TOKEN"})},fetchTimeline:function(){return e({type:"FETCH_TIMELINE"})},fetchTrending:function(){return e({type:"FETCH_TRENDING"})},fetchNotifications:function(){return e({type:"FETCH_NOTIFICATIONS"})},checkNotifications:function(){return e({type:"CHECK_NOTIFICATIONS"})}}}))((function(e){return Object(n.useEffect)((function(){e.isLoggedIn(),e.fetchTimeline(),e.fetchTrending(),e.fetchNotifications(),setInterval((function(){e.checkNotifications()}),5e3)}),[]),e.loading?r.a.createElement(re,null):r.a.createElement(q.c,{history:Ae},r.a.createElement(q.d,null,r.a.createElement(X,{path:"/login",component:Ne}),r.a.createElement(X,{path:"/signup",component:Oe}),r.a.createElement(Q,{path:"/",component:Ee,exact:!0}),r.a.createElement(Q,{path:"/trending",component:ve,exact:!0}),r.a.createElement(Q,{path:"/post/create",component:Ie,exact:!0}),r.a.createElement(Q,{path:"/post/:postId",component:je,exact:!0}),r.a.createElement(Q,{path:"/post/nearby/:center",component:ge,exact:!0}),r.a.createElement(Q,{path:"/update",component:Pe,exact:!0}),r.a.createElement(Q,{path:"/searchUsers",component:He,exact:!0}),r.a.createElement(Q,{path:"/user/:username",component:ke,exact:!0}),r.a.createElement(Q,{path:"/notifications",component:Me,exact:!0}),r.a.createElement(q.b,{path:"/",component:Le})))})),Re=(a(102),r.a.createElement(o.a,{store:G},r.a.createElement(R.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),r.a.createElement(Ge,null)));s.a.render(Re,document.getElementById("root"))},63:function(e,t,a){e.exports=a(103)}},[[63,1,2]]]);
//# sourceMappingURL=main.5a05f2a2.chunk.js.map