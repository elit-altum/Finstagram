{"version":3,"sources":["reducers/authReducer.js","reducers/trendingReducer.js","reducers/timelineReducer.js","sagas/api/index.js","sagas/index.js","store/index.js","components/Layout.js","components/Header.js","router/PrivateRoute.js","router/PublicRoute.js","components/NotFound.js","components/PageLoader.js","components/Loader.js","components/likesArray.js","components/Post.js","components/Timeline.js","components/TrendingPage.js","components/NearbyPosts.js","components/Login.js","components/Signup.js","components/Comment.js","components/Comments.js","components/PostDetails.js","components/UserProfile.js","utils/geoCode.js","components/CreatePost.js","components/EditUserProfile.js","components/SearchUsers.js","components/PageNotFound.js","router/router.js","actions/index.js","index.js"],"names":["initialState","loading","user","reducer","state","action","type","posts","end","page","newPosts","concat","newPage","isLoggedIn","axios","get","getTimeline","getTrending","fetchAuthToken","fetchTimeline","fetchTimelineScrolling","fetchTrending","actionWatcher","rootSaga","call","api","res","put","data","length","takeLatest","all","sagaMiddleware","createSagaMiddleware","composeEnhancers","compose","store","createStore","combineReducers","auth","authReducer","trending","trendingReducer","timeline","timelineReducer","applyMiddleware","run","mySaga","Layout","props","className","children","connect","dispatch","logoutUser","clearTimeline","logout","a","url","method","toast","success","autoClose","pauseOnHover","error","Msg","username","toUpperCase","onClick","history","push","to","src","photo","alt","Component","component","rest","UserCard","name","NotFound","message","useState","randomUsers","setRandomUsers","fetchRandomUsers","users","map","key","id","viewBox","cx","cy","r","fill","strokeWidth","UserInfoSmall","LikesArray","likes","like","likedBy","_id","Loader","timelinePosts","trendingPosts","updateTimeline","newTimeline","updateTrending","newTrending","post","rank","likedByMe","isLiked","setIsLiked","setLikes","isLikeModalOpen","setIsLikeModalOpen","allLikes","setAllLikes","showLikeIcon","setShowLikeIcon","updateStore","postId","likesCount","forEach","fetchLikes","likers","createLike","setTimeout","removeLike","handleLike","likedCopy","useEffect","createdBy","locationName","location","coordinates","onDoubleClick","style","color","caption","comments","date","givenDate","Date","setHours","0","86400000","now","toLocaleDateString","year","month","day","getTime","createdAt","isOpen","onRequestClose","ariaHideApp","contentLabel","closeTimeoutMS","endOfPosts","loadingPosts","Number","ownProps","fetchScrollingTimeline","PageLoader","dataLength","next","hasMore","endMessage","loader","title","index","NearbyPosts","center","useParams","setPosts","setLoading","setLocationName","split","lng","lat","fetchPosts","mapboxgl","accessToken","Map","container","zoom","features","geometry","properties","description","marker","el","document","createElement","Marker","setLngLat","addTo","putToken","isLoading","setIsLoading","sendFormData","e","preventDefault","getElementById","value","password","response","onSubmit","required","placeholder","disabled","email","passwordConfirm","class","Comment","comment","removeComment","isUser","body","setComments","commentsCount","createComment","newArray","commentId","filter","fetchComments","setPost","fetchPost","results","console","log","Post","notMe","setUser","isModalOpen","setIsModalOpen","usersArray","setUsersArray","followersArray","setFollowersArray","followingArray","setFollowingArray","openModal","followUser","newFollowersCount","followersCount","followedByMe","unfollowUser","fetchUser","fetchFollows","follows","fetchFollowers","followers","postsCount","followCount","geoCode","keyword","encodeURIComponent","locationData","newLocationObject","place_name","longitude","latitude","globalLocation","uploaded","setUploaded","locations","setLocations","locationLoading","setLocationLoading","isValidLocation","setIsValidLocation","SearchResults","selectLocation","form","FormData","append","files","hasOwnProperty","asyncFunctionDebounced","AwesomeDebouncePromise","searchLocation","target","persist","mapBoxLocations","autoComplete","onChange","accept","htmlFor","EditUserProfile","uploadedText","setUploadedText","sendUpdateData","window","reload","sendPasswordData","oldPassword","newPassword","confirmPassword","defaultValue","marginTop","SearchUsers","setUsers","text","setText","asyncFunction","search","status","handleTextChange","PageNotFound","createBrowserHistory","PublicRoute","path","LoginForm","SignupForm","Timeline","exact","Trending","CreatePost","PostDetail","UserProfile","jsx","position","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","ReactDOM","render"],"mappings":"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","file":"static/js/main.b7e101c9.chunk.js","sourcesContent":["const initialState = {\r\n\tloading: true,\r\n\tuser: false,\r\n};\r\n\r\nconst reducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase \"FETCH_AUTH_TOKEN\":\r\n\t\t\treturn { ...state, loading: true };\r\n\t\tcase \"PUT_TOKEN\":\r\n\t\t\treturn { ...state, user: action.user, loading: false };\r\n\t\tcase \"USER_NOT_FOUND\":\r\n\t\t\treturn { ...state, user: false, loading: false };\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n\r\nexport default reducer;\r\n","const reducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase \"FETCH_TRENDING\":\r\n\t\t\treturn { ...state, loading: true };\r\n\t\tcase \"PUT_TRENDING\":\r\n\t\t\treturn { ...state, posts: action.posts, loading: false };\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n\r\nexport default reducer;\r\n","const reducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase \"FETCH_TIMELINE\":\r\n\t\t\treturn { ...state, loading: true, end: false };\r\n\t\tcase \"PUT_TIMELINE\":\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tposts: action.posts,\r\n\t\t\t\tloading: false,\r\n\t\t\t\tpage: 1,\r\n\t\t\t\tend: false,\r\n\t\t\t};\r\n\t\tcase \"PUT_TIMELINE_ON_CHANGE\":\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tposts: action.posts,\r\n\t\t\t};\r\n\t\tcase \"PUT_TIMELINE_SCROLL\":\r\n\t\t\tconst newPosts = state.posts.concat(action.posts);\r\n\t\t\tconst newPage = state.page + 1;\r\n\t\t\treturn { ...state, posts: newPosts, page: newPage, end: false };\r\n\t\tcase \"END_OF_TIMELINE\":\r\n\t\t\treturn { ...state, end: true };\r\n\t\tcase \"CLEAR_TIMELINE\":\r\n\t\t\treturn { ...state, posts: [], loading: false, end: false };\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n\r\nexport default reducer;\r\n","import axios from \"axios\";\r\n\r\n// ? 01. CHECK IF USER IS AUTHENTICATED\r\nexport function isLoggedIn() {\r\n\treturn axios.get(\"/api/v1/users/isLoggedIn\");\r\n}\r\n\r\n// ? 02. FETCH TIMELINE OF USER\r\nexport function getTimeline() {\r\n\treturn axios.get(\"/api/v1/posts/feed\");\r\n}\r\n\r\n// ? 03. FETCH TIMELINE PAGES OF USER\r\nexport function getTimelinePages(page) {\r\n\treturn axios.get(`/api/v1/posts/feed?page=${page}`);\r\n}\r\n\r\n// ? 04. FETCH TRENDING POSTS\r\nexport function getTrending() {\r\n\treturn axios.get(\"/api/v1/posts/trending\");\r\n}\r\n","import { put, takeLatest, all, call } from \"redux-saga/effects\";\r\nimport * as api from \"./api\";\r\n\r\n// ? 01. GET USER TOKEN\r\nfunction* fetchAuthToken() {\r\n\ttry {\r\n\t\tconst res = yield call(api.isLoggedIn);\r\n\t\tyield put({ type: \"PUT_TOKEN\", user: res.data.data.user });\r\n\t} catch (e) {\r\n\t\tyield put({ type: \"USER_NOT_FOUND\" });\r\n\t}\r\n}\r\n\r\n// ? 02. GET USER TIMELINE\r\nfunction* fetchTimeline() {\r\n\ttry {\r\n\t\tconst res = yield call(api.getTimeline);\r\n\t\tyield put({ type: \"PUT_TIMELINE\", posts: res.data.data.posts });\r\n\t} catch (e) {}\r\n}\r\n\r\n// ? 03. GET USER TIMELINE\r\nfunction* fetchTimelineScrolling(state) {\r\n\ttry {\r\n\t\tconst res = yield call(() => api.getTimelinePages(state.page));\r\n\t\tif (res.data.data.posts.length) {\r\n\t\t\tyield put({ type: \"PUT_TIMELINE_SCROLL\", posts: res.data.data.posts });\r\n\t\t} else {\r\n\t\t\tyield put({ type: \"END_OF_TIMELINE\" });\r\n\t\t}\r\n\t} catch (e) {}\r\n}\r\n\r\n// ? 04. GET TRENDING POSTS\r\nfunction* fetchTrending() {\r\n\ttry {\r\n\t\tconst res = yield call(api.getTrending);\r\n\t\tyield put({ type: \"PUT_TRENDING\", posts: res.data.data.posts });\r\n\t} catch (e) {}\r\n}\r\n\r\nfunction* actionWatcher() {\r\n\tyield takeLatest(\"FETCH_AUTH_TOKEN\", fetchAuthToken);\r\n\tyield takeLatest(\"FETCH_TIMELINE\", fetchTimeline);\r\n\tyield takeLatest(\"FETCH_TIMELINE_SCROLLING\", fetchTimelineScrolling);\r\n\tyield takeLatest(\"FETCH_TRENDING\", fetchTrending);\r\n}\r\n\r\nexport default function* rootSaga() {\r\n\tyield all([actionWatcher()]);\r\n}\r\n","// Configuring redux and redux-saga for global state management\r\nimport { createStore, applyMiddleware, combineReducers, compose } from \"redux\";\r\nimport createSagaMiddleware from \"redux-saga\";\r\n\r\nimport authReducer from \"../reducers/authReducer\";\r\nimport trendingReducer from \"../reducers/trendingReducer\";\r\nimport timelineReducer from \"../reducers/timelineReducer\";\r\n\r\nimport mySaga from \"../sagas\";\r\n\r\n// Create the saga middleware\r\nconst sagaMiddleware = createSagaMiddleware();\r\n\r\nconst composeEnhancers =\r\n\tprocess.env.NODE_ENV === \"development\"\r\n\t\t? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\n\t\t: compose;\r\n\r\n// Mount it on the Store\r\nconst store = createStore(\r\n\tcombineReducers({\r\n\t\tauth: authReducer,\r\n\t\ttrending: trendingReducer,\r\n\t\ttimeline: timelineReducer,\r\n\t}),\r\n\tcomposeEnhancers(applyMiddleware(sagaMiddleware))\r\n);\r\n\r\nexport default store;\r\n\r\n// Run the saga\r\nsagaMiddleware.run(mySaga);\r\n","import React from \"react\";\r\n\r\nconst Layout = (props) => <div className=\"layout\">{props.children}</div>;\r\n\r\nexport default Layout;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { connect } from \"react-redux\";\r\nimport { FaRegCompass as CompassIcon } from \"react-icons/fa\";\r\n\r\nimport { history } from \"../router/router\";\r\n\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst Header = ({ user, logoutUser, clearTimeline }) => {\r\n\tconst logout = async () => {\r\n\t\tconst url = \"/api/v1/users/logout\";\r\n\t\ttry {\r\n\t\t\tawait axios({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t});\r\n\t\t\ttoast.success(\"Logged out successfully!\", {\r\n\t\t\t\tautoClose: 2000,\r\n\t\t\t\tpauseOnHover: false,\r\n\t\t\t});\r\n\t\t\tlogoutUser();\r\n\t\t\tclearTimeline();\r\n\t\t} catch (err) {\r\n\t\t\ttoast.error(\"Error logging out. Please try again later.\");\r\n\t\t}\r\n\t};\r\n\r\n\tconst Msg = ({ user }) => (\r\n\t\t<div className=\"header-toast\">\r\n\t\t\t<p>{user.username.toUpperCase()}</p>\r\n\t\t\t<button className=\"header-toast-logout\" onClick={logout}>\r\n\t\t\t\tLogout\r\n\t\t\t</button>\r\n\t\t\t<button onClick={() => history.push(`/user/${user.username}`)}>\r\n\t\t\t\tMy Profile\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t);\r\n\r\n\treturn (\r\n\t\t<header>\r\n\t\t\t<nav className=\"header\">\r\n\t\t\t\t<div className=\"header-content\">\r\n\t\t\t\t\t<div className=\"header-logo\">\r\n\t\t\t\t\t\t<Link to=\"/\">Finstagram</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<ul className=\"header-navLinks\">\r\n\t\t\t\t\t\t<li className=\"discover-icon\">\r\n\t\t\t\t\t\t\t<Link to=\"/trending\">\r\n\t\t\t\t\t\t\t\t<CompassIcon />\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\tsrc={user.photo}\r\n\t\t\t\t\t\t\t\talt={`${user.username}'s profile`}\r\n\t\t\t\t\t\t\t\tclassName=\"header-profile\"\r\n\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\ttoast(<Msg user={user} />, {\r\n\t\t\t\t\t\t\t\t\t\tautoClose: 10000,\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t</nav>\r\n\t\t</header>\r\n\t);\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\tlogoutUser: () => dispatch({ type: \"USER_NOT_FOUND\" }),\r\n\tclearTimeline: () => dispatch({ type: \"CLEAR_TIMELINE\" }),\r\n});\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tuser: state.auth.user,\r\n\tloading: state.auth.loading,\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Header);\r\n","import React from \"react\";\r\nimport { Redirect, Route } from \"react-router-dom\";\r\n\r\nimport { connect } from \"react-redux\";\r\n\r\nimport Layout from \"../components/Layout\";\r\nimport Header from \"../components/Header\";\r\n\r\nconst PrivateRoute = ({ component: Component, user, loading, ...rest }) => {\r\n\treturn (\r\n\t\t<Route\r\n\t\t\t{...rest}\r\n\t\t\tcomponent={(props) =>\r\n\t\t\t\t!loading && user ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Header />\r\n\t\t\t\t\t\t<Layout>\r\n\t\t\t\t\t\t\t<Component {...props} user={user} />\r\n\t\t\t\t\t\t</Layout>\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Redirect to=\"/login\" />\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tuser: state.auth.user,\r\n\tloading: state.auth.loading,\r\n});\r\n\r\nexport default connect(mapStateToProps, null)(PrivateRoute);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect, Route } from \"react-router-dom\";\r\n\r\nimport Layout from \"../components/Layout\";\r\n\r\nconst PrivateRoute = ({ component: Component, user, loading, ...rest }) => {\r\n\treturn (\r\n\t\t<Route\r\n\t\t\t{...rest}\r\n\t\t\tcomponent={(props) =>\r\n\t\t\t\t!user && !loading ? (\r\n\t\t\t\t\t<Layout>\r\n\t\t\t\t\t\t<Component {...props} />\r\n\t\t\t\t\t</Layout>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Redirect to=\"/\" />\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tuser: state.auth.user,\r\n\tloading: state.auth.loading,\r\n});\r\n\r\nexport default connect(mapStateToProps, null)(PrivateRoute);\r\n","import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { FaRegSadTear as SadIcon } from \"react-icons/fa\";\r\n\r\nimport { history } from \"../router/router\";\r\n\r\nconst UserCard = ({ user }) => {\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName=\"discover__userCard\"\r\n\t\t\tonClick={() => history.push(`/user/${user.username}`)}\r\n\t\t>\r\n\t\t\t<img src={user.photo} alt=\"User profile\" />\r\n\t\t\t<h3>{user.username}</h3>\r\n\t\t\t<p>{user.name}</p>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst NotFound = ({ message }) => {\r\n\tconst [randomUsers, setRandomUsers] = useState([]);\r\n\tconst fetchRandomUsers = async () => {\r\n\t\ttry {\r\n\t\t\tconst url = \"/api/v1/users/random\";\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t});\r\n\t\t\tsetRandomUsers(res.data.data.users);\r\n\t\t} catch (err) {}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"not-found-container\">\r\n\t\t\t<div className=\"not-found__icon\">\r\n\t\t\t\t<SadIcon />\r\n\t\t\t</div>\r\n\t\t\t<h2 className=\"not-found__message\">{message}</h2>\r\n\t\t\t<button className=\"discover__button\" onClick={fetchRandomUsers}>\r\n\t\t\t\tFind People\r\n\t\t\t</button>\r\n\t\t\t{!!randomUsers.length && (\r\n\t\t\t\t<div className=\"discover__users\">\r\n\t\t\t\t\t{randomUsers.map((user) => (\r\n\t\t\t\t\t\t<UserCard user={user} key={user.id} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default NotFound;\r\n","import React from \"react\";\r\n\r\nexport default () => {\r\n\treturn (\r\n\t\t<div id=\"wrapper\">\r\n\t\t\t<div className=\"profile-main-loader\">\r\n\t\t\t\t<div className=\"loader\">\r\n\t\t\t\t\t<svg className=\"circular-loader\" viewBox=\"25 25 50 50\">\r\n\t\t\t\t\t\t<circle\r\n\t\t\t\t\t\t\tclassName=\"loader-path\"\r\n\t\t\t\t\t\t\tcx=\"50\"\r\n\t\t\t\t\t\t\tcy=\"50\"\r\n\t\t\t\t\t\t\tr=\"20\"\r\n\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\tstrokeWidth=\"2\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React from \"react\";\r\n\r\nexport default () => {\r\n\treturn (\r\n\t\t<div className=\"loader\">\r\n\t\t\t<div className=\"loader__outer\"></div>\r\n\t\t\t<div className=\"loader__inner\"></div>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React from \"react\";\r\n\r\nimport { history } from \"../router/router\";\r\nimport Loader from \"./Loader\";\r\n\r\nexport const UserInfoSmall = ({ user }) => {\r\n\treturn (\r\n\t\t<div className=\"like-modal__item\">\r\n\t\t\t<div className=\"like-modal__item--profile\">\r\n\t\t\t\t<img src={`${user.photo}`} alt={`${user.username}'s profile`} />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"like-modal__item--names\">\r\n\t\t\t\t<p\r\n\t\t\t\t\tclassName=\"like-modal__item--username\"\r\n\t\t\t\t\tonClick={() => history.push(`/user/${user.username}`)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{user.username}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p className=\"like-modal__item--name\">{user.name}</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst LikesArray = ({ likes }) => (\r\n\t<div className=\"like-modal__list\">\r\n\t\t<h3>Liked By</h3>\r\n\t\t{!!likes.length ? (\r\n\t\t\tlikes.map((like) => <UserInfoSmall user={like.likedBy} key={like._id} />)\r\n\t\t) : (\r\n\t\t\t<div className=\"likesLoader\">\r\n\t\t\t\t<Loader />\r\n\t\t\t</div>\r\n\t\t)}\r\n\t</div>\r\n);\r\n\r\nexport default LikesArray;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport Modal from \"react-modal\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport LikesArray from \"./likesArray\";\r\n\r\nimport { history } from \"../router/router\";\r\n\r\nimport {\r\n\tAiOutlineHeart as HeartOutline,\r\n\tAiFillHeart as HeartFill,\r\n} from \"react-icons/ai\";\r\nimport { AiOutlineComment as CommentOutline } from \"react-icons/ai\";\r\n\r\nconst Post = ({\r\n\tpost,\r\n\trank,\r\n\ttimelinePosts,\r\n\ttrendingPosts,\r\n\tupdateTimeline,\r\n\tupdateTrending,\r\n}) => {\r\n\tconst [isLiked, setIsLiked] = useState(post.likedByMe);\r\n\tconst [likes, setLikes] = useState(post.likes * 1);\r\n\tconst [isLikeModalOpen, setIsLikeModalOpen] = useState(false);\r\n\tconst [allLikes, setAllLikes] = useState([]);\r\n\tconst [showLikeIcon, setShowLikeIcon] = useState(false);\r\n\r\n\t// a. Calculate time of post creation\r\n\tconst getTime = (date) => {\r\n\t\tconst givenDate = new Date(date).setHours(0, 0, 0, 0);\r\n\t\tconst today = new Date(Date.now()).setHours(0, 0, 0, 0);\r\n\r\n\t\tconst difference = today - givenDate;\r\n\r\n\t\tconst dateObj = {\r\n\t\t\t0: \"Today\",\r\n\t\t\t86400000: \"Yesterday\",\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\tdateObj[difference] ||\r\n\t\t\tnew Date(date).toLocaleDateString(\"en-us\", {\r\n\t\t\t\tyear: \"numeric\",\r\n\t\t\t\tmonth: \"long\",\r\n\t\t\t\tday: \"numeric\",\r\n\t\t\t})\r\n\t\t);\r\n\t};\r\n\r\n\t// b. Open Modal showing all likers\r\n\tconst openLikeModal = () => {\r\n\t\tsetIsLikeModalOpen(true);\r\n\t};\r\n\r\n\t// c. Close Modal showing all likers\r\n\tconst closeLikeModal = () => {\r\n\t\tsetIsLikeModalOpen(false);\r\n\t};\r\n\r\n\t// d. Update redux store when a post is liked/unliked\r\n\tconst updateStore = (postId, likesCount, likedByMe) => {\r\n\t\tconst newTimeline = [...timelinePosts];\r\n\t\tconst newTrending = [...trendingPosts];\r\n\r\n\t\t// 1. Update the likes count and likedByMe for timeline posts\r\n\t\tnewTimeline.forEach((post) => {\r\n\t\t\tif (post._id === postId) {\r\n\t\t\t\tpost.likedByMe = likedByMe;\r\n\t\t\t\tpost.likes = likesCount;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// 2. Update the likes count and likedByMe for trending posts\r\n\t\tnewTrending.forEach((post) => {\r\n\t\t\tif (post._id === postId) {\r\n\t\t\t\tpost.likedByMe = likedByMe;\r\n\t\t\t\tpost.likes = likesCount;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tupdateTimeline(newTimeline);\r\n\t\tupdateTrending(newTrending);\r\n\t};\r\n\r\n\t// e. Fetch all users who liked a post\r\n\tconst fetchLikes = async () => {\r\n\t\tconst url = `/api/v1/posts/${post._id}/likedBy`;\r\n\t\ttry {\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t});\r\n\t\t\tsetAllLikes(res.data.data.likers);\r\n\t\t} catch (err) {}\r\n\t};\r\n\r\n\t// f. Inform the database that user has liked the post\r\n\tconst createLike = async () => {\r\n\t\tsetShowLikeIcon(true);\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetShowLikeIcon(false);\r\n\t\t}, 800);\r\n\t\tconst url = `/api/v1/posts/${post._id}/like`;\r\n\t\ttry {\r\n\t\t\tawait axios({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t});\r\n\t\t} catch (err) {\r\n\t\t\tsetIsLiked(!isLiked);\r\n\t\t}\r\n\t};\r\n\r\n\t// g. Inform the database that user has unliked the post\r\n\tconst removeLike = async () => {\r\n\t\tconst url = `/api/v1/posts/${post._id}/unlike`;\r\n\t\ttry {\r\n\t\t\tawait axios({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t});\r\n\t\t} catch (err) {\r\n\t\t\tsetIsLiked(!isLiked);\r\n\t\t}\r\n\t};\r\n\r\n\t// h. Updates store and state using above func.\r\n\tconst handleLike = async () => {\r\n\t\tconst likedCopy = isLiked;\r\n\t\tsetIsLiked(!isLiked);\r\n\t\tsetAllLikes([]);\r\n\r\n\t\tif (likedCopy) {\r\n\t\t\tsetLikes(likes - 1);\r\n\t\t\tupdateStore(post._id, likes - 1, !likedCopy);\r\n\t\t\tawait removeLike();\r\n\t\t} else {\r\n\t\t\tsetLikes(likes + 1);\r\n\t\t\tupdateStore(post._id, likes + 1, !likedCopy);\r\n\t\t\tawait createLike();\r\n\t\t}\r\n\t\tawait fetchLikes();\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchLikes();\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t!!post._id && (\r\n\t\t\t<div className=\"postCard\">\r\n\t\t\t\t<div className=\"postCard__userInfo\">\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tsrc={post.createdBy.photo}\r\n\t\t\t\t\t\talt={`${post.createdBy.username}'s profile`}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<div className=\"postCard__userInfo-meta\">\r\n\t\t\t\t\t\t<p\r\n\t\t\t\t\t\t\tclassName=\"postCard__userInfo-username\"\r\n\t\t\t\t\t\t\tonClick={() => history.push(`/user/${post.createdBy.username}`)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{post.createdBy.username}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t{!!post.locationName && (\r\n\t\t\t\t\t\t\t<div className=\"postCard__location\">\r\n\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\tto={`/post/nearby/${post.location.coordinates[0]},${post.location.coordinates[1]}`}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<p>{post.locationName}</p>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{!!rank && (\r\n\t\t\t\t\t<div className=\"postCard__trending\">\r\n\t\t\t\t\t\t<p># {rank} on trending</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t\t<div className=\"postCard__image\">\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tsrc={post.photo}\r\n\t\t\t\t\t\talt={`${post.createdBy.username}'s post`}\r\n\t\t\t\t\t\tonDoubleClick={handleLike}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{!!showLikeIcon && (\r\n\t\t\t\t\t\t<HeartFill className=\"postCase__image-like\" id=\"post-like-icon\" />\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"postCard__meta\">\r\n\t\t\t\t\t<div className=\"postCard__meta--icons\">\r\n\t\t\t\t\t\t{isLiked ? (\r\n\t\t\t\t\t\t\t<HeartFill style={{ color: \"#b71c1c\" }} onClick={handleLike} />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<HeartOutline onClick={handleLike} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<Link to={`/post/${post._id}`}>\r\n\t\t\t\t\t\t\t<CommentOutline />\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{!!likes && (\r\n\t\t\t\t\t<p onClick={openLikeModal} className=\"postCard__likes\">\r\n\t\t\t\t\t\t{`${likes} ${likes === 1 ? \"like\" : \"likes\"}`}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t)}\r\n\t\t\t\t<div className=\"postCard__caption\">\r\n\t\t\t\t\t<p\r\n\t\t\t\t\t\tclassName=\"postCard__caption--username\"\r\n\t\t\t\t\t\tonClick={() => history.push(`/user/${post.createdBy.username}`)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{post.createdBy.username}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p className=\"postCard__caption--body\">{post.caption}</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t{!!post.comments && (\r\n\t\t\t\t\t<Link to={`/post/${post._id}`} className=\"postCard__comments\">\r\n\t\t\t\t\t\t<p>{`View ${post.comments} ${\r\n\t\t\t\t\t\t\tpost.comments === 1 ? \"comment\" : \"comments\"\r\n\t\t\t\t\t\t}`}</p>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t)}\r\n\t\t\t\t<p className=\"postCard__date\">{getTime(post.createdAt)}</p>\r\n\t\t\t\t<Modal\r\n\t\t\t\t\tisOpen={isLikeModalOpen}\r\n\t\t\t\t\tonRequestClose={closeLikeModal}\r\n\t\t\t\t\tariaHideApp={false}\r\n\t\t\t\t\tcontentLabel=\"Like Modal\"\r\n\t\t\t\t\tcloseTimeoutMS={200}\r\n\t\t\t\t\tclassName=\"modal\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<LikesArray likes={allLikes} />\r\n\t\t\t\t</Modal>\r\n\t\t\t</div>\r\n\t\t)\r\n\t);\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n\ttimelinePosts: state.timeline.posts,\r\n\ttrendingPosts: state.trending.posts,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\tupdateTimeline: (newTimeline) =>\r\n\t\tdispatch({ type: \"PUT_TIMELINE_ON_CHANGE\", posts: newTimeline }),\r\n\tupdateTrending: (newTrending) =>\r\n\t\tdispatch({ type: \"PUT_TRENDING\", posts: newTrending }),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Post);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\n\r\nimport { BsSearch as SearchIcon } from \"react-icons/bs\";\r\n\r\nimport NotFound from \"./NotFound\";\r\nimport PageLoader from \"./PageLoader\";\r\nimport Post from \"./Post\";\r\n\r\nimport { history } from \"../router/router\";\r\n\r\nconst endOfPosts = (\r\n\t<div className=\"timeline-end\">\r\n\t\t<p>--x--</p>\r\n\t</div>\r\n);\r\n\r\nconst loadingPosts = <div className=\"timeline-loader\"></div>;\r\n\r\nconst Timeline = ({ posts, loading, page, end, fetchScrollingTimeline }) => {\r\n\treturn (\r\n\t\t<div className=\"my-timeline\">\r\n\t\t\t{!loading ? (\r\n\t\t\t\t!!posts.length ? (\r\n\t\t\t\t\t<InfiniteScroll\r\n\t\t\t\t\t\tdataLength={posts.length}\r\n\t\t\t\t\t\tnext={() => fetchScrollingTimeline(page + 1)}\r\n\t\t\t\t\t\thasMore={!end}\r\n\t\t\t\t\t\tendMessage={endOfPosts}\r\n\t\t\t\t\t\tloader={loadingPosts}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{posts.map((post) => (\r\n\t\t\t\t\t\t\t<Post post={post} key={post.id} />\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</InfiniteScroll>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div className=\"no-posts\">\r\n\t\t\t\t\t\t<NotFound\r\n\t\t\t\t\t\t\tmessage={\r\n\t\t\t\t\t\t\t\t\"No posts found. Please follow users to view a timeline.\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t) : (\r\n\t\t\t\t<PageLoader />\r\n\t\t\t)}\r\n\t\t\t<div className=\"cta-buttons\">\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"searchUsers-button\"\r\n\t\t\t\t\tonClick={() => history.push(\"/searchUsers\")}\r\n\t\t\t\t\ttitle=\"Search Users\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<SearchIcon />\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tposts: state.timeline.posts,\r\n\tloading: state.timeline.loading,\r\n\tpage: Number(state.timeline.page),\r\n\tend: state.timeline.end,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => ({\r\n\tfetchScrollingTimeline: (page) =>\r\n\t\tdispatch({ type: \"FETCH_TIMELINE_SCROLLING\", page }),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Timeline);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { BsSearch as SearchIcon } from \"react-icons/bs\";\r\n\r\nimport NotFound from \"./NotFound\";\r\nimport PageLoader from \"./PageLoader\";\r\nimport Post from \"./Post\";\r\n\r\nimport { history } from \"../router/router\";\r\n\r\nconst TrendingPage = ({ posts, loading }) => {\r\n\treturn (\r\n\t\t<div className=\"my-timeline\">\r\n\t\t\t<div className=\"trendingPage__heading\">\r\n\t\t\t\t<h3>Trending On Finstagram</h3>\r\n\t\t\t\t<p>Highest growing posts from around the world!</p>\r\n\t\t\t</div>\r\n\t\t\t{!loading ? (\r\n\t\t\t\t!!posts.length ? (\r\n\t\t\t\t\tposts.map((post, index) => (\r\n\t\t\t\t\t\t<Post post={post} rank={index + 1} key={post._id} />\r\n\t\t\t\t\t))\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div className=\"no-posts\">\r\n\t\t\t\t\t\t<NotFound message={\"Nothing Here.\"} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t) : (\r\n\t\t\t\t<PageLoader />\r\n\t\t\t)}\r\n\t\t\t<div className=\"cta-buttons\">\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"searchUsers-button\"\r\n\t\t\t\t\tonClick={() => history.push(\"/searchUsers\")}\r\n\t\t\t\t\ttitle=\"Search Users\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<SearchIcon />\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tposts: state.trending.posts,\r\n\tloading: state.trending.loading,\r\n});\r\n\r\nexport default connect(mapStateToProps, null)(TrendingPage);\r\n","import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nimport NotFound from \"./NotFound\";\r\nimport PageLoader from \"./PageLoader\";\r\nimport Post from \"./Post\";\r\nimport mapboxgl from \"mapbox-gl\";\r\n\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nconst NearbyPosts = (props) => {\r\n\tconst { center } = useParams();\r\n\r\n\tconst [posts, setPosts] = useState([]);\r\n\tconst [loading, setLoading] = useState(true);\r\n\tconst [locationName, setLocationName] = useState(\"\");\r\n\r\n\tlet [lng, lat] = center.split(\",\");\r\n\r\n\tconst fetchPosts = async () => {\r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n\t\t\tconst url = `/api/v1/posts/near?lat=${lat}&lng=${lng}`;\r\n\t\t\tconst res = await axios.get(url);\r\n\t\t\tsetPosts(res.data.data.posts);\r\n\t\t\tsetLocationName(res.data.data.location.name);\r\n\t\t\tsetLoading(false);\r\n\t\t} catch (e) {\r\n\t\t\tsetPosts([]);\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchPosts();\r\n\r\n\t\t// MapBox Token\r\n\t\tmapboxgl.accessToken =\r\n\t\t\t\"pk.eyJ1Ijoic21hbmFuMyIsImEiOiJja2FqcHNqZmMwY3k0MnRtbmUyaTA3c3k0In0.7AdKPQUF4xS4_WlTI1eO6Q\";\r\n\r\n\t\t// Render map on screen\r\n\t\tvar map = new mapboxgl.Map({\r\n\t\t\tcontainer: \"map-container\",\r\n\t\t\tstyle: \"mapbox://styles/mapbox/streets-v11\",\r\n\t\t\tcenter: [lng * 1, lat * 1],\r\n\t\t\tzoom: 13,\r\n\t\t});\r\n\r\n\t\t// Location markers JSON File\r\n\t\tconst geojson = {\r\n\t\t\ttype: \"FeatureCollection\",\r\n\t\t\tfeatures: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttype: \"Feature\",\r\n\t\t\t\t\tgeometry: {\r\n\t\t\t\t\t\ttype: \"Point\",\r\n\t\t\t\t\t\tcoordinates: [lng * 1, lat * 1],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\ttitle: \"Mapbox\",\r\n\t\t\t\t\t\tdescription: locationName,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t};\r\n\r\n\t\tgeojson.features.forEach(function (marker) {\r\n\t\t\t// create a HTML element for each feature\r\n\t\t\tvar el = document.createElement(\"div\");\r\n\t\t\tel.className = \"marker\";\r\n\r\n\t\t\t// make a marker for each feature and add to the map\r\n\t\t\tnew mapboxgl.Marker(el).setLngLat(marker.geometry.coordinates).addTo(map);\r\n\t\t});\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className=\"my-timeline\">\r\n\t\t\t<div className=\"nearby-posts__heading\" id=\"map-container\"></div>\r\n\t\t\t{!loading ? (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className=\"location-name\">\r\n\t\t\t\t\t\t<p>{locationName}</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{!!posts.length ? (\r\n\t\t\t\t\t\tposts.map((post, index) => <Post post={post} key={post._id} />)\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<div className=\"no-posts\">\r\n\t\t\t\t\t\t\t<NotFound message={\"Nothing Here.\"} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</>\r\n\t\t\t) : (\r\n\t\t\t\t<PageLoader />\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default NearbyPosts;\r\n","import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport Loader from \"./Loader\";\r\n\r\nconst LoginForm = ({ putToken, fetchTimeline, fetchTrending }) => {\r\n\tconst [isLoading, setIsLoading] = useState(false);\r\n\r\n\tconst sendFormData = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tsetIsLoading(true);\r\n\t\tconst username = document.getElementById(\"username_field\").value;\r\n\t\tconst password = document.getElementById(\"password_field\").value;\r\n\r\n\t\ttry {\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl: \"/api/v1/users/login\",\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tusername,\r\n\t\t\t\t\tpassword,\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t\ttoast.success(\"Logged in successfully!\", {\r\n\t\t\t\tautoClose: 2000,\r\n\t\t\t});\r\n\t\t\tputToken(res.data.data.user);\r\n\t\t\tfetchTimeline();\r\n\t\t\tfetchTrending();\r\n\t\t} catch (err) {\r\n\t\t\tsetIsLoading(false);\r\n\t\t\ttoast.error(`Error: ${err.response.data.data.error.message}`);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"login-page\">\r\n\t\t\t<div className=\"login-form-container\">\r\n\t\t\t\t<h2>Finstagram</h2>\r\n\t\t\t\t<form onSubmit={sendFormData} className=\"login-form\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\tplaceholder=\"username\"\r\n\t\t\t\t\t\tid=\"username_field\"\r\n\t\t\t\t\t></input>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\tplaceholder=\"********\"\r\n\t\t\t\t\t\tid=\"password_field\"\r\n\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t></input>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tclassName=\"login-form__submit\"\r\n\t\t\t\t\t\tdisabled={isLoading}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{!isLoading ? <p>Submit</p> : <Loader />}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</form>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tNo account? <Link to=\"/signup\">Sign up</Link>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\tputToken: (user) => dispatch({ type: \"PUT_TOKEN\", user }),\r\n\tfetchTimeline: () => dispatch({ type: \"FETCH_TIMELINE\" }),\r\n\tfetchTrending: () => dispatch({ type: \"FETCH_TRENDING\" }),\r\n});\r\n\r\nexport default connect(null, mapDispatchToProps)(LoginForm);\r\n","import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport Loader from \"./Loader\";\r\n\r\nconst Signup = ({ putToken, fetchTimeline, fetchTrending }) => {\r\n\tconst [isLoading, setIsLoading] = useState(false);\r\n\r\n\tconst sendFormData = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tsetIsLoading(true);\r\n\t\tconst username = document.getElementById(\"username_field\").value;\r\n\t\tconst name = document.getElementById(\"name_field\").value;\r\n\t\tconst email = document.getElementById(\"email_field\").value;\r\n\t\tconst password = document.getElementById(\"password_field\").value;\r\n\t\tconst passwordConfirm = document.getElementById(\"passwordConfirm_field\")\r\n\t\t\t.value;\r\n\r\n\t\ttry {\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl: \"/api/v1/users/signup\",\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tusername,\r\n\t\t\t\t\tname,\r\n\t\t\t\t\temail,\r\n\t\t\t\t\tpassword,\r\n\t\t\t\t\tpasswordConfirm,\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t\ttoast.success(\"New account created!\", {\r\n\t\t\t\tautoClose: 2000,\r\n\t\t\t});\r\n\t\t\tputToken(res.data.data.user);\r\n\t\t\tfetchTimeline();\r\n\t\t\tfetchTrending();\r\n\t\t} catch (err) {\r\n\t\t\tsetIsLoading(false);\r\n\t\t\ttoast.error(`Error: ${err.response.data.data.error.message}`);\r\n\t\t}\r\n\t};\r\n\treturn (\r\n\t\t<div className=\"login-page\">\r\n\t\t\t<div className=\"login-form-container\">\r\n\t\t\t\t<h2>Finstagram</h2>\r\n\t\t\t\t<form onSubmit={sendFormData} class=\"login-form\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\tplaceholder=\"Username\"\r\n\t\t\t\t\t\tid=\"username_field\"\r\n\t\t\t\t\t></input>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\tplaceholder=\"Name\"\r\n\t\t\t\t\t\tid=\"name_field\"\r\n\t\t\t\t\t></input>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\tplaceholder=\"Email Address\"\r\n\t\t\t\t\t\tid=\"email_field\"\r\n\t\t\t\t\t></input>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\tplaceholder=\"********\"\r\n\t\t\t\t\t\tid=\"password_field\"\r\n\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t></input>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tname=\"passwordConfirm\"\r\n\t\t\t\t\t\tplaceholder=\"********\"\r\n\t\t\t\t\t\tid=\"passwordConfirm_field\"\r\n\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t></input>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tclassName=\"login-form__submit\"\r\n\t\t\t\t\t\tdisabled={isLoading}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{!isLoading ? <p>Submit</p> : <Loader />}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\tputToken: (user) => dispatch({ type: \"PUT_TOKEN\", user }),\r\n\tfetchTimeline: () => dispatch({ type: \"FETCH_TIMELINE\" }),\r\n\tfetchTrending: () => dispatch({ type: \"FETCH_TRENDING\" }),\r\n});\r\n\r\nexport default connect(null, mapDispatchToProps)(Signup);\r\n","import React from \"react\";\r\nimport { AiFillDelete as DeleteIcon } from \"react-icons/ai\";\r\n\r\nimport { history } from \"../router/router\";\r\n\r\nconst Comment = ({ comment, user, removeComment }) => {\r\n\tconst isUser = user.id === comment.createdBy.id;\r\n\treturn (\r\n\t\t<div className=\"comment\">\r\n\t\t\t<div className=\"comment--meta\">\r\n\t\t\t\t<img\r\n\t\t\t\t\tsrc={comment.createdBy.photo}\r\n\t\t\t\t\talt={`${comment.createdBy.username}'s profile`}\r\n\t\t\t\t/>\r\n\t\t\t\t<p\r\n\t\t\t\t\tclassName=\"comment--username\"\r\n\t\t\t\t\tonClick={() => history.push(`/user/${comment.createdBy.username}`)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{comment.createdBy.username}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p className=\"comment--body\">{comment.body}</p>\r\n\t\t\t</div>\r\n\t\t\t{!!isUser && (\r\n\t\t\t\t<div className=\"comment--delete\">\r\n\t\t\t\t\t<DeleteIcon\r\n\t\t\t\t\t\tonClick={() => removeComment(comment._id)}\r\n\t\t\t\t\t\ttitle=\"Delete Comment\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Comment;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport Comment from \"./Comment\";\r\n\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { AiOutlineSend as SendIcon } from \"react-icons/ai\";\r\n\r\nconst Comments = ({ id, user, timelinePosts, updateTimeline }) => {\r\n\tconst [comments, setComments] = useState([]);\r\n\r\n\t// Update redux store when a post is liked/unliked\r\n\tconst updateStore = (postId, commentsCount) => {\r\n\t\tconst newTimeline = [...timelinePosts];\r\n\r\n\t\t// 1. Update the comment count for timeline posts\r\n\t\tnewTimeline.forEach((post) => {\r\n\t\t\tif (post._id === postId) {\r\n\t\t\t\tpost.comments = commentsCount;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tupdateTimeline(newTimeline);\r\n\t};\r\n\r\n\tconst createComment = async (e) => {\r\n\t\te.preventDefault();\r\n\t\ttry {\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl: `/api/v1/posts/${id}/comments`,\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tcomment: document.getElementById(\"comment-field\").value,\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t\tdocument.getElementById(\"comment-field\").value = \"\";\r\n\r\n\t\t\tconst newArray = comments.concat([res.data.data.comment]);\r\n\t\t\tsetComments(newArray);\r\n\r\n\t\t\tupdateStore(id, newArray.length);\r\n\t\t} catch (err) {}\r\n\t};\r\n\r\n\tconst removeComment = async (commentId) => {\r\n\t\ttry {\r\n\t\t\tawait axios({\r\n\t\t\t\turl: `/api/v1/posts/${id}/comment/${commentId}`,\r\n\t\t\t\tmethod: \"DELETE\",\r\n\t\t\t});\r\n\t\t\tconst newArray = comments.filter((comment) => comment._id !== commentId);\r\n\t\t\tsetComments(newArray);\r\n\t\t\tupdateStore(id, newArray.length);\r\n\t\t} catch (err) {}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchComments = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await axios({\r\n\t\t\t\t\turl: `/api/v1/posts/${id}/comments`,\r\n\t\t\t\t\tmethod: \"GET\",\r\n\t\t\t\t});\r\n\t\t\t\tsetComments(res.data.data.comments);\r\n\t\t\t} catch (err) {}\r\n\t\t};\r\n\t\tfetchComments();\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className=\"commentArray\">\r\n\t\t\t<h3>Comments</h3>\r\n\t\t\t<div className=\"commentsArray-list\">\r\n\t\t\t\t{comments.map((comment) => (\r\n\t\t\t\t\t<Comment\r\n\t\t\t\t\t\tcomment={comment}\r\n\t\t\t\t\t\tkey={comment._id}\r\n\t\t\t\t\t\tuser={user}\r\n\t\t\t\t\t\tremoveComment={removeComment}\r\n\t\t\t\t\t/>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"createComment-form\">\r\n\t\t\t\t<form onSubmit={createComment}>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"comment\"\r\n\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\tid=\"comment-field\"\r\n\t\t\t\t\t\tplaceholder=\"Add Comment\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<button type=\"submit\">\r\n\t\t\t\t\t\t<SendIcon />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n\ttimelinePosts: state.timeline.posts,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\tupdateTimeline: (newTimeline) =>\r\n\t\tdispatch({ type: \"PUT_TIMELINE_ON_CHANGE\", posts: newTimeline }),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Comments);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport Modal from \"react-modal\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { history } from \"../router/router\";\r\n\r\nimport {\r\n\tAiOutlineHeart as HeartOutline,\r\n\tAiFillHeart as HeartFill,\r\n} from \"react-icons/ai\";\r\n\r\nimport PageLoader from \"./PageLoader\";\r\nimport Comments from \"./Comments\";\r\nimport LikesArray from \"./likesArray\";\r\n\r\nconst PostDetails = ({\r\n\tuser,\r\n\ttimelinePosts,\r\n\ttrendingPosts,\r\n\tupdateTimeline,\r\n\tupdateTrending,\r\n}) => {\r\n\tconst { postId } = useParams();\r\n\r\n\tconst [post, setPost] = useState({});\r\n\tconst [allLikes, setAllLikes] = useState();\r\n\r\n\tconst [isLiked, setIsLiked] = useState(post.likedByMe);\r\n\tconst [likes, setLikes] = useState(post.likes * 1);\r\n\tconst [isLikeModalOpen, setIsLikeModalOpen] = useState(false);\r\n\r\n\t// a. Fetch the post to display\r\n\tconst fetchPost = async () => {\r\n\t\ttry {\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl: `/api/v1/posts/one/${postId}`,\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t});\r\n\t\t\tconst post = res.data.results.post;\r\n\t\t\tsetPost(post);\r\n\t\t\tsetIsLiked(post.likedByMe);\r\n\t\t\tsetLikes(post.likes * 1);\r\n\t\t} catch (err) {}\r\n\t};\r\n\r\n\t// b. Calculate time of post creation\r\n\tconst getTime = (date) => {\r\n\t\tconst givenDate = new Date(date).setHours(0, 0, 0, 0);\r\n\t\tconst today = new Date(Date.now()).setHours(0, 0, 0, 0);\r\n\r\n\t\tconst difference = today - givenDate;\r\n\r\n\t\tconst dateObj = {\r\n\t\t\t0: \"Today\",\r\n\t\t\t86400000: \"Yesterday\",\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\tdateObj[difference] ||\r\n\t\t\tnew Date(date).toLocaleDateString(\"en-us\", {\r\n\t\t\t\tyear: \"numeric\",\r\n\t\t\t\tmonth: \"long\",\r\n\t\t\t\tday: \"numeric\",\r\n\t\t\t})\r\n\t\t);\r\n\t};\r\n\r\n\t// c. Open Modal showing all likers\r\n\tconst openLikeModal = () => {\r\n\t\tsetIsLikeModalOpen(true);\r\n\t};\r\n\r\n\t// d. Close Modal showing all likers\r\n\tconst closeLikeModal = () => {\r\n\t\tsetIsLikeModalOpen(false);\r\n\t};\r\n\r\n\t// e. Fetch all people who liked the post\r\n\tconst fetchLikes = async () => {\r\n\t\tconst url = `/api/v1/posts/${postId}/likedBy`;\r\n\t\ttry {\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t});\r\n\t\t\tsetAllLikes(res.data.data.likers);\r\n\t\t} catch (err) {}\r\n\t};\r\n\r\n\t// f. Inform the database that user has liked the post\r\n\tconst createLike = async () => {\r\n\t\tconst url = `/api/v1/posts/${postId}/like`;\r\n\t\ttry {\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t});\r\n\t\t} catch (err) {\r\n\t\t\tsetIsLiked(!isLiked);\r\n\t\t}\r\n\t};\r\n\r\n\t// g. Inform the database that user has unliked the post\r\n\tconst removeLike = async () => {\r\n\t\tconst url = `/api/v1/posts/${postId}/unlike`;\r\n\t\ttry {\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t});\r\n\t\t} catch (err) {\r\n\t\t\tsetIsLiked(!isLiked);\r\n\t\t}\r\n\t};\r\n\r\n\t// h. Update redux store when a post is liked/unliked\r\n\tconst updateStore = (postId, likesCount, likedByMe) => {\r\n\t\tconsole.log(\"yay\");\r\n\t\tconst newTimeline = [...timelinePosts];\r\n\t\tconst newTrending = [...trendingPosts];\r\n\r\n\t\t// 1. Update the likes count and likedByMe for timeline posts\r\n\t\tnewTimeline.forEach((post) => {\r\n\t\t\tif (post._id === postId) {\r\n\t\t\t\tpost.likedByMe = likedByMe;\r\n\t\t\t\tpost.likes = likesCount;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// 2. Update the likes count and likedByMe for trending posts\r\n\t\tnewTrending.forEach((post) => {\r\n\t\t\tif (post._id === postId) {\r\n\t\t\t\tpost.likedByMe = likedByMe;\r\n\t\t\t\tpost.likes = likesCount;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tupdateTimeline(newTimeline);\r\n\t\tupdateTrending(newTrending);\r\n\t};\r\n\r\n\t// i. Updates store and state using above func.\r\n\tconst handleLike = async () => {\r\n\t\tconst likedCopy = isLiked;\r\n\t\tsetIsLiked(!isLiked);\r\n\t\tsetAllLikes([]);\r\n\r\n\t\tif (likedCopy) {\r\n\t\t\tsetLikes(likes - 1);\r\n\t\t\tupdateStore(post._id, likes - 1, !likedCopy);\r\n\t\t\tawait removeLike();\r\n\t\t} else {\r\n\t\t\tsetLikes(likes + 1);\r\n\t\t\tupdateStore(post._id, likes + 1, !likedCopy);\r\n\t\t\tawait createLike();\r\n\t\t}\r\n\r\n\t\tawait fetchLikes();\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchPost();\r\n\t\tfetchLikes();\r\n\t}, []);\r\n\r\n\treturn !!post.id ? (\r\n\t\t<div className=\"postDetails\">\r\n\t\t\t<div className=\"postDetails--info\">\r\n\t\t\t\t<div className=\"postDetails--meta\">\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tsrc={post.createdBy.photo}\r\n\t\t\t\t\t\talt={`${post.createdBy.username}'s profile`}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<p\r\n\t\t\t\t\t\tclassName=\"postDetails--username\"\r\n\t\t\t\t\t\tonClick={() => history.push(`/user/${post.createdBy.username}`)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{post.createdBy.username}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"postDetails--image\">\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tsrc={post.photo}\r\n\t\t\t\t\t\talt={`${post.createdBy.username}'s post`}\r\n\t\t\t\t\t\tonDoubleClick={handleLike}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"postDetails__likes\">\r\n\t\t\t\t\t{isLiked ? (\r\n\t\t\t\t\t\t<HeartFill style={{ color: \"#b71c1c\" }} onClick={handleLike} />\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<HeartOutline onClick={handleLike} />\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{!!likes && (\r\n\t\t\t\t\t\t<p onClick={openLikeModal} className=\"postDetails__likes--count\">\r\n\t\t\t\t\t\t\t{`${likes} ${likes === 1 ? \"like\" : \"likes\"}`}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"postCard__caption\">\r\n\t\t\t\t\t<p\r\n\t\t\t\t\t\tclassName=\"postCard__caption--username\"\r\n\t\t\t\t\t\tonClick={() => history.push(`/user/${post.createdBy.username}`)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{post.createdBy.username}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p className=\"postCard__caption--body\">{post.caption}</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<p className=\"postCard__date\">{getTime(post.createdAt)}</p>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"postDetails--details\">\r\n\t\t\t\t<Comments id={postId} user={user} />\r\n\t\t\t</div>\r\n\t\t\t<Modal\r\n\t\t\t\tisOpen={isLikeModalOpen}\r\n\t\t\t\tonRequestClose={closeLikeModal}\r\n\t\t\t\tariaHideApp={false}\r\n\t\t\t\tcontentLabel=\"Like Modal\"\r\n\t\t\t\tcloseTimeoutMS={200}\r\n\t\t\t\tclassName=\"modal\"\r\n\t\t\t>\r\n\t\t\t\t<LikesArray likes={allLikes} />\r\n\t\t\t</Modal>\r\n\t\t</div>\r\n\t) : (\r\n\t\t<PageLoader />\r\n\t);\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n\ttimelinePosts: state.timeline.posts,\r\n\ttrendingPosts: state.trending.posts,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\tupdateTimeline: (newTimeline) =>\r\n\t\tdispatch({ type: \"PUT_TIMELINE_ON_CHANGE\", posts: newTimeline }),\r\n\tupdateTrending: (newTrending) =>\r\n\t\tdispatch({ type: \"PUT_TRENDING\", posts: newTrending }),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PostDetails);\r\n","import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { connect } from \"react-redux\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport Modal from \"react-modal\";\r\n\r\nimport {\r\n\tAiOutlineHeart as HeartOutline,\r\n\tAiOutlineComment as CommentOutline,\r\n\tAiOutlinePlus as AddIcon,\r\n\tAiOutlineEdit as EditIcon,\r\n} from \"react-icons/ai\";\r\n\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport NotFound from \"./NotFound\";\r\nimport PageLoader from \"./PageLoader\";\r\nimport { UserInfoSmall } from \"./likesArray\";\r\n\r\nimport { history } from \"../router/router\";\r\n\r\nconst Post = ({ post }) => {\r\n\treturn (\r\n\t\t<div className=\"post-container\">\r\n\t\t\t<img\r\n\t\t\t\tsrc={post.photo}\r\n\t\t\t\tclassName=\"post-container__image\"\r\n\t\t\t\talt=\"My-Post\"\r\n\t\t\t\tonClick={() => history.push(`/post/${post.id}`)}\r\n\t\t\t/>\r\n\t\t\t<div className=\"post-container__details\">\r\n\t\t\t\t<div className=\"post-container__details--likes\">\r\n\t\t\t\t\t<HeartOutline />\r\n\t\t\t\t\t<p>{post.likes}</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"post-container__details--comments\">\r\n\t\t\t\t\t<CommentOutline />\r\n\t\t\t\t\t<p>{post.comments}</p>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst UserProfile = (props) => {\r\n\tconst { username } = useParams();\r\n\r\n\tconst notMe = props.user.username !== username;\r\n\r\n\tconst [user, setUser] = useState();\r\n\tconst [posts, setPosts] = useState();\r\n\r\n\tconst [isModalOpen, setIsModalOpen] = useState(false);\r\n\r\n\tconst [usersArray, setUsersArray] = useState([]);\r\n\tconst [followersArray, setFollowersArray] = useState([]);\r\n\tconst [followingArray, setFollowingArray] = useState([]);\r\n\r\n\tconst openModal = () => {\r\n\t\tsetIsModalOpen(true);\r\n\t};\r\n\r\n\tconst closeModal = () => {\r\n\t\tsetIsModalOpen(false);\r\n\t\tsetUsersArray([]);\r\n\t};\r\n\r\n\tconst followUser = async (username) => {\r\n\t\tlet newFollowersCount = user.followersCount + 1;\r\n\t\tsetUser({\r\n\t\t\t...user,\r\n\t\t\tfollowedByMe: true,\r\n\t\t\tfollowersCount: newFollowersCount,\r\n\t\t});\r\n\t\ttry {\r\n\t\t\tconst url = `/api/v1/users/${username}/follow`;\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t});\r\n\r\n\t\t\tprops.fetchTimeline();\r\n\t\t\ttoast.success(res.data.message, {\r\n\t\t\t\tautoClose: 5000,\r\n\t\t\t\tpauseOnHover: false,\r\n\t\t\t});\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err);\r\n\t\t\ttoast.success(err.response.data.error.message, {\r\n\t\t\t\tautoClose: 5000,\r\n\t\t\t\tpauseOnHover: false,\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst unfollowUser = async (username) => {\r\n\t\tlet newFollowersCount = user.followersCount - 1;\r\n\t\tsetUser({\r\n\t\t\t...user,\r\n\t\t\tfollowedByMe: false,\r\n\t\t\tfollowersCount: newFollowersCount,\r\n\t\t});\r\n\t\ttry {\r\n\t\t\tconst url = `/api/v1/users/${username}/unfollow`;\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t});\r\n\t\t\tprops.fetchTimeline();\r\n\t\t\ttoast.success(res.data.message, {\r\n\t\t\t\tautoClose: 5000,\r\n\t\t\t\tpauseOnHover: false,\r\n\t\t\t});\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err.response);\r\n\t\t\ttoast.success(err.response.data.error.message, {\r\n\t\t\t\tautoClose: 5000,\r\n\t\t\t\tpauseOnHover: false,\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst fetchUser = async () => {\r\n\t\ttry {\r\n\t\t\tconst url = `/api/v1/users/user/${username}`;\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t});\r\n\t\t\tsetUser(res.data.data.user);\r\n\t\t\tsetPosts(res.data.data.posts);\r\n\t\t} catch (err) {}\r\n\t};\r\n\r\n\tconst fetchFollows = async () => {\r\n\t\ttry {\r\n\t\t\tconst url = `/api/v1/users/${username}/follows`;\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t});\r\n\t\t\tsetFollowingArray(res.data.data.user.follows);\r\n\t\t} catch (err) {}\r\n\t};\r\n\r\n\tconst fetchFollowers = async () => {\r\n\t\ttry {\r\n\t\t\tconst url = `/api/v1/users/${username}/followers`;\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t});\r\n\t\t\tsetFollowersArray(res.data.data.followers);\r\n\t\t} catch (err) {}\r\n\t};\r\n\r\n\tconst showFollows = () => {\r\n\t\tsetUsersArray(followingArray);\r\n\t\topenModal();\r\n\t};\r\n\r\n\tconst showFollowers = () => {\r\n\t\tsetUsersArray(followersArray);\r\n\t\topenModal();\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchUser();\r\n\t\tfetchFollowers();\r\n\t\tfetchFollows();\r\n\t}, []);\r\n\r\n\treturn !!user && !!posts ? (\r\n\t\t<div className=\"user-page\">\r\n\t\t\t<div className=\"user-info\">\r\n\t\t\t\t<div className=\"user-profile\">\r\n\t\t\t\t\t<img src={user.photo} alt={`${user.username}'s profile`} />\r\n\t\t\t\t\t<p className=\"user-profile__name\">{user.name}</p>\r\n\t\t\t\t\t<p className=\"user-profile__username\">{user.username}</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"user-meta\">\r\n\t\t\t\t\t<div className=\"user-stats\">\r\n\t\t\t\t\t\t<div className=\"user-stats--posts\">\r\n\t\t\t\t\t\t\t<h3>{user.postsCount}</h3>\r\n\t\t\t\t\t\t\t<p>Posts</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName=\"user-stats--followers\"\r\n\t\t\t\t\t\t\tonClick={!!user.followersCount ? showFollowers : null}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<h3>{user.followersCount}</h3>\r\n\t\t\t\t\t\t\t<p>Followers</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName=\"user-stats--follows\"\r\n\t\t\t\t\t\t\tonClick={!!user.followCount ? showFollows : null}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<h3>{user.followCount}</h3>\r\n\t\t\t\t\t\t\t<p>Follows</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{!!notMe &&\r\n\t\t\t\t\t\t(user.followedByMe ? (\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"user-following-button\"\r\n\t\t\t\t\t\t\t\tonClick={() => unfollowUser(user.username)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tFollowing\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"user-follow-button\"\r\n\t\t\t\t\t\t\t\tonClick={() => followUser(user.username)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tFollow\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{!!posts.length ? (\r\n\t\t\t\t<div className=\"user-posts\">\r\n\t\t\t\t\t{posts.map((post) => (\r\n\t\t\t\t\t\t<Post post={post} key={post._id} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<NotFound message={\"No posts yet.\"} />\r\n\t\t\t)}\r\n\t\t\t{!!!notMe && (\r\n\t\t\t\t<div className=\"cta-buttons\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName=\"newPost-button\"\r\n\t\t\t\t\t\tonClick={() => history.push(\"/post/create\")}\r\n\t\t\t\t\t\ttitle=\"Create New Post\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<AddIcon />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName=\"editMe-button\"\r\n\t\t\t\t\t\tonClick={() => history.push(\"/update\")}\r\n\t\t\t\t\t\ttitle=\"Edit Details\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<EditIcon />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t\t<Modal\r\n\t\t\t\tisOpen={isModalOpen}\r\n\t\t\t\tonRequestClose={closeModal}\r\n\t\t\t\tariaHideApp={false}\r\n\t\t\t\tcontentLabel=\"Like Modal\"\r\n\t\t\t\tcloseTimeoutMS={200}\r\n\t\t\t\tclassName=\"modal\"\r\n\t\t\t>\r\n\t\t\t\t<div className=\"like-modal__list\">\r\n\t\t\t\t\t{usersArray.map((user) => (\r\n\t\t\t\t\t\t<UserInfoSmall\r\n\t\t\t\t\t\t\tuser={user.follows.name ? user.follows : user.user}\r\n\t\t\t\t\t\t\tkey={user._id}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\t\t</div>\r\n\t) : (\r\n\t\t<PageLoader />\r\n\t);\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\tfetchTimeline: () => dispatch({ type: \"FETCH_TIMELINE\" }),\r\n});\r\n\r\nexport default connect(null, mapDispatchToProps)(UserProfile);\r\n","// GeoCodes the location via mapbox API for location in posts\r\nimport axios from \"axios\";\r\n\r\nconst geoCode = async (keyword) => {\r\n\ttry {\r\n\t\tconst apiLimit = 5;\r\n\t\tconst url = `https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(\r\n\t\t\tkeyword\r\n\t\t)}.json?access_token=pk.eyJ1Ijoic21hbmFuMyIsImEiOiJja2QycnZ4ZzExZzBoMnVwNHIwd2MxNm9xIn0.2ciILybPF6jxSZpP6D6Kcw&limit=${apiLimit}`;\r\n\r\n\t\tconst res = await axios.get(url);\r\n\t\tconst locationData = [];\r\n\r\n\t\tres.data.features.forEach((location) => {\r\n\t\t\tconst newLocationObject = {\r\n\t\t\t\tname: location.place_name,\r\n\t\t\t\tlongitude: location.center[0],\r\n\t\t\t\tlatitude: location.center[1],\r\n\t\t\t};\r\n\r\n\t\t\tlocationData.push(newLocationObject);\r\n\t\t});\r\n\r\n\t\treturn locationData;\r\n\t} catch (e) {\r\n\t\treturn [];\r\n\t}\r\n};\r\n\r\nexport default geoCode;\r\n","import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport AwesomeDebouncePromise from \"awesome-debounce-promise\";\r\nimport geoCode from \"../utils/geoCode\";\r\n\r\nimport { connect } from \"react-redux\";\r\n\r\nimport {\r\n\tBsFileEarmarkPlus as AddFileIcon,\r\n\tBsFileEarmarkCheck as UploadedFileIcon,\r\n} from \"react-icons/bs\";\r\n\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { history } from \"../router/router\";\r\nimport Loader from \"./Loader\";\r\n\r\n// Global object for sending location data\r\nlet globalLocation = {};\r\n\r\nconst CreatePost = ({ fetchPosts }) => {\r\n\tconst [uploaded, setUploaded] = useState(false);\r\n\tconst [isLoading, setIsLoading] = useState(false);\r\n\tconst [locations, setLocations] = useState([]);\r\n\tconst [locationLoading, setLocationLoading] = useState(false);\r\n\tconst [isValidLocation, setIsValidLocation] = useState(true);\r\n\r\n\t// Display location search results\r\n\tconst SearchResults = ({ locations }) => {\r\n\t\t// Select a search result & update global object\r\n\t\tconst selectLocation = (location) => {\r\n\t\t\tdocument.getElementById(\"location_field\").value = location.name;\r\n\t\t\tsetIsValidLocation(true);\r\n\t\t\tsetLocationLoading(true);\r\n\t\t\tglobalLocation = {\r\n\t\t\t\tlocationName: location.name,\r\n\t\t\t\tlatitude: location.latitude,\r\n\t\t\t\tlongitude: location.longitude,\r\n\t\t\t};\r\n\t\t};\r\n\r\n\t\t// Search result component\r\n\t\treturn (\r\n\t\t\t<div className=\"locationSearch-results\">\r\n\t\t\t\t{locations.map((location) => (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"searchLocation\"\r\n\t\t\t\t\t\tkey={location.name}\r\n\t\t\t\t\t\tonClick={() => selectLocation(location)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<p>{location.name}</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t);\r\n\t};\r\n\r\n\t// Send post to backend\r\n\tconst sendFormData = async (e) => {\r\n\t\tsetIsLoading(true);\r\n\t\te.preventDefault();\r\n\r\n\t\tconst form = new FormData();\r\n\t\tform.append(\"photo\", document.getElementById(\"photo_field\").files[0]);\r\n\t\tform.append(\"caption\", document.getElementById(\"caption_field\").value);\r\n\r\n\t\t// Only add these if user has selected a valid location\r\n\t\tif (isValidLocation && globalLocation.hasOwnProperty(\"locationName\")) {\r\n\t\t\tform.append(\"locationName\", globalLocation.locationName);\r\n\t\t\tform.append(\"latitude\", globalLocation.latitude);\r\n\t\t\tform.append(\"longitude\", globalLocation.longitude);\r\n\t\t}\r\n\r\n\t\t// Send post data to backend & create post\r\n\t\ttry {\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl: \"/api/v1/posts/create\",\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\tdata: form,\r\n\t\t\t});\r\n\r\n\t\t\ttoast.success(\"New post created! Redirecting..\", {\r\n\t\t\t\tautoClose: 2000,\r\n\t\t\t});\r\n\t\t\tfetchPosts();\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\thistory.push(\"/\");\r\n\t\t\t}, 2000);\r\n\t\t} catch (err) {\r\n\t\t\tsetIsLoading(false);\r\n\t\t\ttoast.error(`Error: ${err.response.data.data.error.message}`);\r\n\t\t}\r\n\t};\r\n\r\n\tconst asyncFunctionDebounced = AwesomeDebouncePromise(geoCode, 500);\r\n\r\n\t// Use MapBox API to search for locations\r\n\tconst searchLocation = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tsetIsValidLocation(false);\r\n\r\n\t\tif (e.target.value) {\r\n\t\t\tsetLocationLoading(true);\r\n\t\t\te.persist();\r\n\t\t\ttry {\r\n\t\t\t\tconst mapBoxLocations = await asyncFunctionDebounced(e.target.value);\r\n\t\t\t\tif (e.target.value) {\r\n\t\t\t\t\tsetLocations(mapBoxLocations);\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {}\r\n\t\t\tsetLocationLoading(false);\r\n\t\t} else {\r\n\t\t\t// If user clears his search\r\n\t\t\tsetLocations([]);\r\n\t\t\tsetIsValidLocation(true);\r\n\t\t\tglobalLocation = {};\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"login-page\">\r\n\t\t\t<div className=\"login-form-container\">\r\n\t\t\t\t<h2>New Post</h2>\r\n\t\t\t\t<form onSubmit={sendFormData} className=\"login-form\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"caption\"\r\n\t\t\t\t\t\tplaceholder=\"Caption\"\r\n\t\t\t\t\t\tid=\"caption_field\"\r\n\t\t\t\t\t></input>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"location\"\r\n\t\t\t\t\t\tplaceholder=\"Location\"\r\n\t\t\t\t\t\tid=\"location_field\"\r\n\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\tonChange={searchLocation}\r\n\t\t\t\t\t></input>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\tname=\"photo\"\r\n\t\t\t\t\t\taccept=\"image/*\"\r\n\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\tplaceholder=\"Photo\"\r\n\t\t\t\t\t\tid=\"photo_field\"\r\n\t\t\t\t\t\tonChange={() => setUploaded(true)}\r\n\t\t\t\t\t></input>\r\n\t\t\t\t\t<div className=\"searchResults\">\r\n\t\t\t\t\t\t{!locationLoading && !!locations.length && (\r\n\t\t\t\t\t\t\t<SearchResults locations={locations} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{!isValidLocation && (\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t*Please only select a valid location. Invalid locations will be\r\n\t\t\t\t\t\t\trejected.\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<label htmlFor=\"photo_field\" className=\"upload-post-label\">\r\n\t\t\t\t\t\t{!uploaded ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<AddFileIcon />\r\n\t\t\t\t\t\t\t\t<p>Add Image</p>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<UploadedFileIcon />\r\n\t\t\t\t\t\t\t\t<p>Uploaded!</p>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tclassName=\"login-form__submit\"\r\n\t\t\t\t\t\tdisabled={isLoading}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{!isLoading ? <p>Submit</p> : <Loader />}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\tfetchPosts: () => dispatch({ type: \"FETCH_TIMELINE\" }),\r\n});\r\n\r\nexport default connect(null, mapDispatchToProps)(CreatePost);\r\n","import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nimport { MdModeEdit as EditIcon } from \"react-icons/md\";\r\n\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { history } from \"../router/router\";\r\nimport Loader from \"./Loader\";\r\n\r\nconst EditUserProfile = ({ user }) => {\r\n\tconst [uploadedText, setUploadedText] = useState(\"\");\r\n\tconst [isLoading, setIsLoading] = useState(false);\r\n\r\n\tconst sendUpdateData = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tsetIsLoading(true);\r\n\r\n\t\tconst form = new FormData();\r\n\t\tform.append(\"photo\", document.getElementById(\"photo_field\").files[0]);\r\n\t\tform.append(\"username\", document.getElementById(\"username_field\").value);\r\n\t\tform.append(\"email\", document.getElementById(\"email_field\").value);\r\n\t\tform.append(\"name\", document.getElementById(\"name_field\").value);\r\n\r\n\t\ttry {\r\n\t\t\tawait axios({\r\n\t\t\t\turl: \"/api/v1/users/updateMe\",\r\n\t\t\t\tmethod: \"PATCH\",\r\n\t\t\t\tdata: form,\r\n\t\t\t});\r\n\t\t\tsetIsLoading(false);\r\n\r\n\t\t\ttoast.success(\"User details updated!\", {\r\n\t\t\t\tautoClose: 2000,\r\n\t\t\t});\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\twindow.location.reload(true);\r\n\t\t\t}, 2000);\r\n\t\t} catch (err) {\r\n\t\t\t// console.log(err.response);\r\n\t\t\tsetIsLoading(false);\r\n\t\t\ttoast.error(`Error: ${err.response.data.data.error.message}`);\r\n\t\t}\r\n\t};\r\n\r\n\tconst sendPasswordData = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tsetIsLoading(true);\r\n\r\n\t\tconst oldPassword = document.getElementById(\"oldPassword_field\").value;\r\n\t\tconst newPassword = document.getElementById(\"newPassword_field\").value;\r\n\t\tconst confirmPassword = document.getElementById(\"passwordConfirm_field\")\r\n\t\t\t.value;\r\n\r\n\t\ttry {\r\n\t\t\tawait axios({\r\n\t\t\t\turl: \"/api/v1/users/updatePassword\",\r\n\t\t\t\tmethod: \"PATCH\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\toldPassword,\r\n\t\t\t\t\tnewPassword,\r\n\t\t\t\t\tconfirmPassword,\r\n\t\t\t\t},\r\n\t\t\t});\r\n\r\n\t\t\ttoast.success(\"Password successfully updated!\", {\r\n\t\t\t\tautoClose: 2000,\r\n\t\t\t});\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\twindow.location.reload(true);\r\n\t\t\t}, 2000);\r\n\t\t} catch (err) {\r\n\t\t\t// console.log(err.response);\r\n\t\t\tsetIsLoading(false);\r\n\t\t\ttoast.error(`Error: ${err.response.data.data.error.message}`);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"login-page\">\r\n\t\t\t\t<div className=\"login-form-container\">\r\n\t\t\t\t\t<h2>Update Profile</h2>\r\n\t\t\t\t\t<form onSubmit={sendUpdateData} className=\"login-form\">\r\n\t\t\t\t\t\t<div className=\"edit-image\">\r\n\t\t\t\t\t\t\t<p>{uploadedText}</p>\r\n\t\t\t\t\t\t\t<img src={user.photo} alt={`${user.name}'s profile`} />\r\n\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\thtmlFor=\"photo_field\"\r\n\t\t\t\t\t\t\t\tclassName=\"upload-profile-label\"\r\n\t\t\t\t\t\t\t\ttitle=\"Change Profile Picture\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<EditIcon />\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<label className=\"edit-user-label\">Username</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\t\tplaceholder=\"Username\"\r\n\t\t\t\t\t\t\tid=\"username_field\"\r\n\t\t\t\t\t\t\tdefaultValue={user.username}\r\n\t\t\t\t\t\t\tclassName=\"edit-user-input\"\r\n\t\t\t\t\t\t></input>\r\n\t\t\t\t\t\t<label className=\"edit-user-label\">Name</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\t\tplaceholder=\"Name\"\r\n\t\t\t\t\t\t\tid=\"name_field\"\r\n\t\t\t\t\t\t\tdefaultValue={user.name}\r\n\t\t\t\t\t\t\tclassName=\"edit-user-input\"\r\n\t\t\t\t\t\t></input>\r\n\t\t\t\t\t\t<label className=\"edit-user-label\">Email</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\t\tplaceholder=\"Email Address\"\r\n\t\t\t\t\t\t\tid=\"email_field\"\r\n\t\t\t\t\t\t\tdefaultValue={user.email}\r\n\t\t\t\t\t\t\tclassName=\"edit-user-input\"\r\n\t\t\t\t\t\t></input>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\tname=\"photo\"\r\n\t\t\t\t\t\t\taccept=\"image/*\"\r\n\t\t\t\t\t\t\tplaceholder=\"Photo\"\r\n\t\t\t\t\t\t\tid=\"photo_field\"\r\n\t\t\t\t\t\t\tonChange={() => setUploadedText(\"New profile uploaded!\")}\r\n\t\t\t\t\t\t></input>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\tclassName=\"login-form__submit\"\r\n\t\t\t\t\t\t\tdisabled={isLoading}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{!isLoading ? <p>Submit</p> : <Loader />}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"login-page\" style={{ marginTop: \"-80px\" }}>\r\n\t\t\t\t<div className=\"login-form-container\">\r\n\t\t\t\t\t<h2>ChangePassword</h2>\r\n\t\t\t\t\t<form onSubmit={sendPasswordData} className=\"login-form\">\r\n\t\t\t\t\t\t<label className=\"edit-user-label\">Current Password</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tname=\"oldPassword\"\r\n\t\t\t\t\t\t\tplaceholder=\"********\"\r\n\t\t\t\t\t\t\tid=\"oldPassword_field\"\r\n\t\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\t\tclassName=\"edit-user-input\"\r\n\t\t\t\t\t\t></input>\r\n\t\t\t\t\t\t<label className=\"edit-user-label\">New Password</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"Password\"\r\n\t\t\t\t\t\t\tname=\"newPassword\"\r\n\t\t\t\t\t\t\tplaceholder=\"********\"\r\n\t\t\t\t\t\t\tid=\"newPassword_field\"\r\n\t\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\t\tclassName=\"edit-user-input\"\r\n\t\t\t\t\t\t></input>\r\n\t\t\t\t\t\t<label className=\"edit-user-label\">Confirm Password</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tname=\"passwordConfirm\"\r\n\t\t\t\t\t\t\tplaceholder=\"********\"\r\n\t\t\t\t\t\t\tid=\"passwordConfirm_field\"\r\n\t\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\t\tclassName=\"edit-user-input\"\r\n\t\t\t\t\t\t></input>\r\n\t\t\t\t\t\t<button type=\"submit\" className=\"login-form__submit\">\r\n\t\t\t\t\t\t\t{!isLoading ? <p>Update</p> : <Loader />}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default EditUserProfile;\r\n","import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport AwesomeDebouncePromise from \"awesome-debounce-promise\";\r\nimport { FcSearch as SearchIcon } from \"react-icons/fc\";\r\nimport { FaRegSadTear as SadIcon } from \"react-icons/fa\";\r\n\r\nimport { UserInfoSmall } from \"./likesArray\";\r\n\r\nconst SearchUsers = () => {\r\n\tconst [users, setUsers] = useState([]);\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst [text, setText] = useState(\"\");\r\n\r\n\tconst asyncFunction = async (value) => {\r\n\t\ttry {\r\n\t\t\tconst url = \"/api/v1/users/search\";\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tsearch: value,\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t\tsetUsers(res.data.data.users);\r\n\t\t\tsetLoading(false);\r\n\t\t} catch (err) {\r\n\t\t\tif (err.response.status === 400) {\r\n\t\t\t\tsetUsers([\"1\"]);\r\n\t\t\t} else {\r\n\t\t\t\tsetUsers([]);\r\n\t\t\t}\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst asyncFunctionDebounced = AwesomeDebouncePromise(asyncFunction, 800);\r\n\r\n\tconst handleTextChange = async (e) => {\r\n\t\te.preventDefault();\r\n\r\n\t\tsetLoading(true);\r\n\t\tsetUsers([\"1\"]);\r\n\t\tsetText(e.target.value);\r\n\t\tawait asyncFunctionDebounced(e.target.value);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"searchUsers\">\r\n\t\t\t<h3>Search Users</h3>\r\n\t\t\t<div className=\"searchUser-bar\">\r\n\t\t\t\t<div className=\"searchUser-bar__icon\">\r\n\t\t\t\t\t<SearchIcon />\r\n\t\t\t\t</div>\r\n\t\t\t\t<input\r\n\t\t\t\t\tname=\"search\"\r\n\t\t\t\t\tonChange={handleTextChange}\r\n\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\tclassName=\"searchUser-bar__input\"\r\n\t\t\t\t\tplaceholder=\"Search Users\"\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"searchUsers-results\">\r\n\t\t\t\t{!!text &&\r\n\t\t\t\t\t(!!users.length ? (\r\n\t\t\t\t\t\t!loading ? (\r\n\t\t\t\t\t\t\tusers.map((user) => <UserInfoSmall user={user} key={user._id} />)\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<div className=\"search-loader\"></div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<div className=\"search-not-found\">\r\n\t\t\t\t\t\t\t<SadIcon />\r\n\t\t\t\t\t\t\t<p>No users found.</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default SearchUsers;\r\n","import React from \"react\";\r\nimport { history } from \"../router/router\";\r\n\r\nconst PageNotFound = () => {\r\n\treturn (\r\n\t\t<div className=\"page-404\">\r\n\t\t\t<div className=\"page-404-content\">\r\n\t\t\t\t<h3>Page Not Found</h3>\r\n\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t<h2>404 Error</h2>\r\n\t\t\t\t\t<p>This page does not seem to exist :(</p>\r\n\t\t\t\t\t<button onClick={() => history.push(\"/\")}>Home</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default PageNotFound;\r\n","import React, { useEffect } from \"react\";\r\nimport { Router, Switch, Route } from \"react-router-dom\";\r\nimport { createBrowserHistory } from \"history\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport * as actions from \"../actions\";\r\n\r\nimport PrivateRoute from \"./PrivateRoute\";\r\nimport PublicRoute from \"./PublicRoute\";\r\n\r\nimport Timeline from \"../components/Timeline\";\r\nimport Trending from \"../components/TrendingPage\";\r\nimport NearbyPosts from \"../components/NearbyPosts\";\r\nimport LoginForm from \"../components/Login\";\r\nimport SignupForm from \"../components/Signup\";\r\nimport PostDetail from \"../components/PostDetails\";\r\nimport UserProfile from \"../components/UserProfile\";\r\nimport CreatePost from \"../components/CreatePost\";\r\nimport EditUserProfile from \"../components/EditUserProfile\";\r\nimport SearchUsers from \"../components/SearchUsers\";\r\nimport PageNotFound from \"../components/PageNotFound\";\r\nimport PageLoader from \"../components/PageLoader\";\r\n\r\nexport const history = createBrowserHistory();\r\n\r\nconst AppRouter = (props) => {\r\n\t// Fetch initial states\r\n\tuseEffect(() => {\r\n\t\tprops.isLoggedIn();\r\n\t\tprops.fetchTimeline();\r\n\t\tprops.fetchTrending();\r\n\t}, []);\r\n\r\n\treturn !props.loading ? (\r\n\t\t<Router history={history}>\r\n\t\t\t<Switch>\r\n\t\t\t\t<PublicRoute path=\"/login\" component={LoginForm} />\r\n\t\t\t\t<PublicRoute path=\"/signup\" component={SignupForm} />\r\n\r\n\t\t\t\t<PrivateRoute path=\"/\" component={Timeline} exact={true} />\r\n\t\t\t\t<PrivateRoute path=\"/trending\" component={Trending} exact={true} />\r\n\t\t\t\t<PrivateRoute path=\"/post/create\" component={CreatePost} exact={true} />\r\n\t\t\t\t<PrivateRoute\r\n\t\t\t\t\tpath=\"/post/:postId\"\r\n\t\t\t\t\tcomponent={PostDetail}\r\n\t\t\t\t\texact={true}\r\n\t\t\t\t/>\r\n\t\t\t\t<PrivateRoute\r\n\t\t\t\t\tpath=\"/post/nearby/:center\"\r\n\t\t\t\t\tcomponent={NearbyPosts}\r\n\t\t\t\t\texact={true}\r\n\t\t\t\t/>\r\n\t\t\t\t<PrivateRoute path=\"/update\" component={EditUserProfile} exact={true} />\r\n\t\t\t\t<PrivateRoute\r\n\t\t\t\t\tpath=\"/searchUsers\"\r\n\t\t\t\t\tcomponent={SearchUsers}\r\n\t\t\t\t\texact={true}\r\n\t\t\t\t/>\r\n\t\t\t\t<PrivateRoute\r\n\t\t\t\t\tpath=\"/user/:username\"\r\n\t\t\t\t\tcomponent={UserProfile}\r\n\t\t\t\t\texact={true}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<Route path=\"/\" component={PageNotFound} />\r\n\t\t\t</Switch>\r\n\t\t</Router>\r\n\t) : (\r\n\t\t<PageLoader />\r\n\t);\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\tisLoggedIn: () => dispatch(actions.getAuthToken()),\r\n\tfetchTimeline: () => dispatch(actions.fetchMyTimeline()),\r\n\tfetchTrending: () => dispatch(actions.fetchTrendingPosts()),\r\n});\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tuser: state.auth.user,\r\n\tloading: state.auth.loading,\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AppRouter);\r\n","export const getAuthToken = () => ({\r\n\ttype: \"FETCH_AUTH_TOKEN\",\r\n});\r\n\r\nexport const fetchMyTimeline = () => ({\r\n\ttype: \"FETCH_TIMELINE\",\r\n});\r\n\r\nexport const fetchTrendingPosts = () => ({\r\n\ttype: \"FETCH_TRENDING\",\r\n});\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\n\r\nimport store from \"./store\";\r\n\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nimport AppRouter from \"./router/router\";\r\n\r\nimport \"./styles/index.scss\";\r\n\r\nconst jsx = (\r\n\t<Provider store={store}>\r\n\t\t<ToastContainer\r\n\t\t\tposition=\"top-right\"\r\n\t\t\tautoClose={5000}\r\n\t\t\thideProgressBar={false}\r\n\t\t\tnewestOnTop={true}\r\n\t\t\tcloseOnClick\r\n\t\t\trtl={false}\r\n\t\t\tpauseOnFocusLoss\r\n\t\t\tdraggable\r\n\t\t\tpauseOnHover\r\n\t\t/>\r\n\t\t<AppRouter />\r\n\t</Provider>\r\n);\r\n\r\nReactDOM.render(jsx, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}