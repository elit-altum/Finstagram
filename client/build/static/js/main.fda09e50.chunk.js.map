{"version":3,"sources":["reducers/authReducer.js","reducers/userReducer.js","reducers/timelineReducer.js","sagas/api/index.js","sagas/index.js","store/index.js","components/Layout.js","components/Header.js","router/PrivateRoute.js","router/PublicRoute.js","components/NotFound.js","components/PageLoader.js","components/likesArray.js","components/Post.js","components/Timeline.js","components/Loader.js","components/Login.js","components/Signup.js","components/Comment.js","components/Comments.js","components/PostDetails.js","components/UserProfile.js","components/CreatePost.js","components/EditUserProfile.js","components/SearchUsers.js","components/PageNotFound.js","router/router.js","actions/index.js","index.js"],"names":["initialState","loading","user","reducer","state","action","type","follows","followers","posts","isLoggedIn","axios","get","getTimeline","fetchAuthToken","fetchTimeline","actionWatcher","rootSaga","call","api","res","put","data","takeLatest","all","sagaMiddleware","createSagaMiddleware","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","combineReducers","auth","authReducer","userReducer","timeline","timelineReducer","applyMiddleware","run","mySaga","Layout","props","className","children","connect","dispatch","logoutUser","clearTimeline","logout","a","url","method","toast","success","autoClose","pauseOnHover","error","Msg","username","toUpperCase","onClick","history","push","to","src","photo","alt","Component","component","rest","UserCard","name","NotFound","message","useState","randomUsers","setRandomUsers","fetchRandomUsers","users","length","map","key","id","viewBox","cx","cy","r","fill","strokeWidth","UserInfoSmall","LikesArray","likes","like","likedBy","_id","Post","post","likedByMe","isLiked","setIsLiked","setLikes","isLikeModalOpen","setIsLikeModalOpen","allLikes","setAllLikes","showLikes","likers","createLike","removeLike","handleLike","likedCopy","createdBy","onDoubleClick","style","color","caption","comments","date","givenDate","Date","setHours","0","86400000","now","toLocaleDateString","year","month","day","getTime","createdAt","isOpen","onRequestClose","ariaHideApp","contentLabel","closeTimeoutMS","defaultProps","dimensions","updatedAt","__v","PageLoader","title","putToken","isLoading","setIsLoading","sendFormData","e","preventDefault","document","getElementById","value","password","response","onSubmit","required","placeholder","disabled","Loader","email","passwordConfirm","class","Comment","comment","removeComment","isUser","body","Comments","setComments","createComment","concat","commentId","newArray","filter","useEffect","fetchComments","PostDetails","postId","useParams","setPost","fetchPost","results","notMe","setUser","setPosts","isModalOpen","setIsModalOpen","usersArray","setUsersArray","openModal","followUser","newFollowersCount","followersCount","followedByMe","console","log","unfollowUser","fetchUser","fetchFollows","fetchFollowers","postsCount","followCount","CreatePost","uploaded","setUploaded","form","FormData","append","files","setTimeout","accept","onChange","htmlFor","EditUserProfile","uploadedText","setUploadedText","sendUpdateData","location","reload","sendPasswordData","oldPassword","newPassword","confirmPassword","defaultValue","marginTop","SearchUsers","setUsers","setLoading","text","setText","asyncFunction","search","status","asyncFunctionDebounced","AwesomeDebouncePromise","handleTextChange","target","autoComplete","PageNotFound","createBrowserHistory","PublicRoute","path","LoginForm","SignupForm","Timeline","exact","PostDetail","UserProfile","jsx","position","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","ReactDOM","render"],"mappings":"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","file":"static/js/main.fda09e50.chunk.js","sourcesContent":["const initialState = {\r\n\tloading: true,\r\n\tuser: false,\r\n};\r\n\r\nconst reducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase \"FETCH_AUTH_TOKEN\":\r\n\t\t\treturn { ...state, loading: true };\r\n\t\tcase \"PUT_TOKEN\":\r\n\t\t\treturn { ...state, user: action.user, loading: false };\r\n\t\tcase \"USER_NOT_FOUND\":\r\n\t\t\treturn { ...state, user: false, loading: false };\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n\r\nexport default reducer;\r\n","const reducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase \"FETCH_USER\":\r\n\t\t\treturn { ...state, loading: true };\r\n\t\tcase \"PUT_USER\":\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tuser: action.user,\r\n\t\t\t\tfollows: action.follows,\r\n\t\t\t\tfollowers: action.followers,\r\n\t\t\t\tloading: false,\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n\r\nexport default reducer;\r\n","const reducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase \"FETCH_TIMELINE\":\r\n\t\t\treturn { ...state, loading: true };\r\n\t\tcase \"PUT_TIMELINE\":\r\n\t\t\treturn { ...state, posts: action.posts, loading: false };\r\n\t\tcase \"CLEAR_TIMELINE\":\r\n\t\t\treturn { ...state, posts: [], loading: false };\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n\r\nexport default reducer;\r\n","import axios from \"axios\";\r\n\r\n// ? 01. CHECK IF USER IS AUTHENTICATED\r\nexport function isLoggedIn() {\r\n\treturn axios.get(\"/api/v1/users/isLoggedIn\");\r\n}\r\n\r\n// ? 02. FETCH POSTS OF USER\r\nexport function getTimeline() {\r\n\treturn axios.get(\"/api/v1/posts/feed\");\r\n}\r\n","import { put, takeLatest, all, call } from \"redux-saga/effects\";\r\nimport * as api from \"./api\";\r\n\r\n// ? 01. GET USER TOKEN\r\nfunction* fetchAuthToken() {\r\n\ttry {\r\n\t\tconst res = yield call(api.isLoggedIn);\r\n\t\tyield put({ type: \"PUT_TOKEN\", user: res.data.data.user });\r\n\t} catch (e) {\r\n\t\tyield put({ type: \"USER_NOT_FOUND\" });\r\n\t}\r\n}\r\n\r\n// ? 02. GET USER TIMELINE\r\nfunction* fetchTimeline() {\r\n\ttry {\r\n\t\tconst res = yield call(api.getTimeline);\r\n\t\tyield put({ type: \"PUT_TIMELINE\", posts: res.data.data.posts });\r\n\t} catch (e) {}\r\n}\r\n\r\nfunction* actionWatcher() {\r\n\tyield takeLatest(\"FETCH_AUTH_TOKEN\", fetchAuthToken);\r\n\tyield takeLatest(\"FETCH_TIMELINE\", fetchTimeline);\r\n}\r\n\r\nexport default function* rootSaga() {\r\n\tyield all([actionWatcher()]);\r\n}\r\n","// Configuring redux and redux-saga for global state management\r\nimport { createStore, applyMiddleware, combineReducers, compose } from \"redux\";\r\nimport createSagaMiddleware from \"redux-saga\";\r\n\r\nimport authReducer from \"../reducers/authReducer\";\r\nimport userReducer from \"../reducers/userReducer\";\r\nimport timelineReducer from \"../reducers/timelineReducer\";\r\n\r\nimport mySaga from \"../sagas\";\r\n\r\n// Create the saga middleware\r\nconst sagaMiddleware = createSagaMiddleware();\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\n// Mount it on the Store\r\nconst store = createStore(\r\n\tcombineReducers({\r\n\t\tauth: authReducer,\r\n\t\tuser: userReducer,\r\n\t\ttimeline: timelineReducer,\r\n\t}),\r\n\tcomposeEnhancers(applyMiddleware(sagaMiddleware))\r\n);\r\n\r\nexport default store;\r\n\r\n// Run the saga\r\nsagaMiddleware.run(mySaga);\r\n","import React from \"react\";\r\n\r\nconst Layout = (props) => <div className=\"layout\">{props.children}</div>;\r\n\r\nexport default Layout;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { history } from \"../router/router\";\r\n\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst Header = ({ user, logoutUser, clearTimeline }) => {\r\n\tconst logout = async () => {\r\n\t\tconst url = \"/api/v1/users/logout\";\r\n\t\ttry {\r\n\t\t\tawait axios({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t});\r\n\t\t\ttoast.success(\"Logged out successfully!\", {\r\n\t\t\t\tautoClose: 2000,\r\n\t\t\t\tpauseOnHover: false,\r\n\t\t\t});\r\n\t\t\tlogoutUser();\r\n\t\t\tclearTimeline();\r\n\t\t} catch (err) {\r\n\t\t\ttoast.error(\"Error logging out. Please try again later.\");\r\n\t\t}\r\n\t};\r\n\r\n\tconst Msg = ({ user }) => (\r\n\t\t<div className=\"header-toast\">\r\n\t\t\t<p>{user.username.toUpperCase()}</p>\r\n\t\t\t<button className=\"header-toast-logout\" onClick={logout}>\r\n\t\t\t\tLogout\r\n\t\t\t</button>\r\n\t\t\t<button onClick={() => history.push(`/user/${user.username}`)}>\r\n\t\t\t\tMy Profile\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t);\r\n\r\n\treturn (\r\n\t\t<header>\r\n\t\t\t<nav className=\"header\">\r\n\t\t\t\t<div className=\"header-content\">\r\n\t\t\t\t\t<div className=\"header-logo\">\r\n\t\t\t\t\t\t<Link to=\"/\">Finstagram</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<ul className=\"header-navLinks\">\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\tsrc={user.photo}\r\n\t\t\t\t\t\t\t\talt={`${user.username}'s profile`}\r\n\t\t\t\t\t\t\t\tclassName=\"header-profile\"\r\n\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\ttoast(<Msg user={user} />, {\r\n\t\t\t\t\t\t\t\t\t\tautoClose: 10000,\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t</nav>\r\n\t\t</header>\r\n\t);\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\tlogoutUser: () => dispatch({ type: \"USER_NOT_FOUND\" }),\r\n\tclearTimeline: () => dispatch({ type: \"CLEAR_TIMELINE\" }),\r\n});\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tuser: state.auth.user,\r\n\tloading: state.auth.loading,\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Header);\r\n","import React from \"react\";\r\nimport { Redirect, Route } from \"react-router-dom\";\r\n\r\nimport { connect } from \"react-redux\";\r\n\r\nimport Layout from \"../components/Layout\";\r\nimport Header from \"../components/Header\";\r\n\r\nconst PrivateRoute = ({ component: Component, user, loading, ...rest }) => {\r\n\treturn (\r\n\t\t<Route\r\n\t\t\t{...rest}\r\n\t\t\tcomponent={(props) =>\r\n\t\t\t\t!loading && user ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Header />\r\n\t\t\t\t\t\t<Layout>\r\n\t\t\t\t\t\t\t<Component {...props} user={user} />\r\n\t\t\t\t\t\t</Layout>\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Redirect to=\"/login\" />\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tuser: state.auth.user,\r\n\tloading: state.auth.loading,\r\n});\r\n\r\nexport default connect(mapStateToProps, null)(PrivateRoute);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect, Route } from \"react-router-dom\";\r\n\r\nimport Layout from \"../components/Layout\";\r\n\r\nconst PrivateRoute = ({ component: Component, user, loading, ...rest }) => {\r\n\treturn (\r\n\t\t<Route\r\n\t\t\t{...rest}\r\n\t\t\tcomponent={(props) =>\r\n\t\t\t\t!user && !loading ? (\r\n\t\t\t\t\t<Layout>\r\n\t\t\t\t\t\t<Component {...props} />\r\n\t\t\t\t\t</Layout>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Redirect to=\"/\" />\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tuser: state.auth.user,\r\n\tloading: state.auth.loading,\r\n});\r\n\r\nexport default connect(mapStateToProps, null)(PrivateRoute);\r\n","import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { FaRegSadTear as SadIcon } from \"react-icons/fa\";\r\n\r\nimport { history } from \"../router/router\";\r\n\r\nconst UserCard = ({ user }) => {\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName=\"discover__userCard\"\r\n\t\t\tonClick={() => history.push(`/user/${user.username}`)}\r\n\t\t>\r\n\t\t\t<img src={user.photo} alt=\"User profile\" />\r\n\t\t\t<h3>{user.username}</h3>\r\n\t\t\t<p>{user.name}</p>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst NotFound = ({ message }) => {\r\n\tconst [randomUsers, setRandomUsers] = useState([]);\r\n\tconst fetchRandomUsers = async () => {\r\n\t\ttry {\r\n\t\t\tconst url = \"/api/v1/users/random\";\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t});\r\n\t\t\tsetRandomUsers(res.data.data.users);\r\n\t\t} catch (err) {}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"not-found-container\">\r\n\t\t\t<div className=\"not-found__icon\">\r\n\t\t\t\t<SadIcon />\r\n\t\t\t</div>\r\n\t\t\t<h2 className=\"not-found__message\">{message}</h2>\r\n\t\t\t<button className=\"discover__button\" onClick={fetchRandomUsers}>\r\n\t\t\t\tFind People\r\n\t\t\t</button>\r\n\t\t\t{!!randomUsers.length && (\r\n\t\t\t\t<div className=\"discover__users\">\r\n\t\t\t\t\t{randomUsers.map((user) => (\r\n\t\t\t\t\t\t<UserCard user={user} key={user.id} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default NotFound;\r\n","import React from \"react\";\r\n\r\nexport default () => {\r\n\treturn (\r\n\t\t<div id=\"wrapper\">\r\n\t\t\t<div className=\"profile-main-loader\">\r\n\t\t\t\t<div className=\"loader\">\r\n\t\t\t\t\t<svg className=\"circular-loader\" viewBox=\"25 25 50 50\">\r\n\t\t\t\t\t\t<circle\r\n\t\t\t\t\t\t\tclassName=\"loader-path\"\r\n\t\t\t\t\t\t\tcx=\"50\"\r\n\t\t\t\t\t\t\tcy=\"50\"\r\n\t\t\t\t\t\t\tr=\"20\"\r\n\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\tstrokeWidth=\"2\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React from \"react\";\r\n\r\nimport { history } from \"../router/router\";\r\n\r\nexport const UserInfoSmall = ({ user }) => {\r\n\treturn (\r\n\t\t<div className=\"like-modal__item\">\r\n\t\t\t<div className=\"like-modal__item--profile\">\r\n\t\t\t\t<img src={`${user.photo}`} alt={`${user.username}'s profile`} />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"like-modal__item--names\">\r\n\t\t\t\t<p\r\n\t\t\t\t\tclassName=\"like-modal__item--username\"\r\n\t\t\t\t\tonClick={() => history.push(`/user/${user.username}`)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{user.username}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p className=\"like-modal__item--name\">{user.name}</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst LikesArray = ({ likes }) => {\r\n\treturn (\r\n\t\t<div className=\"like-modal__list\">\r\n\t\t\t<h3>Liked By</h3>\r\n\t\t\t{likes.map((like) => (\r\n\t\t\t\t<UserInfoSmall user={like.likedBy} key={like._id} />\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default LikesArray;\r\n","import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport Modal from \"react-modal\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport LikesArray from \"./likesArray\";\r\n\r\nimport { history } from \"../router/router\";\r\n\r\nimport {\r\n\tAiOutlineHeart as HeartOutline,\r\n\tAiFillHeart as HeartFill,\r\n} from \"react-icons/ai\";\r\nimport { AiOutlineComment as CommentOutline } from \"react-icons/ai\";\r\n\r\nconst Post = ({ post }) => {\r\n\tconst [isLiked, setIsLiked] = useState(post.likedByMe);\r\n\tconst [likes, setLikes] = useState(post.likes * 1);\r\n\tconst [isLikeModalOpen, setIsLikeModalOpen] = useState(false);\r\n\tconst [allLikes, setAllLikes] = useState([]);\r\n\r\n\tconst openLikeModal = () => {\r\n\t\tsetIsLikeModalOpen(true);\r\n\t};\r\n\r\n\tconst closeLikeModal = () => {\r\n\t\tsetIsLikeModalOpen(false);\r\n\t};\r\n\r\n\tconst showLikes = async () => {\r\n\t\tconst url = `/api/v1/posts/${post.id}/likedBy`;\r\n\t\ttry {\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t});\r\n\t\t\tsetAllLikes(res.data.data.likers);\r\n\t\t} catch (err) {}\r\n\t\topenLikeModal();\r\n\t};\r\n\r\n\tconst getTime = (date) => {\r\n\t\tconst givenDate = new Date(date).setHours(0, 0, 0, 0);\r\n\t\tconst today = new Date(Date.now()).setHours(0, 0, 0, 0);\r\n\r\n\t\tconst difference = today - givenDate;\r\n\r\n\t\tconst dateObj = {\r\n\t\t\t0: \"Today\",\r\n\t\t\t86400000: \"Yesterday\",\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\tdateObj[difference] ||\r\n\t\t\tnew Date(date).toLocaleDateString(\"en-us\", {\r\n\t\t\t\tyear: \"numeric\",\r\n\t\t\t\tmonth: \"long\",\r\n\t\t\t\tday: \"numeric\",\r\n\t\t\t})\r\n\t\t);\r\n\t};\r\n\r\n\tconst createLike = async () => {\r\n\t\tconst url = `/api/v1/posts/${post.id}/like`;\r\n\t\ttry {\r\n\t\t\tawait axios({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t});\r\n\t\t} catch (err) {\r\n\t\t\t// console.log(err.response);\r\n\t\t\tsetIsLiked(!isLiked);\r\n\t\t}\r\n\t};\r\n\r\n\tconst removeLike = async () => {\r\n\t\tconst url = `/api/v1/posts/${post.id}/unlike`;\r\n\t\ttry {\r\n\t\t\tawait axios({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t});\r\n\t\t} catch (err) {\r\n\t\t\t// console.log(err.response);\r\n\t\t\tsetIsLiked(!isLiked);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleLike = async () => {\r\n\t\tconst likedCopy = isLiked;\r\n\t\tsetIsLiked(!isLiked);\r\n\r\n\t\tif (likedCopy) {\r\n\t\t\tsetLikes(likes - 1);\r\n\t\t\tawait removeLike();\r\n\t\t} else {\r\n\t\t\tsetLikes(likes + 1);\r\n\t\t\tawait createLike();\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t!!post.id && (\r\n\t\t\t<div className=\"postCard\">\r\n\t\t\t\t<div className=\"postCard__userInfo\">\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tsrc={post.createdBy.photo}\r\n\t\t\t\t\t\talt={`${post.createdBy.username}'s profile`}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<p onClick={() => history.push(`/user/${post.createdBy.username}`)}>\r\n\t\t\t\t\t\t{post.createdBy.username}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"postCard__image\">\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tsrc={post.photo}\r\n\t\t\t\t\t\talt={`${post.createdBy.username}'s post`}\r\n\t\t\t\t\t\tonDoubleClick={handleLike}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"postCard__meta\">\r\n\t\t\t\t\t<div className=\"postCard__meta--icons\">\r\n\t\t\t\t\t\t{isLiked ? (\r\n\t\t\t\t\t\t\t<HeartFill style={{ color: \"#b71c1c\" }} onClick={handleLike} />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<HeartOutline onClick={handleLike} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<Link to={`/post/${post.id}`}>\r\n\t\t\t\t\t\t\t<CommentOutline />\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{!!likes && (\r\n\t\t\t\t\t<p onClick={showLikes} className=\"postCard__likes\">\r\n\t\t\t\t\t\t{`${likes} ${likes === 1 ? \"like\" : \"likes\"}`}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t)}\r\n\t\t\t\t<div className=\"postCard__caption\">\r\n\t\t\t\t\t<p\r\n\t\t\t\t\t\tclassName=\"postCard__caption--username\"\r\n\t\t\t\t\t\tonClick={() => history.push(`/user/${post.createdBy.username}`)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{post.createdBy.username}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p className=\"postCard__caption--body\">{post.caption}</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t{!!post.comments && (\r\n\t\t\t\t\t<Link to={`/post/${post.id}`} className=\"postCard__comments\">\r\n\t\t\t\t\t\t<p>{`View ${post.comments} ${\r\n\t\t\t\t\t\t\tpost.comments === 1 ? \"comment\" : \"comments\"\r\n\t\t\t\t\t\t}`}</p>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t)}\r\n\t\t\t\t<p className=\"postCard__date\">{getTime(post.createdAt)}</p>\r\n\t\t\t\t<Modal\r\n\t\t\t\t\tisOpen={isLikeModalOpen}\r\n\t\t\t\t\tonRequestClose={closeLikeModal}\r\n\t\t\t\t\tariaHideApp={false}\r\n\t\t\t\t\tcontentLabel=\"Like Modal\"\r\n\t\t\t\t\tcloseTimeoutMS={200}\r\n\t\t\t\t\tclassName=\"modal\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<LikesArray likes={allLikes} />\r\n\t\t\t\t</Modal>\r\n\t\t\t</div>\r\n\t\t)\r\n\t);\r\n};\r\n\r\nexport default Post;\r\n\r\nPost.defaultProps = {\r\n\tpost: {\r\n\t\t_id: \"5edf5aec3561dd32206cecc1\",\r\n\t\tcaption: \"My Niece is good!\",\r\n\t\tphoto: \"/img/posts/post-5edf42f57e58a1049ca59e8a-1591696108114.jpg\",\r\n\t\tdimensions: \"1000 x 1000\",\r\n\t\tcreatedBy: {\r\n\t\t\tphoto: \"/img/user-profiles/default.png\",\r\n\t\t\t_id: \"5edf42f57e58a1049ca59e8a\",\r\n\t\t\tusername: \"jayantxk\",\r\n\t\t\tid: \"5edf42f57e58a1049ca59e8a\",\r\n\t\t},\r\n\t\tcreatedAt: \"2020-06-09T09:48:28.166Z\",\r\n\t\tupdatedAt: \"2020-06-09T09:48:28.166Z\",\r\n\t\t__v: 0,\r\n\t\tlikes: 21,\r\n\t\tcomments: 40,\r\n\t\tid: \"5edf5aec3561dd32206cecc1\",\r\n\t\tlikedByMe: false,\r\n\t},\r\n};\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { BsSearch as SearchIcon } from \"react-icons/bs\";\r\n\r\nimport NotFound from \"./NotFound\";\r\nimport PageLoader from \"./PageLoader\";\r\nimport Post from \"./Post\";\r\n\r\nimport { history } from \"../router/router\";\r\n\r\nconst Timeline = ({ posts, loading }) => {\r\n\treturn (\r\n\t\t<div className=\"my-timeline\">\r\n\t\t\t{!loading ? (\r\n\t\t\t\t!!posts.length ? (\r\n\t\t\t\t\tposts.map((post) => <Post post={post} key={post.id} />)\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div className=\"no-posts\">\r\n\t\t\t\t\t\t<NotFound\r\n\t\t\t\t\t\t\tmessage={\r\n\t\t\t\t\t\t\t\t\"No posts found. Please follow users to view a timeline.\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t) : (\r\n\t\t\t\t<PageLoader />\r\n\t\t\t)}\r\n\t\t\t<div className=\"cta-buttons\">\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"searchUsers-button\"\r\n\t\t\t\t\tonClick={() => history.push(\"/searchUsers\")}\r\n\t\t\t\t\ttitle=\"Search Users\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<SearchIcon />\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tposts: state.timeline.posts,\r\n\tloading: state.timeline.loading,\r\n});\r\n\r\nexport default connect(mapStateToProps, null)(Timeline);\r\n","import React from \"react\";\r\n\r\nexport default () => {\r\n\treturn (\r\n\t\t<div className=\"loader\">\r\n\t\t\t<div className=\"loader__outer\"></div>\r\n\t\t\t<div className=\"loader__inner\"></div>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport Loader from \"./Loader\";\r\n\r\nconst LoginForm = ({ putToken, fetchTimeline }) => {\r\n\tconst [isLoading, setIsLoading] = useState(false);\r\n\r\n\tconst sendFormData = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tsetIsLoading(true);\r\n\t\tconst username = document.getElementById(\"username_field\").value;\r\n\t\tconst password = document.getElementById(\"password_field\").value;\r\n\r\n\t\ttry {\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl: \"/api/v1/users/login\",\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tusername,\r\n\t\t\t\t\tpassword,\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t\ttoast.success(\"Logged in successfully!\", {\r\n\t\t\t\tautoClose: 2000,\r\n\t\t\t});\r\n\t\t\tputToken(res.data.data.user);\r\n\t\t\tfetchTimeline();\r\n\t\t} catch (err) {\r\n\t\t\tsetIsLoading(false);\r\n\t\t\ttoast.error(`Error: ${err.response.data.data.error.message}`);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"login-page\">\r\n\t\t\t<div className=\"login-form-container\">\r\n\t\t\t\t<h2>Finstagram</h2>\r\n\t\t\t\t<form onSubmit={sendFormData} className=\"login-form\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\tplaceholder=\"username\"\r\n\t\t\t\t\t\tid=\"username_field\"\r\n\t\t\t\t\t></input>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\tplaceholder=\"********\"\r\n\t\t\t\t\t\tid=\"password_field\"\r\n\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t></input>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tclassName=\"login-form__submit\"\r\n\t\t\t\t\t\tdisabled={isLoading}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{!isLoading ? <p>Submit</p> : <Loader />}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</form>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tNo account? <Link to=\"/signup\">Sign up</Link>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\tputToken: (user) => dispatch({ type: \"PUT_TOKEN\", user }),\r\n\tfetchTimeline: () => dispatch({ type: \"FETCH_TIMELINE\" }),\r\n});\r\n\r\nexport default connect(null, mapDispatchToProps)(LoginForm);\r\n","import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport Loader from \"./Loader\";\r\n\r\nconst Signup = ({ putToken, fetchTimeline }) => {\r\n\tconst [isLoading, setIsLoading] = useState(false);\r\n\r\n\tconst sendFormData = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tsetIsLoading(true);\r\n\t\tconst username = document.getElementById(\"username_field\").value;\r\n\t\tconst name = document.getElementById(\"name_field\").value;\r\n\t\tconst email = document.getElementById(\"email_field\").value;\r\n\t\tconst password = document.getElementById(\"password_field\").value;\r\n\t\tconst passwordConfirm = document.getElementById(\"passwordConfirm_field\")\r\n\t\t\t.value;\r\n\r\n\t\ttry {\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl: \"/api/v1/users/signup\",\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tusername,\r\n\t\t\t\t\tname,\r\n\t\t\t\t\temail,\r\n\t\t\t\t\tpassword,\r\n\t\t\t\t\tpasswordConfirm,\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t\ttoast.success(\"New account created!\", {\r\n\t\t\t\tautoClose: 2000,\r\n\t\t\t});\r\n\t\t\tputToken(res.data.data.user);\r\n\t\t\tfetchTimeline();\r\n\t\t} catch (err) {\r\n\t\t\tsetIsLoading(false);\r\n\t\t\ttoast.error(`Error: ${err.response.data.data.error.message}`);\r\n\t\t}\r\n\t};\r\n\treturn (\r\n\t\t<div className=\"login-page\">\r\n\t\t\t<div className=\"login-form-container\">\r\n\t\t\t\t<h2>Finstagram</h2>\r\n\t\t\t\t<form onSubmit={sendFormData} class=\"login-form\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\tplaceholder=\"Username\"\r\n\t\t\t\t\t\tid=\"username_field\"\r\n\t\t\t\t\t></input>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\tplaceholder=\"Name\"\r\n\t\t\t\t\t\tid=\"name_field\"\r\n\t\t\t\t\t></input>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\tplaceholder=\"Email Address\"\r\n\t\t\t\t\t\tid=\"email_field\"\r\n\t\t\t\t\t></input>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\tplaceholder=\"********\"\r\n\t\t\t\t\t\tid=\"password_field\"\r\n\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t></input>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tname=\"passwordConfirm\"\r\n\t\t\t\t\t\tplaceholder=\"********\"\r\n\t\t\t\t\t\tid=\"passwordConfirm_field\"\r\n\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t></input>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tclassName=\"login-form__submit\"\r\n\t\t\t\t\t\tdisabled={isLoading}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{!isLoading ? <p>Submit</p> : <Loader />}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\tputToken: (user) => dispatch({ type: \"PUT_TOKEN\", user }),\r\n\tfetchTimeline: () => dispatch({ type: \"FETCH_TIMELINE\" }),\r\n});\r\n\r\nexport default connect(null, mapDispatchToProps)(Signup);\r\n","import React from \"react\";\r\nimport { AiFillDelete as DeleteIcon } from \"react-icons/ai\";\r\n\r\nimport { history } from \"../router/router\";\r\n\r\nconst Comment = ({ comment, user, removeComment }) => {\r\n\tconst isUser = user.id === comment.createdBy.id;\r\n\treturn (\r\n\t\t<div className=\"comment\">\r\n\t\t\t<div className=\"comment--meta\">\r\n\t\t\t\t<img\r\n\t\t\t\t\tsrc={comment.createdBy.photo}\r\n\t\t\t\t\talt={`${comment.createdBy.username}'s profile`}\r\n\t\t\t\t/>\r\n\t\t\t\t<p\r\n\t\t\t\t\tclassName=\"comment--username\"\r\n\t\t\t\t\tonClick={() => history.push(`/user/${comment.createdBy.username}`)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{comment.createdBy.username}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p className=\"comment--body\">{comment.body}</p>\r\n\t\t\t</div>\r\n\t\t\t{!!isUser && (\r\n\t\t\t\t<div className=\"comment--delete\">\r\n\t\t\t\t\t<DeleteIcon\r\n\t\t\t\t\t\tonClick={() => removeComment(comment._id)}\r\n\t\t\t\t\t\ttitle=\"Delete Comment\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Comment;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport Comment from \"./Comment\";\r\n\r\nimport { AiOutlineSend as SendIcon } from \"react-icons/ai\";\r\n\r\nconst Comments = ({ id, user }) => {\r\n\tconst [comments, setComments] = useState([]);\r\n\r\n\tconst createComment = async (e) => {\r\n\t\te.preventDefault();\r\n\t\ttry {\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl: `/api/v1/posts/${id}/comments`,\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tcomment: document.getElementById(\"comment-field\").value,\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t\tdocument.getElementById(\"comment-field\").value = \"\";\r\n\t\t\tsetComments(comments.concat([res.data.data.comment]));\r\n\t\t} catch (err) {}\r\n\t};\r\n\r\n\tconst removeComment = async (commentId) => {\r\n\t\ttry {\r\n\t\t\tawait axios({\r\n\t\t\t\turl: `/api/v1/posts/${id}/comment/${commentId}`,\r\n\t\t\t\tmethod: \"DELETE\",\r\n\t\t\t});\r\n\t\t\tconst newArray = comments.filter((comment) => comment._id !== commentId);\r\n\t\t\tsetComments(newArray);\r\n\t\t} catch (err) {}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchComments = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await axios({\r\n\t\t\t\t\turl: `/api/v1/posts/${id}/comments`,\r\n\t\t\t\t\tmethod: \"GET\",\r\n\t\t\t\t});\r\n\t\t\t\tsetComments(res.data.data.comments);\r\n\t\t\t} catch (err) {}\r\n\t\t};\r\n\t\tfetchComments();\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className=\"commentArray\">\r\n\t\t\t<h3>Comments</h3>\r\n\t\t\t<div className=\"commentsArray-list\">\r\n\t\t\t\t{comments.map((comment) => (\r\n\t\t\t\t\t<Comment\r\n\t\t\t\t\t\tcomment={comment}\r\n\t\t\t\t\t\tkey={comment._id}\r\n\t\t\t\t\t\tuser={user}\r\n\t\t\t\t\t\tremoveComment={removeComment}\r\n\t\t\t\t\t/>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"createComment-form\">\r\n\t\t\t\t<form onSubmit={createComment}>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"comment\"\r\n\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\tid=\"comment-field\"\r\n\t\t\t\t\t\tplaceholder=\"Add Comment\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<button type=\"submit\">\r\n\t\t\t\t\t\t<SendIcon />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Comments;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport Modal from \"react-modal\";\r\n\r\nimport { history } from \"../router/router\";\r\n\r\nimport {\r\n\tAiOutlineHeart as HeartOutline,\r\n\tAiFillHeart as HeartFill,\r\n} from \"react-icons/ai\";\r\n\r\nimport PageLoader from \"./PageLoader\";\r\nimport Comments from \"./Comments\";\r\nimport LikesArray from \"./likesArray\";\r\n\r\nconst PostDetails = ({ user }) => {\r\n\tconst { postId } = useParams();\r\n\r\n\tconst [post, setPost] = useState({});\r\n\tconst [allLikes, setAllLikes] = useState();\r\n\r\n\tconst [isLiked, setIsLiked] = useState(post.likedByMe);\r\n\tconst [likes, setLikes] = useState(post.likes * 1);\r\n\tconst [isLikeModalOpen, setIsLikeModalOpen] = useState(false);\r\n\r\n\tconst fetchPost = async () => {\r\n\t\ttry {\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl: `/api/v1/posts/one/${postId}`,\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t});\r\n\t\t\tconst post = res.data.results.post;\r\n\t\t\tsetPost(post);\r\n\t\t\tsetIsLiked(post.likedByMe);\r\n\t\t\tsetLikes(post.likes * 1);\r\n\t\t} catch (err) {}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchPost();\r\n\t}, []);\r\n\r\n\tconst openLikeModal = () => {\r\n\t\tsetIsLikeModalOpen(true);\r\n\t};\r\n\r\n\tconst closeLikeModal = () => {\r\n\t\tsetIsLikeModalOpen(false);\r\n\t};\r\n\r\n\tconst showLikes = async () => {\r\n\t\tconst url = `/api/v1/posts/${postId}/likedBy`;\r\n\t\ttry {\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t});\r\n\t\t\tsetAllLikes(res.data.data.likers);\r\n\t\t\topenLikeModal();\r\n\t\t} catch (err) {}\r\n\t};\r\n\r\n\tconst getTime = (date) => {\r\n\t\tconst givenDate = new Date(date).setHours(0, 0, 0, 0);\r\n\t\tconst today = new Date(Date.now()).setHours(0, 0, 0, 0);\r\n\r\n\t\tconst difference = today - givenDate;\r\n\r\n\t\tconst dateObj = {\r\n\t\t\t0: \"Today\",\r\n\t\t\t86400000: \"Yesterday\",\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\tdateObj[difference] ||\r\n\t\t\tnew Date(date).toLocaleDateString(\"en-us\", {\r\n\t\t\t\tyear: \"numeric\",\r\n\t\t\t\tmonth: \"long\",\r\n\t\t\t\tday: \"numeric\",\r\n\t\t\t})\r\n\t\t);\r\n\t};\r\n\r\n\tconst createLike = async () => {\r\n\t\tconst url = `/api/v1/posts/${postId}/like`;\r\n\t\ttry {\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t});\r\n\t\t\t// console.log(res.data);\r\n\t\t} catch (err) {\r\n\t\t\tsetIsLiked(!isLiked);\r\n\t\t\t// console.log(err.response);\r\n\t\t}\r\n\t};\r\n\r\n\tconst removeLike = async () => {\r\n\t\tconst url = `/api/v1/posts/${postId}/unlike`;\r\n\t\ttry {\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t});\r\n\t\t\t// console.log(res.data);\r\n\t\t} catch (err) {\r\n\t\t\tsetIsLiked(!isLiked);\r\n\t\t\t// console.log(err.response);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleLike = async () => {\r\n\t\tconst likedCopy = isLiked;\r\n\t\tsetIsLiked(!isLiked);\r\n\r\n\t\tif (likedCopy) {\r\n\t\t\tsetLikes(likes - 1);\r\n\t\t\tawait removeLike();\r\n\t\t} else {\r\n\t\t\tsetLikes(likes + 1);\r\n\t\t\tawait createLike();\r\n\t\t}\r\n\t};\r\n\r\n\treturn !!post.id ? (\r\n\t\t<div className=\"postDetails\">\r\n\t\t\t<div className=\"postDetails--info\">\r\n\t\t\t\t<div className=\"postDetails--meta\">\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tsrc={post.createdBy.photo}\r\n\t\t\t\t\t\talt={`${post.createdBy.username}'s profile`}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<p\r\n\t\t\t\t\t\tclassName=\"postDetails--username\"\r\n\t\t\t\t\t\tonClick={() => history.push(`/user/${post.createdBy.username}`)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{post.createdBy.username}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"postDetails--image\">\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tsrc={post.photo}\r\n\t\t\t\t\t\talt={`${post.createdBy.username}'s post`}\r\n\t\t\t\t\t\tonDoubleClick={handleLike}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"postDetails__likes\">\r\n\t\t\t\t\t{isLiked ? (\r\n\t\t\t\t\t\t<HeartFill style={{ color: \"#b71c1c\" }} onClick={handleLike} />\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<HeartOutline onClick={handleLike} />\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{!!likes && (\r\n\t\t\t\t\t\t<p onClick={showLikes} className=\"postDetails__likes--count\">\r\n\t\t\t\t\t\t\t{`${likes} ${likes === 1 ? \"like\" : \"likes\"}`}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<p className=\"postCard__date\">{getTime(post.createdAt)}</p>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"postDetails--details\">\r\n\t\t\t\t<Comments id={postId} user={user} />\r\n\t\t\t</div>\r\n\t\t\t<Modal\r\n\t\t\t\tisOpen={isLikeModalOpen}\r\n\t\t\t\tonRequestClose={closeLikeModal}\r\n\t\t\t\tariaHideApp={false}\r\n\t\t\t\tcontentLabel=\"Like Modal\"\r\n\t\t\t\tcloseTimeoutMS={200}\r\n\t\t\t\tclassName=\"modal\"\r\n\t\t\t>\r\n\t\t\t\t<LikesArray likes={allLikes} />\r\n\t\t\t</Modal>\r\n\t\t</div>\r\n\t) : (\r\n\t\t<PageLoader />\r\n\t);\r\n};\r\n\r\nexport default PostDetails;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { connect } from \"react-redux\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport Modal from \"react-modal\";\r\n\r\nimport {\r\n\tAiOutlineHeart as HeartOutline,\r\n\tAiOutlineComment as CommentOutline,\r\n\tAiOutlinePlus as AddIcon,\r\n\tAiOutlineEdit as EditIcon,\r\n} from \"react-icons/ai\";\r\n\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport NotFound from \"./NotFound\";\r\nimport PageLoader from \"./PageLoader\";\r\nimport { UserInfoSmall } from \"./likesArray\";\r\n\r\nimport { history } from \"../router/router\";\r\n\r\nconst Post = ({ post }) => {\r\n\treturn (\r\n\t\t<div className=\"post-container\">\r\n\t\t\t<img\r\n\t\t\t\tsrc={post.photo}\r\n\t\t\t\tclassName=\"post-container__image\"\r\n\t\t\t\talt=\"My-Post\"\r\n\t\t\t\tonClick={() => history.push(`/post/${post.id}`)}\r\n\t\t\t/>\r\n\t\t\t<div className=\"post-container__details\">\r\n\t\t\t\t<div className=\"post-container__details--likes\">\r\n\t\t\t\t\t<HeartOutline />\r\n\t\t\t\t\t<p>{post.likes}</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"post-container__details--comments\">\r\n\t\t\t\t\t<CommentOutline />\r\n\t\t\t\t\t<p>{post.comments}</p>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst UserProfile = (props) => {\r\n\tconst { username } = useParams();\r\n\r\n\tconst notMe = props.user.username !== username;\r\n\r\n\tconst [user, setUser] = useState();\r\n\tconst [posts, setPosts] = useState();\r\n\r\n\tconst [isModalOpen, setIsModalOpen] = useState(false);\r\n\r\n\tconst [usersArray, setUsersArray] = useState([]);\r\n\r\n\tconst openModal = () => {\r\n\t\tsetIsModalOpen(true);\r\n\t};\r\n\r\n\tconst closeModal = () => {\r\n\t\tsetIsModalOpen(false);\r\n\t\tsetUsersArray([]);\r\n\t};\r\n\r\n\tconst followUser = async (username) => {\r\n\t\tlet newFollowersCount = user.followersCount + 1;\r\n\t\tsetUser({\r\n\t\t\t...user,\r\n\t\t\tfollowedByMe: true,\r\n\t\t\tfollowersCount: newFollowersCount,\r\n\t\t});\r\n\t\ttry {\r\n\t\t\tconst url = `/api/v1/users/${username}/follow`;\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t});\r\n\r\n\t\t\tprops.fetchTimeline();\r\n\t\t\ttoast.success(res.data.message, {\r\n\t\t\t\tautoClose: 5000,\r\n\t\t\t\tpauseOnHover: false,\r\n\t\t\t});\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err);\r\n\t\t\ttoast.success(err.response.data.error.message, {\r\n\t\t\t\tautoClose: 5000,\r\n\t\t\t\tpauseOnHover: false,\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst unfollowUser = async (username) => {\r\n\t\tlet newFollowersCount = user.followersCount - 1;\r\n\t\tsetUser({\r\n\t\t\t...user,\r\n\t\t\tfollowedByMe: false,\r\n\t\t\tfollowersCount: newFollowersCount,\r\n\t\t});\r\n\t\ttry {\r\n\t\t\tconst url = `/api/v1/users/${username}/unfollow`;\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t});\r\n\t\t\tprops.fetchTimeline();\r\n\t\t\ttoast.success(res.data.message, {\r\n\t\t\t\tautoClose: 5000,\r\n\t\t\t\tpauseOnHover: false,\r\n\t\t\t});\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err.response);\r\n\t\t\ttoast.success(err.response.data.error.message, {\r\n\t\t\t\tautoClose: 5000,\r\n\t\t\t\tpauseOnHover: false,\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst fetchUser = async () => {\r\n\t\ttry {\r\n\t\t\tconst url = `/api/v1/users/user/${username}`;\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t});\r\n\t\t\tsetUser(res.data.data.user);\r\n\t\t\tsetPosts(res.data.data.posts);\r\n\t\t} catch (err) {}\r\n\t};\r\n\r\n\tconst fetchFollows = async () => {\r\n\t\ttry {\r\n\t\t\tconst url = `/api/v1/users/${username}/follows`;\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t});\r\n\t\t\tsetUsersArray(res.data.data.user.follows);\r\n\t\t} catch (err) {}\r\n\t};\r\n\r\n\tconst fetchFollowers = async () => {\r\n\t\ttry {\r\n\t\t\tconst url = `/api/v1/users/${username}/followers`;\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t});\r\n\t\t\tsetUsersArray(res.data.data.followers);\r\n\t\t} catch (err) {}\r\n\t};\r\n\r\n\tconst showFollows = () => {\r\n\t\tfetchFollows();\r\n\t\topenModal();\r\n\t};\r\n\r\n\tconst showFollowers = () => {\r\n\t\tfetchFollowers();\r\n\t\topenModal();\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchUser();\r\n\t}, []);\r\n\r\n\treturn !!user && !!posts ? (\r\n\t\t<div className=\"user-page\">\r\n\t\t\t<div className=\"user-info\">\r\n\t\t\t\t<div className=\"user-profile\">\r\n\t\t\t\t\t<img src={user.photo} alt={`${user.username}'s profile`} />\r\n\t\t\t\t\t<p className=\"user-profile__name\">{user.name}</p>\r\n\t\t\t\t\t<p className=\"user-profile__username\">{user.username}</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"user-meta\">\r\n\t\t\t\t\t<div className=\"user-stats\">\r\n\t\t\t\t\t\t<div className=\"user-stats--posts\">\r\n\t\t\t\t\t\t\t<h3>{user.postsCount}</h3>\r\n\t\t\t\t\t\t\t<p>Posts</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName=\"user-stats--followers\"\r\n\t\t\t\t\t\t\tonClick={!!user.followersCount ? showFollowers : null}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<h3>{user.followersCount}</h3>\r\n\t\t\t\t\t\t\t<p>Followers</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName=\"user-stats--follows\"\r\n\t\t\t\t\t\t\tonClick={!!user.followCount ? showFollows : null}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<h3>{user.followCount}</h3>\r\n\t\t\t\t\t\t\t<p>Follows</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{!!notMe &&\r\n\t\t\t\t\t\t(user.followedByMe ? (\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"user-following-button\"\r\n\t\t\t\t\t\t\t\tonClick={() => unfollowUser(user.username)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tFollowing\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"user-follow-button\"\r\n\t\t\t\t\t\t\t\tonClick={() => followUser(user.username)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tFollow\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{!!posts.length ? (\r\n\t\t\t\t<div className=\"user-posts\">\r\n\t\t\t\t\t{posts.map((post) => (\r\n\t\t\t\t\t\t<Post post={post} key={post._id} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<NotFound message={\"No posts yet.\"} />\r\n\t\t\t)}\r\n\t\t\t{!!!notMe && (\r\n\t\t\t\t<div className=\"cta-buttons\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName=\"newPost-button\"\r\n\t\t\t\t\t\tonClick={() => history.push(\"/post/create\")}\r\n\t\t\t\t\t\ttitle=\"Create New Post\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<AddIcon />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName=\"editMe-button\"\r\n\t\t\t\t\t\tonClick={() => history.push(\"/update\")}\r\n\t\t\t\t\t\ttitle=\"Edit Details\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<EditIcon />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t\t<Modal\r\n\t\t\t\tisOpen={isModalOpen}\r\n\t\t\t\tonRequestClose={closeModal}\r\n\t\t\t\tariaHideApp={false}\r\n\t\t\t\tcontentLabel=\"Like Modal\"\r\n\t\t\t\tcloseTimeoutMS={200}\r\n\t\t\t\tclassName=\"modal\"\r\n\t\t\t>\r\n\t\t\t\t{usersArray.map((user) => (\r\n\t\t\t\t\t<UserInfoSmall\r\n\t\t\t\t\t\tuser={user.follows.name ? user.follows : user.user}\r\n\t\t\t\t\t\tkey={user._id}\r\n\t\t\t\t\t/>\r\n\t\t\t\t))}\r\n\t\t\t</Modal>\r\n\t\t</div>\r\n\t) : (\r\n\t\t<PageLoader />\r\n\t);\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\tfetchTimeline: () => dispatch({ type: \"FETCH_TIMELINE\" }),\r\n});\r\n\r\nexport default connect(null, mapDispatchToProps)(UserProfile);\r\n","import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nimport {\r\n\tBsFileEarmarkPlus as AddFileIcon,\r\n\tBsFileEarmarkCheck as UploadedFileIcon,\r\n} from \"react-icons/bs\";\r\n\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { history } from \"../router/router\";\r\nimport Loader from \"./Loader\";\r\n\r\nconst CreatePost = () => {\r\n\tconst [uploaded, setUploaded] = useState(false);\r\n\tconst [isLoading, setIsLoading] = useState(false);\r\n\r\n\tconst sendFormData = async (e) => {\r\n\t\tsetIsLoading(true);\r\n\t\te.preventDefault();\r\n\r\n\t\tconst form = new FormData();\r\n\t\tform.append(\"photo\", document.getElementById(\"photo_field\").files[0]);\r\n\t\tform.append(\"caption\", document.getElementById(\"caption_field\").value);\r\n\r\n\t\ttry {\r\n\t\t\tawait axios({\r\n\t\t\t\turl: \"/api/v1/posts/create\",\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\tdata: form,\r\n\t\t\t});\r\n\r\n\t\t\ttoast.success(\"New post created! Redirecting..\", {\r\n\t\t\t\tautoClose: 2000,\r\n\t\t\t});\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\thistory.push(\"/\");\r\n\t\t\t}, 2000);\r\n\t\t} catch (err) {\r\n\t\t\tsetIsLoading(false);\r\n\t\t\ttoast.error(`Error: ${err.response.data.data.error.message}`);\r\n\t\t}\r\n\t};\r\n\treturn (\r\n\t\t<div className=\"login-page\">\r\n\t\t\t<div className=\"login-form-container\">\r\n\t\t\t\t<h2>New Post</h2>\r\n\t\t\t\t<form onSubmit={sendFormData} className=\"login-form\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"caption\"\r\n\t\t\t\t\t\tplaceholder=\"Caption\"\r\n\t\t\t\t\t\tid=\"caption_field\"\r\n\t\t\t\t\t></input>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\tname=\"photo\"\r\n\t\t\t\t\t\taccept=\"image/*\"\r\n\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\tplaceholder=\"Photo\"\r\n\t\t\t\t\t\tid=\"photo_field\"\r\n\t\t\t\t\t\tonChange={() => setUploaded(true)}\r\n\t\t\t\t\t></input>\r\n\t\t\t\t\t<label htmlFor=\"photo_field\" className=\"upload-post-label\">\r\n\t\t\t\t\t\t{!uploaded ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<AddFileIcon />\r\n\t\t\t\t\t\t\t\t<p>Add Image</p>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<UploadedFileIcon />\r\n\t\t\t\t\t\t\t\t<p>Uploaded!</p>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tclassName=\"login-form__submit\"\r\n\t\t\t\t\t\tdisabled={isLoading}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{!isLoading ? <p>Submit</p> : <Loader />}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default CreatePost;\r\n","import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nimport { MdModeEdit as EditIcon } from \"react-icons/md\";\r\n\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { history } from \"../router/router\";\r\nimport Loader from \"./Loader\";\r\n\r\nconst EditUserProfile = ({ user }) => {\r\n\tconst [uploadedText, setUploadedText] = useState(\"\");\r\n\tconst [isLoading, setIsLoading] = useState(false);\r\n\r\n\tconst sendUpdateData = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tsetIsLoading(true);\r\n\r\n\t\tconst form = new FormData();\r\n\t\tform.append(\"photo\", document.getElementById(\"photo_field\").files[0]);\r\n\t\tform.append(\"username\", document.getElementById(\"username_field\").value);\r\n\t\tform.append(\"email\", document.getElementById(\"email_field\").value);\r\n\t\tform.append(\"name\", document.getElementById(\"name_field\").value);\r\n\r\n\t\ttry {\r\n\t\t\tawait axios({\r\n\t\t\t\turl: \"/api/v1/users/updateMe\",\r\n\t\t\t\tmethod: \"PATCH\",\r\n\t\t\t\tdata: form,\r\n\t\t\t});\r\n\t\t\tsetIsLoading(false);\r\n\r\n\t\t\ttoast.success(\"User details updated!\", {\r\n\t\t\t\tautoClose: 2000,\r\n\t\t\t});\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\twindow.location.reload(true);\r\n\t\t\t}, 2000);\r\n\t\t} catch (err) {\r\n\t\t\t// console.log(err.response);\r\n\t\t\tsetIsLoading(false);\r\n\t\t\ttoast.error(`Error: ${err.response.data.data.error.message}`);\r\n\t\t}\r\n\t};\r\n\r\n\tconst sendPasswordData = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tsetIsLoading(true);\r\n\r\n\t\tconst oldPassword = document.getElementById(\"oldPassword_field\").value;\r\n\t\tconst newPassword = document.getElementById(\"newPassword_field\").value;\r\n\t\tconst confirmPassword = document.getElementById(\"passwordConfirm_field\")\r\n\t\t\t.value;\r\n\r\n\t\ttry {\r\n\t\t\tawait axios({\r\n\t\t\t\turl: \"/api/v1/users/updatePassword\",\r\n\t\t\t\tmethod: \"PATCH\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\toldPassword,\r\n\t\t\t\t\tnewPassword,\r\n\t\t\t\t\tconfirmPassword,\r\n\t\t\t\t},\r\n\t\t\t});\r\n\r\n\t\t\ttoast.success(\"Password successfully updated!\", {\r\n\t\t\t\tautoClose: 2000,\r\n\t\t\t});\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\twindow.location.reload(true);\r\n\t\t\t}, 2000);\r\n\t\t} catch (err) {\r\n\t\t\t// console.log(err.response);\r\n\t\t\tsetIsLoading(false);\r\n\t\t\ttoast.error(`Error: ${err.response.data.data.error.message}`);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"login-page\">\r\n\t\t\t\t<div className=\"login-form-container\">\r\n\t\t\t\t\t<h2>Update Profile</h2>\r\n\t\t\t\t\t<form onSubmit={sendUpdateData} className=\"login-form\">\r\n\t\t\t\t\t\t<div className=\"edit-image\">\r\n\t\t\t\t\t\t\t<p>{uploadedText}</p>\r\n\t\t\t\t\t\t\t<img src={user.photo} alt={`${user.name}'s profile`} />\r\n\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\thtmlFor=\"photo_field\"\r\n\t\t\t\t\t\t\t\tclassName=\"upload-profile-label\"\r\n\t\t\t\t\t\t\t\ttitle=\"Change Profile Picture\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<EditIcon />\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<label className=\"edit-user-label\">Username</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\t\tplaceholder=\"Username\"\r\n\t\t\t\t\t\t\tid=\"username_field\"\r\n\t\t\t\t\t\t\tdefaultValue={user.username}\r\n\t\t\t\t\t\t\tclassName=\"edit-user-input\"\r\n\t\t\t\t\t\t></input>\r\n\t\t\t\t\t\t<label className=\"edit-user-label\">Name</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\t\tplaceholder=\"Name\"\r\n\t\t\t\t\t\t\tid=\"name_field\"\r\n\t\t\t\t\t\t\tdefaultValue={user.name}\r\n\t\t\t\t\t\t\tclassName=\"edit-user-input\"\r\n\t\t\t\t\t\t></input>\r\n\t\t\t\t\t\t<label className=\"edit-user-label\">Email</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\t\tplaceholder=\"Email Address\"\r\n\t\t\t\t\t\t\tid=\"email_field\"\r\n\t\t\t\t\t\t\tdefaultValue={user.email}\r\n\t\t\t\t\t\t\tclassName=\"edit-user-input\"\r\n\t\t\t\t\t\t></input>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\tname=\"photo\"\r\n\t\t\t\t\t\t\taccept=\"image/*\"\r\n\t\t\t\t\t\t\tplaceholder=\"Photo\"\r\n\t\t\t\t\t\t\tid=\"photo_field\"\r\n\t\t\t\t\t\t\tonChange={() => setUploadedText(\"New profile uploaded!\")}\r\n\t\t\t\t\t\t></input>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\tclassName=\"login-form__submit\"\r\n\t\t\t\t\t\t\tdisabled={isLoading}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{!isLoading ? <p>Submit</p> : <Loader />}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"login-page\" style={{ marginTop: \"-80px\" }}>\r\n\t\t\t\t<div className=\"login-form-container\">\r\n\t\t\t\t\t<h2>ChangePassword</h2>\r\n\t\t\t\t\t<form onSubmit={sendPasswordData} className=\"login-form\">\r\n\t\t\t\t\t\t<label className=\"edit-user-label\">Current Password</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tname=\"oldPassword\"\r\n\t\t\t\t\t\t\tplaceholder=\"********\"\r\n\t\t\t\t\t\t\tid=\"oldPassword_field\"\r\n\t\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\t\tclassName=\"edit-user-input\"\r\n\t\t\t\t\t\t></input>\r\n\t\t\t\t\t\t<label className=\"edit-user-label\">New Password</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"Password\"\r\n\t\t\t\t\t\t\tname=\"newPassword\"\r\n\t\t\t\t\t\t\tplaceholder=\"********\"\r\n\t\t\t\t\t\t\tid=\"newPassword_field\"\r\n\t\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\t\tclassName=\"edit-user-input\"\r\n\t\t\t\t\t\t></input>\r\n\t\t\t\t\t\t<label className=\"edit-user-label\">Confirm Password</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tname=\"passwordConfirm\"\r\n\t\t\t\t\t\t\tplaceholder=\"********\"\r\n\t\t\t\t\t\t\tid=\"passwordConfirm_field\"\r\n\t\t\t\t\t\t\trequired={true}\r\n\t\t\t\t\t\t\tclassName=\"edit-user-input\"\r\n\t\t\t\t\t\t></input>\r\n\t\t\t\t\t\t<button type=\"submit\" className=\"login-form__submit\">\r\n\t\t\t\t\t\t\t{!isLoading ? <p>Update</p> : <Loader />}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default EditUserProfile;\r\n","import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport AwesomeDebouncePromise from \"awesome-debounce-promise\";\r\nimport { FcSearch as SearchIcon } from \"react-icons/fc\";\r\nimport { FaRegSadTear as SadIcon } from \"react-icons/fa\";\r\n\r\nimport { UserInfoSmall } from \"./likesArray\";\r\n\r\nconst SearchUsers = () => {\r\n\tconst [users, setUsers] = useState([]);\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst [text, setText] = useState(\"\");\r\n\r\n\tconst asyncFunction = async (value) => {\r\n\t\ttry {\r\n\t\t\tconst url = \"/api/v1/users/search\";\r\n\t\t\tconst res = await axios({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tsearch: value,\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t\tsetUsers(res.data.data.users);\r\n\t\t\tsetLoading(false);\r\n\t\t} catch (err) {\r\n\t\t\tif (err.response.status === 400) {\r\n\t\t\t\tsetUsers([\"1\"]);\r\n\t\t\t} else {\r\n\t\t\t\tsetUsers([]);\r\n\t\t\t}\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst asyncFunctionDebounced = AwesomeDebouncePromise(asyncFunction, 800);\r\n\r\n\tconst handleTextChange = async (e) => {\r\n\t\te.preventDefault();\r\n\r\n\t\tsetLoading(true);\r\n\t\tsetUsers([\"1\"]);\r\n\t\tsetText(e.target.value);\r\n\t\tawait asyncFunctionDebounced(e.target.value);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"searchUsers\">\r\n\t\t\t<h3>Search Users</h3>\r\n\t\t\t<div className=\"searchUser-bar\">\r\n\t\t\t\t<div className=\"searchUser-bar__icon\">\r\n\t\t\t\t\t<SearchIcon />\r\n\t\t\t\t</div>\r\n\t\t\t\t<input\r\n\t\t\t\t\tname=\"search\"\r\n\t\t\t\t\tonChange={handleTextChange}\r\n\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\tclassName=\"searchUser-bar__input\"\r\n\t\t\t\t\tplaceholder=\"Search Users\"\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"searchUsers-results\">\r\n\t\t\t\t{!!text &&\r\n\t\t\t\t\t(!!users.length ? (\r\n\t\t\t\t\t\t!loading ? (\r\n\t\t\t\t\t\t\tusers.map((user) => <UserInfoSmall user={user} key={user._id} />)\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<div className=\"search-loader\"></div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<div className=\"search-not-found\">\r\n\t\t\t\t\t\t\t<SadIcon />\r\n\t\t\t\t\t\t\t<p>No users found.</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default SearchUsers;\r\n","import React from \"react\";\r\nimport { history } from \"../router/router\";\r\n\r\nconst PageNotFound = () => {\r\n\treturn (\r\n\t\t<div className=\"page-404\">\r\n\t\t\t<div className=\"page-404-content\">\r\n\t\t\t\t<h3>Page Not Found</h3>\r\n\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t<h2>404 Error</h2>\r\n\t\t\t\t\t<p>This page does not seem to exist :(</p>\r\n\t\t\t\t\t<button onClick={() => history.push(\"/\")}>Home</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default PageNotFound;\r\n","import React, { useEffect } from \"react\";\r\nimport { Router, Switch, Route } from \"react-router-dom\";\r\nimport { createBrowserHistory } from \"history\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport * as actions from \"../actions\";\r\n\r\nimport PrivateRoute from \"./PrivateRoute\";\r\nimport PublicRoute from \"./PublicRoute\";\r\n\r\nimport Timeline from \"../components/Timeline\";\r\nimport LoginForm from \"../components/Login\";\r\nimport SignupForm from \"../components/Signup\";\r\nimport PostDetail from \"../components/PostDetails\";\r\nimport UserProfile from \"../components/UserProfile\";\r\nimport CreatePost from \"../components/CreatePost\";\r\nimport EditUserProfile from \"../components/EditUserProfile\";\r\nimport SearchUsers from \"../components/SearchUsers\";\r\nimport PageNotFound from \"../components/PageNotFound\";\r\nimport PageLoader from \"../components/PageLoader\";\r\n\r\nexport const history = createBrowserHistory();\r\n\r\nconst AppRouter = (props) => {\r\n\t// Fetch initial states\r\n\tuseEffect(() => {\r\n\t\tprops.isLoggedIn();\r\n\t\tprops.fetchTimeline();\r\n\t}, []);\r\n\r\n\treturn !props.loading ? (\r\n\t\t<Router history={history}>\r\n\t\t\t<Switch>\r\n\t\t\t\t<PublicRoute path=\"/login\" component={LoginForm} />\r\n\t\t\t\t<PublicRoute path=\"/signup\" component={SignupForm} />\r\n\r\n\t\t\t\t<PrivateRoute path=\"/\" component={Timeline} exact={true} />\r\n\t\t\t\t<PrivateRoute path=\"/post/create\" component={CreatePost} exact={true} />\r\n\t\t\t\t<PrivateRoute\r\n\t\t\t\t\tpath=\"/post/:postId\"\r\n\t\t\t\t\tcomponent={PostDetail}\r\n\t\t\t\t\texact={true}\r\n\t\t\t\t/>\r\n\t\t\t\t<PrivateRoute path=\"/update\" component={EditUserProfile} exact={true} />\r\n\t\t\t\t<PrivateRoute\r\n\t\t\t\t\tpath=\"/searchUsers\"\r\n\t\t\t\t\tcomponent={SearchUsers}\r\n\t\t\t\t\texact={true}\r\n\t\t\t\t/>\r\n\t\t\t\t<PrivateRoute\r\n\t\t\t\t\tpath=\"/user/:username\"\r\n\t\t\t\t\tcomponent={UserProfile}\r\n\t\t\t\t\texact={true}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<Route path=\"/\" component={PageNotFound} />\r\n\t\t\t</Switch>\r\n\t\t</Router>\r\n\t) : (\r\n\t\t<PageLoader />\r\n\t);\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\tisLoggedIn: () => dispatch(actions.getAuthToken()),\r\n\tfetchTimeline: () => dispatch(actions.fetchMyTimeline()),\r\n});\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tuser: state.auth.user,\r\n\tloading: state.auth.loading,\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AppRouter);\r\n","export const getAuthToken = () => ({\r\n\ttype: \"FETCH_AUTH_TOKEN\",\r\n});\r\n\r\nexport const fetchMyTimeline = () => ({\r\n\ttype: \"FETCH_TIMELINE\",\r\n});\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\n\r\nimport store from \"./store\";\r\n\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nimport AppRouter from \"./router/router\";\r\n\r\nimport \"./styles/index.scss\";\r\n\r\nconst jsx = (\r\n\t<Provider store={store}>\r\n\t\t<ToastContainer\r\n\t\t\tposition=\"top-right\"\r\n\t\t\tautoClose={5000}\r\n\t\t\thideProgressBar={false}\r\n\t\t\tnewestOnTop={true}\r\n\t\t\tcloseOnClick\r\n\t\t\trtl={false}\r\n\t\t\tpauseOnFocusLoss\r\n\t\t\tdraggable\r\n\t\t\tpauseOnHover\r\n\t\t/>\r\n\t\t<AppRouter />\r\n\t</Provider>\r\n);\r\n\r\nReactDOM.render(jsx, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}